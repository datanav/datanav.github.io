
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Testing a Sesam configuration locally &#8212; Sesam Documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Continuous integration (CI)" href="continuous-integration.html" />
    <link rel="prev" title="Using Sesam with a version control system" href="version-control-system.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="index.html">
  <img src="_static/sesamlogo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-whatis.html">
  What is Sesam
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index-developer.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-learn.html">
  Learn
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="community.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="legal.html">
  Legal
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://support.sesam.io">
  Support
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://portal.sesam.io">
  Login
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="quick-reference.html">
   Quick Reference
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="best-practices.html">
   Project kickstart
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pre-planning.html">
     Planning a project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="setup-environment.html">
     Setting up an environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-dataflow.html">
     Creating a dataflow
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="developer-guide.html">
   Building blocks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="product-features.html">
   Features
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DTLReferenceGuide.html">
   Data Transformation Language (DTL)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="patterns.html">
   Design patterns
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-synchronization.html">
   Data synchronization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="idempotency.html">
     Non-idempotency
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cron-expressions.html">
     Cron Expressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rdf-support.html">
     RDF support
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="json-pull.html">
     JSON Pull Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="json-push.html">
     JSON Push Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="extension-points.html">
     Developer Extension Points
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="source-datatype-mapping.html">
     Source datatype mapping
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-datamodelling.html">
   Data modelling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="entitymodel.html">
     Entity Data Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-modelling.html">
     Data modelling
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-dataplatforms.html">
   Data platforms
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="azure.html">
     Sesam in Microsoft Azure
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index-operations.html">
   Operations
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="security.html">
     Security
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="notifications.html">
     Notifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pump-execution.html">
     Pump Execution Dataset
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="project-workflow.html">
     Configuration Management
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="version-control-system.html">
       Using Sesam with a version control system
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Testing a Sesam configuration locally
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="continuous-integration.html">
       Continuous integration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="automatic-deployment.html">
       Automatic deployment
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="self-hosted.html">
     Self-hosted service
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="low-level-debugging.html">
     Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="behind-the-scenes.html">
     Behind the scenes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="tools.html">
   Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="management-studio.html">
     Management Studio
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-client.html">
     Sesam Client
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="gdpr-platform.html">
     GDPR platform
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-configuration.html">
       Platform configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-types-purposes-configuration.html">
       Datatypes and purposes configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-access-portal.html">
       The GDPR data access portal
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-developer-docs.html">
       Developer documentation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-getting-started.html">
       Getting started
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-changelog.html">
       Changelog
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="configuration.html">
   Service Configuration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="api.html">
   Service API
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="deprecations.html">
   Deprecated features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="databrowser.html">
     Databrowser
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-guide.html">
       Databrowser Guide
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-auth.html">
       Authentication and authorization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-api.html">
       Configuration file API
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="changelog.html">
   Changelog
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#configuring-tests">
   Configuring tests
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dtl-parameters">
     DTL parameters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#internal-properties">
     Internal properties
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#endpoints">
     Endpoints
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-tests-locally">
     Running tests locally
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="testing-a-sesam-configuration-locally">
<span id="setup-local-tests"></span><h1>Testing a Sesam configuration locally<a class="headerlink" href="#testing-a-sesam-configuration-locally" title="Permalink to this headline">¶</a></h1>
<p>In a normal workflow you should test your local changes before committing them to a repository. For setting up local testing of a Sesam configuration we recommend using the Sesam client, which is a command line tool for interacting with a Sesam service instance. To install and configure the Sesam client, read this <a class="reference internal" href="sesam-client.html#concepts-sesam-client"><span class="std std-ref">document</span></a>.</p>
<p>Testing a Sesam configuration should be done by running all the pipes in your local node until no pipes has any entities left in their queues, except the output pipes (which should either be disabled or unable to send data to their respective systems). Doing this manually could hence be a tedious job, especially if your configuration consists of numerous pipes, having to repeatedly start all or several pipes. The output of the endpoint pipes should then be verified against the expected output of the pipes. The Sesam client includes a nifty feature for this, both for running the pipes to their conclusion and verifying the end result as well as updating the results in case you intended to perform a change in the output.</p>
<div class="section" id="configuring-tests">
<h2>Configuring tests<a class="headerlink" href="#configuring-tests" title="Permalink to this headline">¶</a></h2>
<p>However, for this to work, you have to configure your Sesam configuration with a test-file for each endpoint pipe. In the same directory as you have your ‘pipes’ and ‘systems’ folders, you need to add a new folder named ‘expected’, this will be the folder that contains the test files and the expected result for each pipe.</p>
<p>For each endpoint pipe in your Sesam configuration, you need to add two files (replace &lt;name_of_pipe&gt; with the name of the pipe):</p>
<blockquote>
<div><ul class="simple">
<li><p>&lt;name_of_pipe&gt;.json</p></li>
<li><p>&lt;name_of_pipe&gt;.test.json</p></li>
</ul>
</div></blockquote>
<p>The file with the .json extension is the file that shall contain the expected result. The file with the .test.json extension should contain the test configuration for that pipe, the available settings for this file are listed below:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 12%" />
<col style="width: 29%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_id</span></code></p></td>
<td><div class="line-block">
<div class="line">Name of the test.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">string</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Name of the <code class="docutils literal notranslate"><span class="pre">.test.json</span> <span class="pre">file</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><div class="line-block">
<div class="line">Config type so that this later can just be part of the rest of the config.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">string</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Test</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td><div class="line-block">
<div class="line">A description of the test.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">string</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ignore</span></code></p></td>
<td><div class="line-block">
<div class="line">If the output should be ignored during tests.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">boolean</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">false</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">endpoint</span></code></p></td>
<td><div class="line-block">
<div class="line">If the output should be fetched from a published endpoint instead.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">string</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line">By default the json is grabbed from <code class="docutils literal notranslate"><span class="pre">/pipes/&lt;my-pipe&gt;/entities</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">stage</span></code></p></td>
<td><div class="line-block">
<div class="line">In which pipe stage to get the entities (source/before-transform/after-transform/sink).</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">string</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line">By default the stage is <code class="docutils literal notranslate"><span class="pre">sink</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file</span></code></p></td>
<td><div class="line-block">
<div class="line">File that contains the expected results.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">string</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Name of the .test.json file without .test (e.g. foo.test.json looks for foo.json).</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pipe</span></code></p></td>
<td><div class="line-block">
<div class="line">Pipe that contains the output to test.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">string</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Name of the .test.json file without .test (e.g. foo.test.json looks for foo.json).</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">blacklist</span></code></p></td>
<td><div class="line-block">
<div class="line">Properties to ignore in the output.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Array</span> <span class="pre">of</span> <span class="pre">strings</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[]</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">parameters</span></code></p></td>
<td><div class="line-block">
<div class="line">Which parameters to pass as bound parameters. Note that parameters only works for published endpoints.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">Object</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line">No</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{}</span></code></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    $ cat foo.test.json
    {
          &quot;_id&quot;: &quot;foo&quot;,
          &quot;type&quot;: &quot;test&quot;,
          &quot;file&quot;: &quot;foo.json&quot;
          &quot;blacklist&quot;: [&quot;my-last-updated-ts&quot;],
          &quot;ignore&quot;: false
    }
}
</pre></div>
</div>
<div class="section" id="dtl-parameters">
<h3>DTL parameters<a class="headerlink" href="#dtl-parameters" title="Permalink to this headline">¶</a></h3>
<p>If you need to pass various variations of bound parameters to the DTL, you just create multiple .test.json files for each combination of parameters.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    $ cat foo-A.test.json
        {
          &quot;pipe&quot;: &quot;foo&quot;,
          &quot;file&quot;: &quot;foo-A.xml&quot;,
          &quot;endpoint&quot;: &quot;xml&quot;,
          &quot;parameters&quot;: {
            &quot;my-param&quot;: &quot;A&quot;
          }
        }

    $ cat foo-B.test.json
        {
          &quot;pipe&quot;: &quot;foo&quot;,
          &quot;file&quot;: &quot;foo-B.xml&quot;,
          &quot;endpoint&quot;: &quot;xml&quot;,
          &quot;parameters&quot;: {
            &quot;my-param&quot;: &quot;B&quot;
          }
        }
    }
</pre></div>
</div>
<p>This will compare the output of <code class="docutils literal notranslate"><span class="pre">/publishers/foo/xml?my-param=A</span></code> with the contents of <code class="docutils literal notranslate"><span class="pre">foo-A.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">/publishers/foo/xml?my-param=B</span></code> with the contents of <code class="docutils literal notranslate"><span class="pre">foo-B.xml</span></code>.</p>
</div>
<div class="section" id="internal-properties">
<h3>Internal properties<a class="headerlink" href="#internal-properties" title="Permalink to this headline">¶</a></h3>
<p>All internal properties except <code class="docutils literal notranslate"><span class="pre">_id</span></code> and <code class="docutils literal notranslate"><span class="pre">_deleted</span></code> are removed from the output. Entities that has <code class="docutils literal notranslate"><span class="pre">_deleted</span></code> set to <code class="docutils literal notranslate"><span class="pre">false</span></code> will also be removed.</p>
</div>
<div class="section" id="endpoints">
<h3>Endpoints<a class="headerlink" href="#endpoints" title="Permalink to this headline">¶</a></h3>
<p>By default the entities are fetched from <code class="docutils literal notranslate"><span class="pre">/pipes/&lt;my-pipe&gt;/entities</span></code>, but if endpoint is set it will be fetched from
<code class="docutils literal notranslate"><span class="pre">/publishers/&lt;my-pipe&gt;/&lt;endpoint-type&gt;</span></code> based on the endpoint type specified. Note that the pipe needs to be configured to publish to this endpoint.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
  <span class="s2">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;xml&quot;</span><span class="p">,</span>
  <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.xml&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will compare the output of <code class="docutils literal notranslate"><span class="pre">/publishers/foo/xml</span></code> with the contents of <code class="docutils literal notranslate"><span class="pre">foo.xml</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
  <span class="s2">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
  <span class="s2">&quot;stage&quot;</span><span class="p">:</span> <span class="s2">&quot;source&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will compare the output of <code class="docutils literal notranslate"><span class="pre">/pipes/foo/entities?stage=source</span></code> with the contents of <code class="docutils literal notranslate"><span class="pre">foo.json</span></code>, useful when the pipe’s sink strips away the “_id” property for example.</p>
</div>
<div class="section" id="running-tests-locally">
<h3>Running tests locally<a class="headerlink" href="#running-tests-locally" title="Permalink to this headline">¶</a></h3>
<p>To test your Sesam configuration locally, run the following commmand:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sesam</span> <span class="o">-</span><span class="n">vv</span> <span class="n">test</span>
</pre></div>
</div>
<p>If you haven’t configured up the tests correctly or there are endpoint pipes that doesn’t have any corresponding test file, you will be notified. If so, fix the missing tests and then run the commmand again. If the tests runs ok, you will get a message that all the tests has passed. If any test failed, you will be notified which test / pipe that failed and get a comparision of the expected result and the received result.</p>
</div>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="version-control-system.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Using Sesam with a version control system</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="continuous-integration.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Continuous integration (CI)</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 Sesam.io AS.<br>
</p>
    </div>
    
  </div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZDKEJY06V9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZDKEJY06V9');
</script>
<!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="https://js.hs-scripts.com/19709964.js"></script>
<!-- End of HubSpot Embed Code -->

  </body>
</html>