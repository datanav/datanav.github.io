<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Design patterns" href="patterns.html" /><link rel="prev" title="Features" href="product-features.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.02.14.1"/>
        <title>DTL Reference Guide - Sesam Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=a8f031f701c6af50c9919b48f173a5785af06fac" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<div class="announcement">
  <aside class="announcement-content">
     This is a preview of the upcoming Sesam Documentation. For the official documentation go to <a href="https://docs.sesam.io">docs.sesam.io</a> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Sesam Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/sesamlogo.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="index-whatis.html">What is Sesam</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="core-principles.html">Core principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html">Key benefits</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index-developer.html">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="best-practices.html">Project kickstart</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="pre-planning.html">Planning a project</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup-environment.html">Setting up an environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="sesam-dataflow.html">Creating a dataflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developer-guide.html">Building blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="product-features.html">Features</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Data Transformation Language (DTL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns.html">Design patterns</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="index-synchronization.html">Data synchronization</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="idempotency.html">Non-idempotency</a></li>
<li class="toctree-l3"><a class="reference internal" href="cron-expressions.html">Cron Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rdf-support.html">RDF support</a></li>
<li class="toctree-l3"><a class="reference internal" href="json-pull.html">JSON Pull Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="json-push.html">JSON Push Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="extension-points.html">Developer Extension Points</a></li>
<li class="toctree-l3"><a class="reference internal" href="source-datatype-mapping.html">Source datatype mapping</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="index-datamodelling.html">Data modelling</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="entitymodel.html">Entity Data Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="data-modelling.html">Data modelling</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="index-dataplatforms.html">Data platforms</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="azure.html">Sesam in Microsoft Azure</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="index-operations.html">Operations</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="pump-execution.html">Pump Execution Dataset</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="project-workflow.html">Configuration Management</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="version-control-system.html">Using Sesam with a version control system</a></li>
<li class="toctree-l4"><a class="reference internal" href="testing-locally.html">Testing a Sesam configuration locally</a></li>
<li class="toctree-l4"><a class="reference internal" href="continuous-integration.html">Continuous integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="automatic-deployment.html">Automatic deployment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="self-hosted.html">Self-hosted service</a></li>
<li class="toctree-l3"><a class="reference internal" href="low-level-debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="behind-the-scenes.html">Behind the scenes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="tools.html">Tools</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="management-studio.html">Management Studio</a></li>
<li class="toctree-l3"><a class="reference internal" href="sesam-client.html">Sesam Client</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="gdpr-platform.html">GDPR platform</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="gdpr-platform-configuration.html">Platform configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="gdpr-data-types-purposes-configuration.html">Datatypes and purposes configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="gdpr-data-access-portal.html">The GDPR data access portal</a></li>
<li class="toctree-l4"><a class="reference internal" href="gdpr-platform-developer-docs.html">Developer documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="gdpr-getting-started.html">Getting started</a></li>
<li class="toctree-l4"><a class="reference internal" href="gdpr-changelog.html">Changelog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Service Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">Service API</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="deprecations.html">Deprecated features</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="databrowser.html">Databrowser</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="databrowser-guide.html">Databrowser Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="databrowser-auth.html">Authentication and authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="databrowser-api.html">Configuration file API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="index-learn.html">Learn Sesam</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Getting started</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="community.html">Community</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="legal.html">Legal</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="terms.html">Terms of Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="legal-service.html">Description of the Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="pricing.html">Subscription Fee, payment terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="legal-dap.html">Data Process Agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="partner-agreement.html">Partner Agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="privacy-policy.html">Privacy Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quick-reference.html">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://support.sesam.io">Support</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="dtl-reference-guide">
<span id="dtlreferenceguide"></span><h1>DTL Reference Guide<a class="headerlink" href="#dtl-reference-guide" title="Permalink to this headline">#</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h2>
<p>The Data Transformation Language (DTL) has been created as a means to allow developers to clearly describe transformations that should be performed on streams of data in order to create new datasets.</p>
<div class="section" id="core-concepts">
<h3>Core Concepts<a class="headerlink" href="#core-concepts" title="Permalink to this headline">#</a></h3>
<p>DTL allows developers to describe a data transform. The DTL processor applies the transform to a stream of entities. For each entity in the stream the same transform is applied. The result of processing is a stream of new entities.</p>
<p>An entity coming into a DTL transform is called the <em>source entity</em>. The DTL transform describes how to construct new entities from the source entity. A transform can also perform hops that range across datasets in the datahub. These hops must start from the source entity.</p>
<p>DTL consists of ‘functions’ that can pick and transform data and ‘hops’ that can traverse the data in the datahub. In combination these offer a powerful way to construct new data entities from existing data. DTL functions are composable and thus allowing complex computation to be expressed.</p>
</div>
<div class="section" id="syntax">
<h3>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">#</a></h3>
<p>DTL uses a JSON syntax to describe the transforms to perform. This allows us to define it directly in the pipe’s configuration, which is also written in JSON. In general, DTL uses functions over keywords and as such there are just a few terms that are baked into the language.</p>
<p>An example using the ‘add’ transform:</p>
<blockquote>
<div><p>[“add”, “name”, “_S.firstname”]</p>
</div></blockquote>
<p>And composing functions:</p>
<blockquote>
<div><p>[“add”, “name”, [“concat”, [“upper”, “_S.lastname”], “, “, “_S.firstname”]]</p>
</div></blockquote>
</div>
</div>
<div class="section" id="annotated-example">
<h2>Annotated Example<a class="headerlink" href="#annotated-example" title="Permalink to this headline">#</a></h2>
<p>Let’s say that we have two datasets, <code class="docutils literal notranslate"><span class="pre">person</span></code> and <code class="docutils literal notranslate"><span class="pre">orders</span></code>, and that
we want to transform the <em>persons</em> by joining in their <em>orders</em> and
apply a few other transform functions. In this section you’ll find a
complete DTL transform that takes entities from the <code class="docutils literal notranslate"><span class="pre">person</span></code> dataset,
joins them with entities from the <code class="docutils literal notranslate"><span class="pre">orders</span></code> dataset and creates new
entities from them.</p>
<p>Given the following <em>source entity</em> (from the <code class="docutils literal notranslate"><span class="pre">person</span></code> dataset):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"John Smith"</span><span class="p">,</span>
  <span class="s2">"age"</span><span class="p">:</span> <span class="mi">25</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We then want to transform it into the following <em>target entity</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"customer"</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"JOHN SMITH"</span><span class="p">,</span>
  <span class="s2">"orders"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">"_id"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">320</span> <span class="p">},</span>
    <span class="p">{</span><span class="s2">"_id"</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span> <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"order_count"</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A pipe with the <code class="docutils literal notranslate"><span class="pre">dtl</span></code> transform below lets us transform persons into
persons with orders:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"person-with-orders"</span><span class="p">,</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"pipe"</span><span class="p">,</span>
  <span class="s2">"source"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"dataset"</span><span class="p">,</span>
      <span class="s2">"dataset"</span><span class="p">:</span> <span class="s2">"person"</span>
  <span class="p">},</span>
  <span class="s2">"transform"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"dtl"</span><span class="p">,</span>
    <span class="s2">"rules"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"default"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span><span class="s2">"copy"</span><span class="p">,</span> <span class="s2">"_id"</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">"add"</span><span class="p">,</span> <span class="s2">"type"</span><span class="p">,</span> <span class="s2">"customer"</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">"add"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"upper"</span><span class="p">,</span> <span class="s2">"_S.name"</span><span class="p">]],</span>
            <span class="p">[</span><span class="s2">"add"</span><span class="p">,</span> <span class="s2">"orders"</span><span class="p">,</span>
              <span class="p">[</span><span class="s2">"sorted"</span><span class="p">,</span> <span class="s2">"_.amount"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"apply-hops"</span><span class="p">,</span> <span class="s2">"order"</span><span class="p">,</span> <span class="p">{</span>
                <span class="s2">"datasets"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"orders o"</span><span class="p">],</span>
                <span class="s2">"where"</span><span class="p">:</span> <span class="p">[</span>
                  <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S._id"</span><span class="p">,</span> <span class="s2">"o.cust_id"</span><span class="p">]</span>
                <span class="p">]</span>
            <span class="p">}]]],</span>
            <span class="p">[</span><span class="s2">"add"</span><span class="p">,</span> <span class="s2">"order_count"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"count"</span><span class="p">,</span> <span class="s2">"_T.orders"</span><span class="p">]],</span>
            <span class="p">[</span><span class="s2">"filter"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"gt"</span><span class="p">,</span> <span class="s2">"_T.order_count"</span><span class="p">,</span> <span class="mi">10</span><span class="p">]]</span>
        <span class="p">],</span>
        <span class="s2">"order"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span><span class="s2">"copy"</span><span class="p">,</span> <span class="s2">"_id"</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">"add"</span><span class="p">,</span> <span class="s2">"amount"</span><span class="p">,</span> <span class="s2">"_S.amount"</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"sink"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"dataset"</span><span class="p">,</span>
      <span class="s2">"dataset"</span><span class="p">:</span> <span class="s2">"person-with-orders"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Explanation:</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line">The <code class="docutils literal notranslate"><span class="pre">dtl</span></code> transform will receive source entities from the
<code class="docutils literal notranslate"><span class="pre">person</span></code> dataset. It will transform them and they’ll be written
to the <code class="docutils literal notranslate"><span class="pre">person-with-orders</span></code> dataset.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">There are two named <code class="docutils literal notranslate"><span class="pre">rules</span></code> specified in the DTL transform:
<code class="docutils literal notranslate"><span class="pre">default</span></code> and <code class="docutils literal notranslate"><span class="pre">order</span></code>. The <code class="docutils literal notranslate"><span class="pre">default</span></code> rule is mandatory and
is the one that is applied to the entities in the <code class="docutils literal notranslate"><span class="pre">person</span></code>
dataset. You can think of it as the entry point of the execution,
similar to a <code class="docutils literal notranslate"><span class="pre">main</span></code> function in many programming languages.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span> <span class="pre">"_id"]</span></code> copies the <code class="docutils literal notranslate"><span class="pre">_id</span></code> property from the source
entity to the target entity.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"type",</span> <span class="pre">"customer"]</span></code> adds the <code class="docutils literal notranslate"><span class="pre">type</span></code> property to the target
entity with the literal value <code class="docutils literal notranslate"><span class="pre">"customer"</span></code>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"name",</span> <span class="pre">["upper",</span> <span class="pre">"_S.name"]]</span></code> adds the <code class="docutils literal notranslate"><span class="pre">name</span></code>
property to the target entity, uppercasing the name in the source
entity.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">"add"</span><span class="p">,</span> <span class="s2">"orders"</span><span class="p">,</span>
  <span class="p">[</span><span class="s2">"sorted"</span><span class="p">,</span> <span class="s2">"_.amount"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"apply-hops"</span><span class="p">,</span> <span class="s2">"order"</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">"datasets"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"orders o"</span><span class="p">],</span>
      <span class="s2">"where"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S._id"</span><span class="p">,</span> <span class="s2">"o.cust_id"</span><span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
<ol class="arabic">
<li><div class="line-block">
<div class="line">The expression above adds the <code class="docutils literal notranslate"><span class="pre">orders</span></code> property to the target
entity. It does this by joining the source entity’s <code class="docutils literal notranslate"><span class="pre">_id</span></code>
property with the <code class="docutils literal notranslate"><span class="pre">cust_id</span></code> property of entities in the
<code class="docutils literal notranslate"><span class="pre">orders</span></code> dataset. The join is done by the <code class="docutils literal notranslate"><span class="pre">apply-hops</span></code> function,
which takes a hops specification that contains list of <code class="docutils literal notranslate"><span class="pre">datasets</span></code>,
assigns aliases to them, which then get exposed as variables that
you can use in expressions in the <code class="docutils literal notranslate"><span class="pre">where</span></code> clause. The result of
the join is a list of orders:</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">320</span><span class="p">,</span>
  <span class="s2">"order_lines"</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
  <span class="s2">"cust_id"</span><span class="p">:</span> <span class="s2">"1"</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span>
  <span class="s2">"order_lines"</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
  <span class="s2">"cust_id"</span><span class="p">:</span> <span class="s2">"1"</span>
<span class="p">}]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Next, the <code class="docutils literal notranslate"><span class="pre">order</span></code> transform is then applied. The result of this
is a list of orders with two properties: <code class="docutils literal notranslate"><span class="pre">_id</span></code> and <code class="docutils literal notranslate"><span class="pre">amount</span></code>:</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">320</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span>
<span class="p">}]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The order entities are then <code class="docutils literal notranslate"><span class="pre">sorted</span></code> by their <code class="docutils literal notranslate"><span class="pre">amount</span></code>
property before being assigned to the <code class="docutils literal notranslate"><span class="pre">orders</span></code> property on the
target entity:</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">320</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"200"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">500</span>
<span class="p">}]</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"order_count",</span> <span class="pre">["count",</span> <span class="pre">"_T.orders"]]</span></code> adds the
<code class="docutils literal notranslate"><span class="pre">order_count</span></code> property to the target entity. Note that the value
is the number of order entities in the target entity’s <code class="docutils literal notranslate"><span class="pre">orders</span></code>
property. Note that we can access properties on the target entity
once we’ve added them.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Stop processing if the <code class="docutils literal notranslate"><span class="pre">["filter",</span> <span class="pre">["gt",</span> <span class="pre">"_T.order_count",</span> <span class="pre">10]]</span></code>
evaluates to true. If the filter is false the target entity is not
emitted / created.</div>
</div>
</li>
</ol>
<p>Things to note:</p>
<ul class="simple">
<li><p>Transform functions are applied in the order given. The order is
significant, and one transform can use target entity properties
created by earlier transform function.</p></li>
<li><p>the hops function is deterministic but not sorted (it produces deterministic order
based on the <code class="docutils literal notranslate"><span class="pre">_id</span></code> property of the entities within each dataset it processes).
You must apply the <code class="docutils literal notranslate"><span class="pre">sorted</span></code> function to the result of a hops join to achieve a
particular order.</p></li>
<li><p>The filter function can be used to stop transformation of individual
entities, effectively filtering them out of the output stream.</p></li>
<li><p>When the DTL of a pipe is modified, the pipe’s “last-seen” value must be
cleared in order to reprocess already seen entities with the new DTL.
This can be done by setting the “last-seen” value to an empty string with the
<a class="reference external" href="./api.html#api-reference-pump-update-last-seen">update-last-seen</a> operation in the SESAM API.</p></li>
</ul>
</div>
<div class="section" id="variables">
<span id="id1"></span><h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">#</a></h2>
<p>There are four built-in variables in the Data Transformation
Language. These are <code class="docutils literal notranslate"><span class="pre">_S</span></code>, <code class="docutils literal notranslate"><span class="pre">_T</span></code>, <code class="docutils literal notranslate"><span class="pre">_P</span></code>, <code class="docutils literal notranslate"><span class="pre">_B</span></code> and <code class="docutils literal notranslate"><span class="pre">_</span></code>. They refer to
the source entity, the target entity, the parent context, the bound endpoint variables and the
current , respectively. <code class="docutils literal notranslate"><span class="pre">_S</span></code> and <code class="docutils literal notranslate"><span class="pre">_T</span></code> appear in pairs inside
each applied transform. <code class="docutils literal notranslate"><span class="pre">_P</span></code> appears inside the <code class="docutils literal notranslate"><span class="pre">apply</span></code> function
and refers to the parent context. <code class="docutils literal notranslate"><span class="pre">_</span></code> is used to refer to the
current value in functional expressions. The <code class="docutils literal notranslate"><span class="pre">_B</span></code> variable is used by the <a class="reference internal" href="configuration.html#http-endpoint-sink"><span class="std std-ref">HTTP endpoint sinks</span></a> to hold variables
defined by URL parameters (i.e. a URL variable <code class="docutils literal notranslate"><span class="pre">foo</span></code> given to the endpoint API on the form
<code class="docutils literal notranslate"><span class="pre">http://my_host:port/api/publishers/my_endpoint?foo=bar</span></code> will be reflected in the <code class="docutils literal notranslate"><span class="pre">_B</span></code> map as a key <code class="docutils literal notranslate"><span class="pre">foo</span></code> with
the value <code class="docutils literal notranslate"><span class="pre">bar</span></code>). It is useful for parameterizing the transform on an endpoint sink.</p>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="s-variable">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_S</span></code></p></td>
<td><p>Refers to the source entity. This is the entity on which the
DTL transform operate. Note that with the <code class="docutils literal notranslate"><span class="pre">apply</span></code> function
you can apply nested transform rules, where each of the values
given to <code class="docutils literal notranslate"><span class="pre">apply</span></code> is made a source entity for that nested
transform.</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">42]</span></code></div>
<div class="line"><br/></div>
<div class="line">The source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field must have a value greater than 42.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="t-variable"><td><p><code class="docutils literal notranslate"><span class="pre">_T</span></code></p></td>
<td><p>Refers to the target entity. This is the entity that is the
primary target entity of transforming the source entity. Note
that the <code class="docutils literal notranslate"><span class="pre">create</span></code> transform can be used to emit entities
in addition to just the target entity.</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">["length",</span> <span class="pre">"_T.length"],</span> <span class="pre">100]</span></code></div>
<div class="line"><br/></div>
<div class="line">The target entity’s <code class="docutils literal notranslate"><span class="pre">description</span></code> field must have a length of
more than 100 characters.</div>
</div>
</td>
</tr>
<tr class="row-even" id="p-variable"><td><p><code class="docutils literal notranslate"><span class="pre">_P</span></code></p></td>
<td><p>A dict that contains the source entity and the
target entity of the parent context. If the parent context also has
a parent context, then that will also be available. The dict always
contains the <code class="docutils literal notranslate"><span class="pre">_S</span></code> and <code class="docutils literal notranslate"><span class="pre">_T</span></code> variables, while the <code class="docutils literal notranslate"><span class="pre">_P</span></code> property is
optional.  <code class="docutils literal notranslate"><span class="pre">_P</span></code> does not contain the <code class="docutils literal notranslate"><span class="pre">_R</span></code> variable. Note that
the <code class="docutils literal notranslate"><span class="pre">_P</span></code> appears only inside the <code class="docutils literal notranslate"><span class="pre">apply</span></code> function.</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">"_P._S.age",</span> <span class="pre">18]</span></code></div>
<div class="line"><br/></div>
<div class="line">The parent source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field must be greater than 18.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">["length",</span> <span class="pre">"_P._P._T.description"],</span> <span class="pre">100]</span></code></div>
<div class="line"><br/></div>
<div class="line">The grandparent target entity’s <code class="docutils literal notranslate"><span class="pre">description</span></code> field must have a
length of less than 100 characters.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="r-variable"><td><p><code class="docutils literal notranslate"><span class="pre">_R</span></code></p></td>
<td><p>A dict that contains the source entity and the
target entity of the root context. The root context is the outermost
context, which in practice is the context of the <code class="docutils literal notranslate"><span class="pre">default</span></code> rule. The
dict contains the <code class="docutils literal notranslate"><span class="pre">_S</span></code> and <code class="docutils literal notranslate"><span class="pre">_T</span></code> variables.</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">"_R._S.age",</span> <span class="pre">18]</span></code></div>
<div class="line"><br/></div>
<div class="line">The root source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field must be less than 18.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">["length",</span> <span class="pre">"_R._T.description"],</span> <span class="pre">50]</span></code></div>
<div class="line"><br/></div>
<div class="line">The root target entity’s <code class="docutils literal notranslate"><span class="pre">description</span></code> field must have a
length of less than 50 characters.</div>
</div>
</td>
</tr>
<tr class="row-even" id="underscore-variable"><td><p><code class="docutils literal notranslate"><span class="pre">_</span></code></p></td>
<td><p>Refers to the current entity. This variable is only available
inside a few functions that take a function expression as an
argument. Examples of such functions are <code class="docutils literal notranslate"><span class="pre">filter</span></code>, <code class="docutils literal notranslate"><span class="pre">sorted</span></code>
<code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, and <code class="docutils literal notranslate"><span class="pre">coalesce</span></code>.</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["filter",</span> <span class="pre">["gt",</span> <span class="pre">"_.amount",</span> <span class="pre">100],</span> <span class="pre">"_S.orders"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Filters out the order entities that have an amount of less than
100, i.e. the filter function returns only the orders that have
an amount of greater than 100. As you can see the <code class="docutils literal notranslate"><span class="pre">_</span></code> variable
refers to the individual order entities, one at a time.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="path-expressions-and-hops">
<span id="id2"></span><h2>Path Expressions and Hops<a class="headerlink" href="#path-expressions-and-hops" title="Permalink to this headline">#</a></h2>
<p>There are three ways that one can access properties on entities:</p>
<ol class="arabic">
<li><p><strong>Property path strings</strong>: <code class="docutils literal notranslate"><span class="pre">"_S.orders.amount"</span></code>, which will start
from the given variable, in this case the source entity <code class="docutils literal notranslate"><span class="pre">_S</span></code>, and
then traverse to the <code class="docutils literal notranslate"><span class="pre">orders</span></code> property and then to the <code class="docutils literal notranslate"><span class="pre">amount</span></code>
property. The end result is a list of amounts. Note that property
path strings function can only access property on the entity it
operates on, including nested entities.</p>
<p>One can also refer to the content of the variables themselves,
e.g. <code class="docutils literal notranslate"><span class="pre">"_S."</span></code> would refer to the source entity itself (note the dot
after the variable name). <code class="docutils literal notranslate"><span class="pre">"_T."</span></code> refers to the target entity, and
<code class="docutils literal notranslate"><span class="pre">"_."</span></code> refers to the current value.</p>
<p>You can have periods in path elements if you quote them. Example:
<code class="docutils literal notranslate"><span class="pre">"_S.foo.'john.doe''s'.bar"</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">["list",</span> <span class="pre">"foo",</span> <span class="pre">"john.doe's",</span> <span class="pre">"bar"],</span> <span class="pre">,</span> <span class="pre">"_S."]</span></code>. A quoted path
element must begin and end with a single quote. Single quotes can
be escaped with <code class="docutils literal notranslate"><span class="pre">''</span></code>.</p>
</li>
<li><p><strong>The “path” function</strong>: <code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">"placed_by",</span> <span class="pre">["sorted",</span>
<span class="pre">"_.amount",</span> <span class="pre">"_S.orders"]]</span></code>, which will first evaluate the
rightmost expression. Then it will traverse the path given in the
first argument for each of them and return the end result. The
first argument is an expression that resolve to either a single
string or a list of strings. Note that the <code class="docutils literal notranslate"><span class="pre">path</span></code> function can
only access property on the dictionary/entity it operates on,
including nested ones.</p></li>
<li><p><strong>The “hops” function</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">"hops"</span><span class="p">,</span> <span class="p">{</span>
    <span class="s2">"datasets"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"orders o"</span><span class="p">],</span>
    <span class="s2">"where"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S._id"</span><span class="p">,</span> <span class="s2">"o.cust_id"</span><span class="p">],</span>
      <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"o.type"</span><span class="p">,</span> <span class="s2">"BILLING"</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">hops</span></code> function can be used to perform <a class="reference internal" href="#joins"><span class="std std-ref">joins</span></a> across two or
more datasets, so if you want to navigate beyond the current entity
use <code class="docutils literal notranslate"><span class="pre">hops</span></code>. This particular example will join the source entity
with entities from the <code class="docutils literal notranslate"><span class="pre">orders</span></code> dataset using the <code class="docutils literal notranslate"><span class="pre">["eq",</span>
<span class="pre">"_S._id",</span> <span class="pre">"o.cust_id"]</span></code> join expression and then filter the orders
by <code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"o.type",</span> <span class="pre">"BILLING"]</span></code>. Note that only <code class="docutils literal notranslate"><span class="pre">eq</span></code> functions
will be treated as join expressions. All other function are treated
as filter expressions. For an <code class="docutils literal notranslate"><span class="pre">eq</span></code> to be a join expression it
will have to refer to variables from two different datasets.</p>
</li>
</ol>
</div>
<div class="section" id="how-joins-work">
<span id="joins"></span><h2>How joins work<a class="headerlink" href="#how-joins-work" title="Permalink to this headline">#</a></h2>
<p>Given two entities <code class="docutils literal notranslate"><span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">B</span></code> bound to the dataset aliases <code class="docutils literal notranslate"><span class="pre">a</span></code>
and <code class="docutils literal notranslate"><span class="pre">b</span></code> in the expressions below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"A"</span><span class="p">,</span>
  <span class="s2">"value"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"values"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">"_id"</span><span class="p">:</span> <span class="s2">"B"</span><span class="p">,</span>
  <span class="s2">"value"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"values"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are four different kinds of joins:</p>
<ol class="arabic simple">
<li><p>One-to-one join: <code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"a.value",</span> <span class="pre">"b.value"]</span></code></p></li>
<li><p>One-to-many: <code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"a.value",</span> <span class="pre">"b.values"]</span></code></p></li>
<li><p>Many-to-one: <code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"a.values",</span> <span class="pre">"b.value"]</span></code></p></li>
<li><p>Many-to-many: <code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"a.values",</span> <span class="pre">"b.values"]</span></code></p></li>
</ol>
<p>The rule for joins is very simple: <em>if any of the values overlap,
then the join succeeds</em>.</p>
<p>All of the four joins given above succeed for the two entities because
they all have overlapping values, i.e. the values <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">4</span></code>.</p>
<p>Join expressions that contain functional expressions work the same
way, e.g. <code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">["+",</span> <span class="pre">"a.value",</span> <span class="pre">2],</span> <span class="pre">"b.values"]</span></code> succeeds as <code class="docutils literal notranslate"><span class="pre">3</span></code>
is a value shared by both.</p>
<p>If you need to do joins with composite keys then the <a class="reference internal" href="#tuples-dtl-function"><span class="std std-ref">tuples</span></a> DTL function is useful. Using composite keys is
almost always a better choice than having multiple individual joins as
the former will have better precision.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">null</span></code> values and deleted entities are not indexed, so they are
not traversed by joins.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is only <code class="docutils literal notranslate"><span class="pre">eq</span></code> functions that reference a single dataset alias
in both left and right arguments that are considered join
functions.</p>
<p>There must be exactly one unique dataset alias reference
in each <code class="docutils literal notranslate"><span class="pre">eq</span></code> argument.</p>
</div>
</div>
<div class="section" id="namespaces">
<span id="namespace-aware-functions"></span><h2>Namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">#</a></h2>
<p>The following functions are namespace aware: <a class="reference internal" href="#dtl-transform-add"><span class="std std-ref">add</span></a>, <a class="reference internal" href="#dtl-transform-default"><span class="std std-ref">default</span></a>,
<a class="reference internal" href="#dtl-transform-make-ni"><span class="std std-ref">make-ni</span></a>, <a class="reference internal" href="#dtl-transform-remove"><span class="std std-ref">remove</span></a>, <a class="reference internal" href="#dtl-transform-copy"><span class="std std-ref">copy</span></a>,
<a class="reference internal" href="#dtl-transform-rename"><span class="std std-ref">rename</span></a> and <a class="reference internal" href="#path-dtl-function"><span class="std std-ref">path</span></a>. This means they behave slightly differently when
<a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> is enabled.</p>
<ul class="simple">
<li><p>Function arguments that are of type <code class="docutils literal notranslate"><span class="pre">wildcard-string</span></code> will make
pattern matching aware of the boundary between the namespace and the
identifier parts of namespaced identifiers.</p></li>
<li><p>Function arguments that reference unqualified properties,
i.e. properties with only the identifier part, will in general match
that property in all namespaces.</p></li>
</ul>
<p>See the individual functions for more details.</p>
<div class="section" id="ni-escape-syntax">
<span id="id3"></span><h3>NI escape syntax<a class="headerlink" href="#ni-escape-syntax" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">"foo:bar"</span></code> is an example of a fully qualified namespaced
identifier. <code class="docutils literal notranslate"><span class="pre">"bar"</span></code> is an unqualified one and consists of only the
identifier part.</p>
<p>There exists two special escape prefixes, <code class="docutils literal notranslate"><span class="pre">":"</span></code> and <code class="docutils literal notranslate"><span class="pre">"::"</span></code>.</p>
<ul class="simple">
<li><p>If you want to make sure that the value is to be interpreted as-is
then use the <code class="docutils literal notranslate"><span class="pre">"::"</span></code> prefix, e.g. <code class="docutils literal notranslate"><span class="pre">"::bar"</span></code>. <code class="docutils literal notranslate"><span class="pre">"::foo:bar"</span></code> is
equivalent to <code class="docutils literal notranslate"><span class="pre">"foo:bar"</span></code>.</p></li>
<li><p>If you want the value to be relative to the current namespace,
i.e. identity or property namespace depending on the context, then use
the <code class="docutils literal notranslate"><span class="pre">":"</span></code> prefix, e.g. <code class="docutils literal notranslate"><span class="pre">":bar"</span></code>. If the current property namespace
is <code class="docutils literal notranslate"><span class="pre">"foo"</span></code> then <code class="docutils literal notranslate"><span class="pre">":bar"</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">"foo:bar"</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="argument-types">
<h2>Argument types<a class="headerlink" href="#argument-types" title="Permalink to this headline">#</a></h2>
<p>In the function tables below you’ll see argument lists like this
<code class="docutils literal notranslate"><span class="pre">CONDITION(boolean-expression{1}),</span> <span class="pre">THEN(transforms{1}),</span> <span class="pre">ELSE(transforms{0|1})</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">CONDITION</span></code>, <code class="docutils literal notranslate"><span class="pre">THEN</span></code> and <code class="docutils literal notranslate"><span class="pre">ELSE</span></code> are logical names that have no
meaning other than so that we can refer to them by name. Inside the
parenthesis is the type of argument, i.e. <code class="docutils literal notranslate"><span class="pre">boolean-expression</span></code> and
<code class="docutils literal notranslate"><span class="pre">transforms</span></code>. The numbers inside the curly braces is the cardinality
of the argument. Here are some cardinalites that you’ll come across:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{0|1}</span></code>: zero or one, i.e. optional.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{1}</span></code>: exactly one</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{2}</span></code>: exactly two</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{&gt;=0}</span></code>: zero or more</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{&gt;=1}</span></code>: one or more</p></li>
</ol>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boolean-expression</span></code></p></td>
<td><div class="line-block">
<div class="line">Refers to an expression that returns a single “boolean” value. Note that
<code class="docutils literal notranslate"><span class="pre">false</span></code>, <code class="docutils literal notranslate"><span class="pre">null</span></code> and <code class="docutils literal notranslate"><span class="pre">[]</span></code> evaluate to false. All other values
evaluate to true.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.type",</span> <span class="pre">"person"]</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">integer-expression</span></code></p></td>
<td><div class="line-block">
<div class="line">Refers to an expression that returns a single “integer” value.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["+",</span> <span class="pre">1,</span> <span class="pre">2]</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value-expression</span></code></p></td>
<td><div class="line-block">
<div class="line">Refers to an expression that returns null, a single value or a
list of values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">function-expression</span></code></p></td>
<td><div class="line-block">
<div class="line">Refers to a value expression argument that operates on a list
of values, and exposes the <code class="docutils literal notranslate"><span class="pre">_</span></code> current value variable for
each of them.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["upper",</span> <span class="pre">"_.name"]</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><div class="line-block">
<div class="line">Refers to a constant string literal.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"Jupiter"</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">wildcard-string</span></code></p></td>
<td><div class="line-block">
<div class="line">Refers to a constant string pattern literal that can include
the <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code> wildcard characters.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"alpha_*"</span></code> or <code class="docutils literal notranslate"><span class="pre">"person"</span></code></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">wildcard-string-list</span></code></p></td>
<td><div class="line-block">
<div class="line">Same as <code class="docutils literal notranslate"><span class="pre">wildcard-string</span></code>, but a list of them.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["alpha_*",</span> <span class="pre">"beta_*"]</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">transforms</span></code></p></td>
<td><div class="line-block">
<div class="line">A single transform function, or a list of them.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"type",</span> <span class="pre">"person"]</span></code></div>
<div class="line"><br/></div>
<div class="line">or</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">[["add",</span> <span class="pre">"type",</span> <span class="pre">"person"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span> <span class="pre">["list",</span> <span class="pre">"name",</span> <span class="pre">"age"]]]]</span></code></div>
</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="transforms">
<span id="dtl-transforms"></span><h2>Transforms<a class="headerlink" href="#transforms" title="Permalink to this headline">#</a></h2>
<p>A transform function is a function that has side-effects, typically
modifying the target entity, and has no return value.</p>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="dtl-transform-if">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">if</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">CONDITION(boolean-expression{1}),</div>
<div class="line">THEN(transforms{1}),</div>
<div class="line">ELSE(transforms{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">If CONDITION evaluates to <em>true</em> then apply the transforms in THEN,</div>
<div class="line">otherwise apply the transforms in ELSE.</div>
</div>
<div class="line-block">
<div class="line">Note that the THEN and ELSE arguments can either be a single transform
function or a list of transform functions. The list can be empty.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need to specify multiple transforms then wrap them in a list.</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if",</span> <span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">18],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[["add",</span> <span class="pre">"type",</span> <span class="pre">"adult"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"is_adult",</span> <span class="pre">true]],</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"type",</span> <span class="pre">"child"]]</span></code></div>
</div>
</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if",</span> <span class="pre">["eq",</span> <span class="pre">"_S.type",</span> <span class="pre">"person"],</span> <span class="pre">[</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"type",</span> <span class="pre">"person"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span> <span class="pre">["list",</span> <span class="pre">"name",</span> <span class="pre">"age"]]]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">If the source entity’s <code class="docutils literal notranslate"><span class="pre">type</span></code> field is equal <code class="docutils literal notranslate"><span class="pre">person</span></code> then apply
the <code class="docutils literal notranslate"><span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">copy</span></code> transforms. There is no else clause given,
which is effectively the same as an empty list with no transforms.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if",</span> <span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">18],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"type",</span> <span class="pre">"adult"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"type",</span> <span class="pre">"child"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">If the source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> is greater than 18 then add <code class="docutils literal notranslate"><span class="pre">type</span></code>
field with value <code class="docutils literal notranslate"><span class="pre">adult</span></code>, if not add <code class="docutils literal notranslate"><span class="pre">child</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-case-eq"><td><p><code class="docutils literal notranslate"><span class="pre">case-eq</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(value-expression{1}),</div>
<div class="line">(VALUE_N(value-expression{1},</div>
<div class="line-block">
<div class="line">THEN(transforms{1}))+,</div>
</div>
<div class="line">ELSE(transforms{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Evaluates the first THEN for which VALUE is equal to VALUE_N. If there is no
match, then ELSE is evaluated. If there is no ELSE, then it is a no-op.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need to specify multiple transforms then wrap them in a list.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["case-eq",</span> <span class="pre">"_S.country",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"NO",</span> <span class="pre">["add",</span> <span class="pre">"country",</span> <span class="pre">"Norway"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"SE",</span> <span class="pre">["add",</span> <span class="pre">"country",</span> <span class="pre">"Sweden"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"country",</span> <span class="pre">"Other"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Given then value of <code class="docutils literal notranslate"><span class="pre">_S.country</span></code>, adds <code class="docutils literal notranslate"><span class="pre">{"country":</span> <span class="pre">"Norway"}</span></code> if the value is <code class="docutils literal notranslate"><span class="pre">"NO"</span></code>
and <code class="docutils literal notranslate"><span class="pre">{"country":</span> <span class="pre">"Sweden"}</span></code> if the value is <code class="docutils literal notranslate"><span class="pre">"SE"</span></code>, otherwise <code class="docutils literal notranslate"><span class="pre">{"country":</span> <span class="pre">"Other"}</span></code> is added.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["case-eq",</span> <span class="pre">"_S.dialing_code",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">45,</span> <span class="pre">["add",</span> <span class="pre">"country_code",</span> <span class="pre">"DK"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">46,</span> <span class="pre">["add",</span> <span class="pre">"country_code",</span> <span class="pre">"SE"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">47,</span> <span class="pre">["add",</span> <span class="pre">"country_code",</span> <span class="pre">"NO"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Given the value of <code class="docutils literal notranslate"><span class="pre">_S.dialing_code</span></code>, adds <code class="docutils literal notranslate"><span class="pre">{"country":</span> <span class="pre">"DK"}</span></code> if the value is
<code class="docutils literal notranslate"><span class="pre">45</span></code> and <code class="docutils literal notranslate"><span class="pre">{"country":</span> <span class="pre">"SE"}</span></code> if the value  is <code class="docutils literal notranslate"><span class="pre">46</span></code> and <code class="docutils literal notranslate"><span class="pre">{"country":</span> <span class="pre">"NO"}</span></code> if the value is <code class="docutils literal notranslate"><span class="pre">47</span></code>,
otherwise it is a no-op.</div>
</div>
</td>
</tr>
<tr class="row-even" id="dtl-transform-case"><td><p><code class="docutils literal notranslate"><span class="pre">case</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">(VALUE(value-expression{1},</div>
<div class="line-block">
<div class="line">THEN(transforms{1}))+,</div>
</div>
<div class="line">ELSE(transforms{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Evaluates the first THEN for which VALUE is true. If there is no
match, then ELSE is evaluated. If there is no ELSE, then it is a no-op.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need to specify multiple transforms then wrap them in a list.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["case",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gte",</span> <span class="pre">"_S.age",</span> <span class="pre">18],</span> <span class="pre">["add",</span> <span class="pre">"group",</span> <span class="pre">"adult"]],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gte",</span> <span class="pre">"_S.age",</span> <span class="pre">13],</span> <span class="pre">["add",</span> <span class="pre">"group",</span> <span class="pre">"teenager"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gte",</span> <span class="pre">"_S.age",</span> <span class="pre">2],</span> <span class="pre">["add",</span> <span class="pre">"group",</span> <span class="pre">"toddler"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">"_S.age",</span> <span class="pre">2],</span> <span class="pre">["add",</span> <span class="pre">"group",</span> <span class="pre">"baby"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"group",</span> <span class="pre">"unknown"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Adds <code class="docutils literal notranslate"><span class="pre">{"group":</span> <span class="pre">"adult"}</span></code> if the value of <code class="docutils literal notranslate"><span class="pre">_S.age</span></code> is greater than or equal to <code class="docutils literal notranslate"><span class="pre">18</span></code>,</div>
<div class="line">or <code class="docutils literal notranslate"><span class="pre">{"group":</span> <span class="pre">"teenager"}</span></code> if the value of <code class="docutils literal notranslate"><span class="pre">_S.age</span></code> is greater than or equal to <code class="docutils literal notranslate"><span class="pre">13</span></code>,</div>
<div class="line">or <code class="docutils literal notranslate"><span class="pre">{"group":</span> <span class="pre">"toddler"}</span></code> if the value of <code class="docutils literal notranslate"><span class="pre">_S.age</span></code> is less than <code class="docutils literal notranslate"><span class="pre">2</span></code>,</div>
<div class="line">otherwise <code class="docutils literal notranslate"><span class="pre">{"group":</span> <span class="pre">"unknown"}</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-comment"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">COMMENTS(value-expression{&gt;=0})</div>
<div class="line"><br/></div>
</div>
<div class="line">A transform that does nothing except hold comments. Useful for
documenting the transforms, or just disabling transforms inside. Any
expressions inside the comment will not be evaluated.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["comment",</span> <span class="pre">"This</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">comment"]</span></code></div>
<div class="line"><br/></div>
<div class="line">A single line comment.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["comment",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"First</span> <span class="pre">line",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"Second</span> <span class="pre">line",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"Third</span> <span class="pre">line"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">A comment that spans multiple lines.</div>
</div>
</td>
</tr>
<tr class="row-even" id="dtl-transform-filter"><td><p><code class="docutils literal notranslate"><span class="pre">filter</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">UNLESS_CONDITION(boolean-expression{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">If the evaluation of the UNLESS_CONDITION expression returns false, then stop
applying transformations. In this case <em>no</em> target entity is emitted
for the source entity. Note that any entities already emitted by
<code class="docutils literal notranslate"><span class="pre">create</span></code> will not be stopped. If you want then make sure that you don’t
create them before the <code class="docutils literal notranslate"><span class="pre">filter</span></code>.</div>
<div class="line"><br/></div>
<div class="line">If the UNLESS_CONDITION argument is not given then the filter evaluates to
false.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If used with a <code class="docutils literal notranslate"><span class="pre">dataset</span></code> sink then the <code class="docutils literal notranslate"><span class="pre">filter</span></code> function
will set the <code class="docutils literal notranslate"><span class="pre">_filtered</span></code> property to <code class="docutils literal notranslate"><span class="pre">true</span></code> and emit the
entity.</p>
<p>The reason for this is so that the <code class="docutils literal notranslate"><span class="pre">dataset</span></code> sink can
detect deleted entities even on incremental syncs, not just
on full syncs. Entities with the <code class="docutils literal notranslate"><span class="pre">_filtered</span></code> property set to
<code class="docutils literal notranslate"><span class="pre">true</span></code> will thus be deleted from the dataset if the entity
already exists and it is not already deleted.</p>
<p>The rationale for this behaviour is so that entities that
have previous versions get deleted in the resulting dataset
when they no longer pass the filter.</p>
<p>If you have more than one transform then you may want to be
careful about how you process <code class="docutils literal notranslate"><span class="pre">_filtered</span></code> entities in
subsequent transforms.</p>
<p>If you would like to control how deletions happen, then you
should not use the <code class="docutils literal notranslate"><span class="pre">filter</span></code> function, but instead set the
<code class="docutils literal notranslate"><span class="pre">_deleted</span></code> property.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["filter",</span> <span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">42]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Continue processing only if the source entity’s age is greater than 42.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["filter",</span> <span class="pre">["eq",</span> <span class="pre">"_S.type",</span> <span class="pre">"person"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Continue processing only if the source entity’s type is <code class="docutils literal notranslate"><span class="pre">person</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["filter"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Stop processing.</div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-discard"><td><p><code class="docutils literal notranslate"><span class="pre">discard</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">UNLESS_CONDITION(boolean-expression{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">This transform is almost identical to <code class="docutils literal notranslate"><span class="pre">filter</span></code>, but will drop the target
entity on the floor. Use it with care as the discarded entity will not be
deleted in the sink.</div>
<div class="line"><br/></div>
<div class="line">If the evaluation of the UNLESS_CONDITION expression returns false, then stop
applying transformations. In this case <em>no</em> target entity is emitted
for the source entity. Note that any entities already emitted by
<code class="docutils literal notranslate"><span class="pre">create</span></code> will not be stopped. If you want then make sure that you don’t
create them before the <code class="docutils literal notranslate"><span class="pre">discard</span></code>.</div>
<div class="line"><br/></div>
<div class="line">If the UNLESS_CONDITION argument is not given then the target entity will be discarded.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only use this transform when you know that you’ve never sent an entity
with the same <code class="docutils literal notranslate"><span class="pre">_id</span></code> to the sink before. The reason is that that the entity will
then not be deleted in the sink. If you want it to be deleted then use the
<code class="docutils literal notranslate"><span class="pre">filter</span></code> transform instead.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["discard",</span> <span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">42]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Discard the target entity unless the source entity’s age is greater than 42.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["discard",</span> <span class="pre">["eq",</span> <span class="pre">"_S.type",</span> <span class="pre">"person"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Discard the target entity unless the source entity’s type is <code class="docutils literal notranslate"><span class="pre">person</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["discard"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Discard the target entity unconditionally.</div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-even" id="dtl-transform-add"><td><p><code class="docutils literal notranslate"><span class="pre">add</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PROPERTY(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Adds the PROPERTY field(s) to the target entity with the values returned
by evaluating the VALUES expression.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transform function is <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> aware.</p>
<p>If namespaced identifiers are enabled,
then the property will be prefixed by the current
namespace. If the property is <code class="docutils literal notranslate"><span class="pre">_id</span></code> then the string values
will be prefixed by the identity namespace. All other
properties will have their name prefixed by the property
namespace.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Adds the <code class="docutils literal notranslate"><span class="pre">age</span></code> property with the value 26 to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"upper_name",</span> <span class="pre">["upper",</span> <span class="pre">"_S.name"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Adds the <code class="docutils literal notranslate"><span class="pre">upper_name</span></code> property to the target entity. The value is
the uppercased version of the source entity’s <code class="docutils literal notranslate"><span class="pre">name</span></code> property.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"x-",</span> <span class="pre">"_S.key"],</span> <span class="pre">"_S.value"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Adds the property returned by the <code class="docutils literal notranslate"><span class="pre">concat</span></code> function and assigns it the
value returned by <code class="docutils literal notranslate"><span class="pre">_S.value</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><strong>With namespaced identifiers enabled:</strong></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaced_identifiers":</span> <span class="pre">true,</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaces":</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"identity":</span> <span class="pre">"foo",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"property":</span> <span class="pre">"bar"</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
<div class="line"><em>Source entity:</em> <code class="docutils literal notranslate"><span class="pre">{}</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"bar:age":</span> <span class="pre">26}</span></code>. Adds the <code class="docutils literal notranslate"><span class="pre">bar:age</span></code> property with the value
26 to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"person:age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"person:age":</span> <span class="pre">26}</span></code>. Adds the <code class="docutils literal notranslate"><span class="pre">person:age</span></code> property with the
value 26 to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"::age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">26}</span></code>. Adds the <code class="docutils literal notranslate"><span class="pre">age</span></code> property with the value 26 to
the target entity. Note
that if the PROPERTY arguments starts with <code class="docutils literal notranslate"><span class="pre">::</span></code> it will be interpreted
to mean add what ever is after the double colons. See
<a class="reference internal" href="#ni-escape-syntax"><span class="std std-ref">NI escape syntax</span></a> for more details.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">":age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"bar:age":</span> <span class="pre">26}</span></code>. Adds the <code class="docutils literal notranslate"><span class="pre">bar:age</span></code> property with the value
26 to the target entity.
Note that this example uses the <a class="reference internal" href="#ni-escape-syntax"><span class="std std-ref">NI escape syntax</span></a>
to reference the current namespace.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-default"><td><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PROPERTY(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Adds the PROPERTY field(s) to the target entity with the values returned
by evaluating the VALUES expression, unless the property already exists.
<code class="docutils literal notranslate"><span class="pre">default</span></code> behaves exactly like <code class="docutils literal notranslate"><span class="pre">add</span></code>, except that it does not add
the property if the property already exists on the target entity. If
the property exists it does nothing.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transform function is <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> aware.</p>
<p>If namespaced identifiers are enabled,
then the property will be prefixed by the current
namespace. If the property is <code class="docutils literal notranslate"><span class="pre">_id</span></code> then the string values
will be prefixed by the identity namespace. All other
properties will have their name prefixed by the property
namespace.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["default",</span> <span class="pre">"age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Adds the <code class="docutils literal notranslate"><span class="pre">age</span></code> property with the value 26 to the target entity, if
the property does not exists.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["default",</span> <span class="pre">"upper_name",</span> <span class="pre">["upper",</span> <span class="pre">"_S.name"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Adds the <code class="docutils literal notranslate"><span class="pre">upper_name</span></code> property to the target entity, if
the property does not exists.. The value is
the uppercased version of the source entity’s <code class="docutils literal notranslate"><span class="pre">name</span></code> property.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["default",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"x-",</span> <span class="pre">"_S.key"],</span> <span class="pre">"_S.value"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Adds the property returned by the <code class="docutils literal notranslate"><span class="pre">concat</span></code> function and assigns it the
value returned by <code class="docutils literal notranslate"><span class="pre">_S.value</span></code>, if the property does not exists..</div>
<div class="line"><br/></div>
<div class="line"><strong>With namespaced identifiers enabled:</strong></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaced_identifiers":</span> <span class="pre">true,</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaces":</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"identity":</span> <span class="pre">"foo",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"property":</span> <span class="pre">"bar"</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
<div class="line"><em>Source entity:</em> <code class="docutils literal notranslate"><span class="pre">{}</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["default",</span> <span class="pre">"age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"bar:age":</span> <span class="pre">26}</span></code>. If the target entity does not already have
the <code class="docutils literal notranslate"><span class="pre">bar:age</span></code> property, then
the <code class="docutils literal notranslate"><span class="pre">bar:age</span></code> property with the value 26 is added to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["default",</span> <span class="pre">"person:age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"person:age":</span> <span class="pre">26}</span></code>. If the target entity does not already have
the <code class="docutils literal notranslate"><span class="pre">person:age</span></code> property, then
the <code class="docutils literal notranslate"><span class="pre">person:age</span></code> property with the value 26 is added to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["default",</span> <span class="pre">"::age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">26}</span></code>. If the target entity does not already have the
<code class="docutils literal notranslate"><span class="pre">age</span></code> property, then</div>
<div class="line">the <code class="docutils literal notranslate"><span class="pre">age</span></code> property with the value 26 is added to the target entity. Note
that if the PROPERTY arguments starts with <code class="docutils literal notranslate"><span class="pre">::</span></code> it will be interpreted
to mean add what ever is after the double colons. See
<a class="reference internal" href="#ni-escape-syntax"><span class="std std-ref">NI escape syntax</span></a> for more details.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["default",</span> <span class="pre">":age",</span> <span class="pre">26]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"bar:age":</span> <span class="pre">26}</span></code>. If the target entity does not already have the
<code class="docutils literal notranslate"><span class="pre">bar:age</span></code> property, then
the <code class="docutils literal notranslate"><span class="pre">bar:age</span></code> property with the value 26 is added to the target entity.
Note that this example uses the <a class="reference internal" href="#ni-escape-syntax"><span class="std std-ref">NI escape syntax</span></a>
to reference the current namespace.</div>
</div>
</td>
</tr>
<tr class="row-even" id="dtl-transform-make-ni"><td><p><code class="docutils literal notranslate"><span class="pre">make-ni</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">NAMESPACE(string{1})</div>
<div class="line">FROM_PROPERTY(string{1})</div>
<div class="line">TO_PROPERTY(string{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Adds the FROM_PROPERTY field to the target entity’s TO_PROPERTY with
string values made into namespaced identifiers in the NAMESPACE namespace.
If none of the values can be made into namespaced identifiers then nothing is added. If
TO_PROPERTY is omitted then it defaults to FROM_PROPERTY + <code class="docutils literal notranslate"><span class="pre">-ni</span></code>.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transform function is <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> aware.</p>
<p>If namespaced identifiers are enabled,
then the property will be prefixed by the current
namespace. If the property is <code class="docutils literal notranslate"><span class="pre">_id</span></code> then the string values
will be prefixed by the identity namespace. All other
properties will have their name prefixed by the property
namespace.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["make-ni",</span> <span class="pre">"soccer",</span> <span class="pre">"referee",</span> <span class="pre">"ref"]</span></code></div>
<div class="line"><br/></div>
<div class="line">If the source entity has <code class="docutils literal notranslate"><span class="pre">{"referee":</span> <span class="pre">"john.doe"}</span></code> then adds the <code class="docutils literal notranslate"><span class="pre">ref</span></code>
property with the value <code class="docutils literal notranslate"><span class="pre">~:soccer:john.doe</span></code> to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["make-ni",</span> <span class="pre">"hockey",</span> <span class="pre">"players"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Adds the <code class="docutils literal notranslate"><span class="pre">players-ni</span></code> property to the target entity, if
any namespaced identifiers were created.</div>
<div class="line"><br/></div>
<div class="line"><strong>With namespaced identifiers enabled:</strong></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaced_identifiers":</span> <span class="pre">true,</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaces":</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"identity":</span> <span class="pre">"foo",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"property":</span> <span class="pre">"bar"</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
<div class="line"><em>Source entity:</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"referee":</span> <span class="pre">"john.doe",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:referee":</span> <span class="pre">"john.c.doe"}</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["make-ni",</span> <span class="pre">"soccer",</span> <span class="pre">"referee"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"referee-ni":</span> <span class="pre">"~:soccer:john.doe"</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:referee-ni":</span> <span class="pre">"~:soccer:john.c.doe"</span> <span class="pre">}</span></code>.</div>
</div>
<div class="line">Copies all <code class="docutils literal notranslate"><span class="pre">referee</span></code> properties in all namespaces from the source entity
to the target entity. Note that the target properties are suffixed by <code class="docutils literal notranslate"><span class="pre">-ni</span></code>.
The values are converted into
NIs by adding the <code class="docutils literal notranslate"><span class="pre">soccer</span></code> namespace. Any non-string values are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["make-ni",</span> <span class="pre">"soccer",</span> <span class="pre">"referee",</span> <span class="pre">"ref"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"ref":</span> <span class="pre">"~:soccer:john.doe"</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:ref":</span> <span class="pre">"~:soccer:john.c.doe"</span> <span class="pre">}</span></code>.</div>
</div>
<div class="line">Copies all <code class="docutils literal notranslate"><span class="pre">referee</span></code> properties in all namespaces from the source entity
to the target entity. Note that the target properties are <em>not</em> suffixed by
<code class="docutils literal notranslate"><span class="pre">-ni</span></code>. The properties keep their namespaces, but the identifier
part is replaced by <code class="docutils literal notranslate"><span class="pre">ref</span></code>. The values are converted into
NIs by adding the <code class="docutils literal notranslate"><span class="pre">soccer</span></code> namespace. Any non-string values are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["make-ni",</span> <span class="pre">"soccer",</span> <span class="pre">"x:referee"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"x:referee-ni":</span> <span class="pre">"~:soccer:john.c.doe"</span> <span class="pre">}</span></code>.</div>
<div class="line">Copies the <code class="docutils literal notranslate"><span class="pre">x:referee</span></code> property as <code class="docutils literal notranslate"><span class="pre">x:referee-ni</span></code> from the source entity
to the target entity. The values are converted into
NIs by adding the <code class="docutils literal notranslate"><span class="pre">soccer</span></code> namespace. Any non-string values are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["make-ni",</span> <span class="pre">"soccer",</span> <span class="pre">"x:referee",</span> <span class="pre">"ref"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"x:ref":</span> <span class="pre">"~:soccer:john.c.doe"</span> <span class="pre">}</span></code>.</div>
<div class="line">Copies the <code class="docutils literal notranslate"><span class="pre">x:referee</span></code> property as <code class="docutils literal notranslate"><span class="pre">x:ref</span></code> from the source entity
to the target entity. The values are converted into
NIs by adding the <code class="docutils literal notranslate"><span class="pre">soccer</span></code> namespace. Any non-string values are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["make-ni",</span> <span class="pre">"soccer",</span> <span class="pre">"x:referee",</span> <span class="pre">"y:ref"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"y:ref":</span> <span class="pre">"~:soccer:john.c.doe"</span> <span class="pre">}</span></code>.</div>
<div class="line">Copies the <code class="docutils literal notranslate"><span class="pre">x:referee</span></code> property as <code class="docutils literal notranslate"><span class="pre">y:ref</span></code> from the source entity
to the target entity. The values are converted into
NIs by adding the <code class="docutils literal notranslate"><span class="pre">soccer</span></code> namespace. Any non-string values are ignored.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-remove"><td><p><code class="docutils literal notranslate"><span class="pre">remove</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PROPERTY(wildcard-string{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Removes the PROPERTY field from the target entity. The PROPERTY can
be pattern with <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code> characters in it. The pattern must match
the full property names.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transform function is <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> aware.</p>
<p>The pattern in PROPERTY is namespace aware, so the last colon in the pattern
is considered to be the separator between the namespace and the identifier.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["remove",</span> <span class="pre">"age"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Removes the <code class="docutils literal notranslate"><span class="pre">age</span></code> property from the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["remove",</span> <span class="pre">"temp_*"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Removes all properties matching the <code class="docutils literal notranslate"><span class="pre">temp_*</span></code> wildcard pattern from
the target entity.</div>
<div class="line"><br/></div>
<div class="line"><strong>With namespaced identifiers enabled:</strong></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaced_identifiers":</span> <span class="pre">true,</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaces":</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"identity":</span> <span class="pre">"foo",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"property":</span> <span class="pre">"bar"</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
<div class="line"><em>Target entity:</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">36,</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:age":</span> <span class="pre">36}</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"y:age":</span> <span class="pre">36}</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["remove",</span> <span class="pre">"age"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</div>
<div class="line">Removes the <code class="docutils literal notranslate"><span class="pre">age</span></code> property in all namespaces from the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["remove",</span> <span class="pre">"x*:age"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">36,</span> <span class="pre">"y:age":</span> <span class="pre">36}</span></code>.</div>
<div class="line">Removes the <code class="docutils literal notranslate"><span class="pre">age</span></code> property in all namespaces starting with <code class="docutils literal notranslate"><span class="pre">x</span></code>
from the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["remove",</span> <span class="pre">"x:age"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">36,</span> <span class="pre">"y:age":</span> <span class="pre">36}</span></code>.</div>
<div class="line">Removes the <code class="docutils literal notranslate"><span class="pre">x:age</span></code> property from the target entity.</div>
</div>
</td>
</tr>
<tr class="row-even" id="dtl-transform-copy"><td><p><code class="docutils literal notranslate"><span class="pre">copy</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">INCLUDE_PROPERTIES(wildcard-string-list{1})</div>
<div class="line">EXCLUDE_PROPERTIES(wildcard-string-list{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Copies properties in INCLUDE_PROPERTIES from the source entity to the
target entity. Any properties matching any of the EXCLUDE_PROPERTIES
patterns are not included. INCLUDE_PROPERTIES and EXCLUDE_PROPERTIES
can be a single string or a list of strings, where the strings are
patterns. <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code> are valid pattern characters.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transform function is <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> aware.</p>
<p>The pattern in PROPERTY is namespace aware, so the last colon in the pattern
is considered to be the separator between the namespace and the identifier.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span> <span class="pre">"age"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Copies the <code class="docutils literal notranslate"><span class="pre">age</span></code> property from the source entity to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span> <span class="pre">"a*",</span> <span class="pre">"ab*"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Copies all properties starting with <code class="docutils literal notranslate"><span class="pre">a</span></code> from the source entity to the
target entity, but not those starting with <code class="docutils literal notranslate"><span class="pre">ab</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"a*",</span> <span class="pre">"b*"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"ab*",</span> <span class="pre">"ba*"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Copies all properties starting with <code class="docutils literal notranslate"><span class="pre">a</span></code> or <code class="docutils literal notranslate"><span class="pre">b</span></code> from the source entity
to the target entity, but not those starting with <code class="docutils literal notranslate"><span class="pre">ab</span></code> or <code class="docutils literal notranslate"><span class="pre">ba</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><strong>With namespaced identifiers enabled:</strong></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaced_identifiers":</span> <span class="pre">true,</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaces":</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"identity":</span> <span class="pre">"foo",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"property":</span> <span class="pre">"bar"</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
<div class="line"><em>Source entity:</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">36,</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:age":</span> <span class="pre">36}</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"xyz:age":</span> <span class="pre">36}</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span> <span class="pre">"age"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"age":</span> <span class="pre">36.</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:age":</span> <span class="pre">36,</span></code>.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"xyz:age":</span> <span class="pre">36}</span></code>.</div>
</div>
<div class="line">Copies the <code class="docutils literal notranslate"><span class="pre">age</span></code> property in all namespaces to the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["copy",</span> <span class="pre">"x*:*e",</span> <span class="pre">"*y*:*e"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result: <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"x:age":</span> <span class="pre">36</span> <span class="pre">}</span></code>.</div>
<div class="line">Copies the properties ending with <code class="docutils literal notranslate"><span class="pre">e</span></code> in all namespaces starting with <code class="docutils literal notranslate"><span class="pre">x</span></code>,
except those in a namespace that contains the character <code class="docutils literal notranslate"><span class="pre">y</span></code>,
to the target entity.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-rename"><td><p><code class="docutils literal notranslate"><span class="pre">rename</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PROPERTY1(string{1})</div>
<div class="line">PROPERTY2(string{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Copies the PROPERTY1 field from the source entity to the PROPERTY2 field
on the target entity. This is effectively a way to copy and rename
properties from the source entity to the target entity. No wildcard
patterns are supported.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transform function is <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> aware.</p>
<p>If namespaced identifiers are enabled,
then the renaming makes sure that any namespaces on the target entity either
keep their original namespaces or all values are collected into a single
property on the target.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rename",</span> <span class="pre">"age",</span> <span class="pre">"current_age"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Copies the <code class="docutils literal notranslate"><span class="pre">age</span></code> field from the source entity and adds it as
<code class="docutils literal notranslate"><span class="pre">current_age</span></code> on the target entity.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rename",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"in-",</span> <span class="pre">"_S.key"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"out-",</span> <span class="pre">"_S.key"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Copies the value of the property returned by the first <code class="docutils literal notranslate"><span class="pre">concat</span></code> function
and assigns it to the property returned by the second <code class="docutils literal notranslate"><span class="pre">concat</span></code> function.</div>
<div class="line"><br/></div>
<div class="line"><strong>With namespaced identifiers enabled:</strong></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaced_identifiers":</span> <span class="pre">true,</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaces":</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"identity":</span> <span class="pre">"foo",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"property":</span> <span class="pre">"bar"</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
<div class="line"><em>Source entity:</em></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"a":</span> <span class="pre">1,</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:a":</span> <span class="pre">2}</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"xyz:a":</span> <span class="pre">3}</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rename",</span> <span class="pre">"a",</span> <span class="pre">"b"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">"b":</span> <span class="pre">1.</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"x:b":</span> <span class="pre">2,</span></code>.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"xyz:b":</span> <span class="pre">3}</span></code>.</div>
</div>
<div class="line">Renames the <code class="docutils literal notranslate"><span class="pre">a</span></code> property in all namespaces to <code class="docutils literal notranslate"><span class="pre">b</span></code> in the same namespace.
In practice this renames the identifier part of the namespaced identifiers
from <code class="docutils literal notranslate"><span class="pre">a</span></code> to <code class="docutils literal notranslate"><span class="pre">b</span></code>. If PROPERTY2 only contains the identifier part of
namespaced identifier, then the identifier part of PROPERTY1 will be renamed to this.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rename",</span> <span class="pre">"a",</span> <span class="pre">"z:b"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"z:b":</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]}</span></code>.</div>
<div class="line">Collects all the values in the <code class="docutils literal notranslate"><span class="pre">a</span></code> property in all namespaces into
the <code class="docutils literal notranslate"><span class="pre">z:b</span></code> property. If PROPERTY2 contains a fully qualified namespaced
identifier then all values in PROPERTY1 will be collected into this property.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rename",</span> <span class="pre">"x:a",</span> <span class="pre">"x:b"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Result:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"x:b":</span> <span class="pre">2}</span></code>.</div>
<div class="line">Renames the <code class="docutils literal notranslate"><span class="pre">x:a</span></code> property to <code class="docutils literal notranslate"><span class="pre">x:b</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="dtl-transform-merge"><td><p><code class="docutils literal notranslate"><span class="pre">merge</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">For each entity in VALUES copy all the properties of the value onto the
target entity. If the property already exists, it will be overwritten. This means that
properties from later value entities win over earlier  ones.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["merge",</span> <span class="pre">"_S.orders"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Copies the properties of the entities in <code class="docutils literal notranslate"><span class="pre">_S.orders</span></code> to the target.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["merge",</span> <span class="pre">["list",</span> <span class="pre">{"a":</span> <span class="pre">1},</span> <span class="pre">{"a":</span> <span class="pre">2,</span> <span class="pre">"b":</span> <span class="pre">3}]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Add the properties <code class="docutils literal notranslate"><span class="pre">a=2</span></code> and <code class="docutils literal notranslate"><span class="pre">b=3</span></code> to the target entity. Note that
<code class="docutils literal notranslate"><span class="pre">a=1</span></code> is not added because it gets overwritten with <code class="docutils literal notranslate"><span class="pre">a=2</span></code> later.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-merge-union"><td><p><code class="docutils literal notranslate"><span class="pre">merge-union</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">For each entity in VALUES copy all the properties of the value onto the
target entity. If the property already exists on the target entity, add
the new values as a list of values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["merge-union",</span> <span class="pre">"_S.orders"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Copies the properties of the entities in <code class="docutils literal notranslate"><span class="pre">_S.orders</span></code> to the target.
Merge the property values if the property already exists.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["merge-union",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"a":</span> <span class="pre">1},</span> <span class="pre">{"a":</span> <span class="pre">2,</span> <span class="pre">"b":</span> <span class="pre">3}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Add the properties <code class="docutils literal notranslate"><span class="pre">a=[1,</span> <span class="pre">2]</span></code> and <code class="docutils literal notranslate"><span class="pre">b=3</span></code> to the target entity.</div>
</div>
</td>
</tr>
<tr class="row-even" id="dtl-transform-create"><td><p><code class="docutils literal notranslate"><span class="pre">create</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">For each entity in VALUES emit them as new entities to the DTLs output
pipeline.</div>
</div>
<div class="line-block">
<div class="line">Note that these new entities <em>must</em> have an <code class="docutils literal notranslate"><span class="pre">_id</span></code> string property.
Values that are not entities will be ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["create",</span> <span class="pre">"_S.orders"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Emit the orders in the source entity’s <code class="docutils literal notranslate"><span class="pre">orders</span></code> field as new entities.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["create",</span> <span class="pre">["apply",</span> <span class="pre">"order",</span> <span class="pre">"_S.orders"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Emit the orders in the source entity’s <code class="docutils literal notranslate"><span class="pre">orders</span></code> field as new entities,
but apply the <code class="docutils literal notranslate"><span class="pre">order</span></code> transform to them first.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dtl-transform-create-child"><td><p><code class="docutils literal notranslate"><span class="pre">create-child</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">For each entity in VALUES add it to the <code class="docutils literal notranslate"><span class="pre">$children</span></code> property on the
target entity. Note that the entities <em>must</em> have an <code class="docutils literal notranslate"><span class="pre">_id</span></code> string property.
Values that are not entities will be ignored.</div>
<div class="line"><br/></div>
<div class="line">This function is almost equivalent to:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["add",</span> <span class="pre">"$children",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["union",</span> <span class="pre">"_T.$children",</span> <span class="pre">...]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Note that the <code class="docutils literal notranslate"><span class="pre">$children</span></code> property is special. This function should
really only be used when writing into a <code class="docutils literal notranslate"><span class="pre">dataset</span></code> sink.</div>
<div class="line"><br/></div>
<div class="line">If an entity with a <code class="docutils literal notranslate"><span class="pre">$children</span></code> property is written to the <code class="docutils literal notranslate"><span class="pre">dataset</span></code>
sink then it will compare it against the value of the <code class="docutils literal notranslate"><span class="pre">$children</span></code>
property in the previous version of the entity. It will detect deleted
entities and add them to the property before storing the entity.</div>
<div class="line"><br/></div>
<div class="line">Note also that there is an <a class="reference internal" href="configuration.html#emit-children-transform"><span class="std std-ref">emit_children</span></a>
transform that can be used to expand the <code class="docutils literal notranslate"><span class="pre">$children</span></code> entities into
standalone entities.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["create-child",</span> <span class="pre">"_S.orders"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Adds the orders in the source entity’s <code class="docutils literal notranslate"><span class="pre">orders</span></code> field to the “$children” property
on the target entity.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="expression-language">
<h2>Expression language<a class="headerlink" href="#expression-language" title="Permalink to this headline">#</a></h2>
<p>An expression language function is a function that has no side-effects
and returns a single value or a list of values.</p>
<div class="section" id="boolean-logic">
<h3>Boolean logic<a class="headerlink" href="#boolean-logic" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="and-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">and</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> boolean-expression{&gt;0}</div>
<div class="line"><br/></div>
<div class="line">Takes at least one boolean expression argument.
Returns true only if all arguments evaluate to true.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["and",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">26],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.gender",</span> <span class="pre">"male"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Age must be greater than 26 and the gender must be male.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="or-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">or</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> boolean-expression{&gt;0}</div>
<div class="line"><br/></div>
<div class="line">Takes at least one boolean expression argument.
Returns true if any of the arguments evaluate to true.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["or",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.category",</span> <span class="pre">"A"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.category",</span> <span class="pre">"B"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">The category field must contain “A” or “B”.</div>
</div>
</td>
</tr>
<tr class="row-even" id="not-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">not</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> boolean-expression{&gt;0}</div>
<div class="line"><br/></div>
<div class="line">Takes at least one boolean expression argument.
Returns the inverse boolean value. It behaves like <code class="docutils literal notranslate"><span class="pre">and</span></code>,
but returns the inverse.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["not",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["or",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.category",</span> <span class="pre">"A"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.category",</span> <span class="pre">"B"]]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">The category must contain neither “A” nor “B”.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="all-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">If FUNCTION is specified, then the function is evaluated for each value in
VALUES. Returns true if all arguments evaluate to true.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["all",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns true because all arguments evaluate to true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["all",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">"_.",</span> <span class="pre">2],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns true because all arguments are greater than 2.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["all",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">"_.",</span> <span class="pre">2],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">3,</span> <span class="pre">5]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns false because not all arguments are less than 2.</div>
</div>
</td>
</tr>
<tr class="row-even" id="any-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">any</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">If FUNCTION is specified, then the function is evaluated for each value in
VALUES. Returns true if at least one argument evaluates to true.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["any",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns true because all arguments evaluate to true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["any",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">"_.",</span> <span class="pre">5],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">6,</span> <span class="pre">8]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns true because two of the arguments are greater than 5.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["any",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">"_.",</span> <span class="pre">2],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">6,</span> <span class="pre">7,</span> <span class="pre">8]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns false because none of the arguments are less than 2.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="booleans">
<h3>Booleans<a class="headerlink" href="#booleans" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="boolean-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(default-value-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to booleans. If no default value expression
is given, values that don’t parse as boolean values will be silently
ignored. If not, the evaluated value from the default expression will
be used as a replacement value. String literals are case insensitive,
and the supported values are “true” and “false”.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["boolean",</span> <span class="pre">"false"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one boolean: false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["boolean",</span> <span class="pre">null]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["boolean",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"true",</span> <span class="pre">"~rhttp://www.example.org/",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"True",</span> <span class="pre">false,</span> <span class="pre">1234]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns a list of booleans: [true, true, false]. The URI and integer
values are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["boolean",</span> <span class="pre">["boolean",</span> <span class="pre">false],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"true",</span> <span class="pre">"~rhttp://www.example.org/",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"124.4",</span> <span class="pre">"FALSE"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns a list of booleans: [true, false, false, false]. The URI value
and the string value are replaced with the literal value: false</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["boolean",</span> <span class="pre">["string",</span> <span class="pre">"n/a"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"true",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"124.4"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of booleans: [true, “n/a”, “n/a”]. The URI value and
the string value are replaced with the literal value “n/a”</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["boolean",</span> <span class="pre">["string",</span> <span class="pre">"_."],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"true",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"False"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of booleans: [true, “<a class="reference external" href="http://www.example.org/">http://www.example.org/</a>”, false].
The URI value is replaced with its string cast.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-boolean-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-boolean</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a boolean literal or if
it is a list, that the first element in the list is a boolean</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-boolean",</span> <span class="pre">false]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-boolean",</span> <span class="pre">"True"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-boolean",</span> <span class="pre">["list",</span> <span class="pre">true,</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-boolean",</span> <span class="pre">["list",</span> <span class="pre">"12345",</span> <span class="pre">true]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-boolean",</span> <span class="pre">["list",</span> <span class="pre">["boolean",</span> <span class="pre">"FALSE"],</span> <span class="pre">1234]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="comparisons">
<h3>Comparisons<a class="headerlink" href="#comparisons" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="eq-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">eq</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{2}</div>
<div class="line"><br/></div>
<div class="line">Coerces the values returned from the value expressions into
lists and compares those lists. Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the two
arguments given are equal.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.age",</span> <span class="pre">42]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the source entity’s age field is <code class="docutils literal notranslate"><span class="pre">42</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.hobbies",</span> <span class="pre">["list",</span> <span class="pre">"soccer",</span> <span class="pre">"tennis"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the hobbies are exactly equal to <code class="docutils literal notranslate"><span class="pre">["soccer",</span> <span class="pre">"tennis"]</span></code>.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">eq</span></code> function serves a dual purpose. It can
both be used for <a class="reference internal" href="#joins"><span class="std std-ref">join expressions</span></a> and it can
be used for <a class="reference internal" href="#eq-dtl-function"><span class="std std-ref">equality comparisons</span></a>. These two are different in that a join
uses intersection (similar to the <code class="docutils literal notranslate"><span class="pre">intersects</span></code> function) and
the equality comparison is an exact match. Use the
<a class="reference internal" href="#intersects-dtl-function"><span class="std std-ref">intersects</span></a> function if you
want to check for intersection/overlap instead of an exact
match.</p>
</div>
</td>
</tr>
<tr class="row-odd" id="neq-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">neq</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{2}</div>
<div class="line"><br/></div>
<div class="line">Coerces the values returned from the value expressions into
list and compares those lists. Returns <code class="docutils literal notranslate"><span class="pre">false</span></code> if the two
arguments given are equal.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["neq",</span> <span class="pre">"_S.age",</span> <span class="pre">42]</span></code></div>
<div class="line"><br/></div>
<div class="line">The source entity’s age field must <em>not</em> have the value 42.</div>
</div>
</td>
</tr>
<tr class="row-even" id="gt-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">gt</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{2}</div>
<div class="line"><br/></div>
<div class="line">Compares the <em>first value</em> returned by the two value
expressions. Returns <em>true</em> if the first argument is greater
than the second argument.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">42]</span></code></div>
<div class="line"><br/></div>
<div class="line">The source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field must have a value greater
than 42.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="gte-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">gte</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{2}</div>
<div class="line"><br/></div>
<div class="line">Compares the <em>first value</em> returned by the two value
expressions. Returns <em>true</em> if the first argument is greater
than or equal the second argument.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gte",</span> <span class="pre">"_S.age",</span> <span class="pre">42]</span></code></div>
<div class="line"><br/></div>
<div class="line">The source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field must have a value greater
than or equal 42.</div>
</div>
</td>
</tr>
<tr class="row-even" id="lt-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">lt</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{2}</div>
<div class="line"><br/></div>
<div class="line">Compares the <em>first value</em> returned by the two value
expressions. Returns <em>true</em> if the first argument is less than
the second argument.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">"_S.age",</span> <span class="pre">42]</span></code></div>
<div class="line"><br/></div>
<div class="line">The source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field must have a value less
than 42.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="lte-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">lte</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{2}</div>
<div class="line"><br/></div>
<div class="line">Compares the <em>first value</em> returned by the two value
expressions. Returns <em>true</em> if the first argument is less than
or equal the second argument.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lte",</span> <span class="pre">"_S.age",</span> <span class="pre">42]</span></code></div>
<div class="line"><br/></div>
<div class="line">The source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field must have a value less
than or equal 42.</div>
</div>
</td>
</tr>
<tr class="row-even" id="is-empty-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-empty</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{1}</div>
<div class="line"><br/></div>
<div class="line">Coerces the values returned from the value expressions into
list. Returns <em>true</em> if the number of elements in the first
argument is 0.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-empty",</span> <span class="pre">"_S.hobbies"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true if the source entity’s <code class="docutils literal notranslate"><span class="pre">hobbies</span></code> field is
empty (has no values).</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-not-empty-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-not-empty</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em> value-expression{1}</div>
<div class="line"><br/></div>
<div class="line">Coerces the values returned from the value expressions into
list. Returns <em>true</em> if the number of elements in the first
argument is greater than 0.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-not-empty",</span> <span class="pre">"_S.hobbies"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true if the source entity’s <code class="docutils literal notranslate"><span class="pre">hobbies</span></code> field is not
empty (has one or more values).</div>
</div>
</td>
</tr>
<tr class="row-even" id="is-changed-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-changed</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression{1}),</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns true if the results of evaluating the FUNCTION expression on the current
version and the previous version of the source entity are different.</div>
<div class="line"><br/></div>
<div class="line">If the previous version does not exist then the <code class="docutils literal notranslate"><span class="pre">is-changed</span></code></div>
<div class="line">function returns <code class="docutils literal notranslate"><span class="pre">null</span></code>. This means that we don’t know if it has changed.</div>
<div class="line"><br/></div>
<div class="line">If either the current or the previous version of the entity</div>
<div class="line">has <code class="docutils literal notranslate"><span class="pre">_deleted</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code> then the <code class="docutils literal notranslate"><span class="pre">is-changed</span></code></div>
<div class="line">function returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-changed",</span> <span class="pre">"_.name"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true if the source entity’s <code class="docutils literal notranslate"><span class="pre">name</span></code> property changed.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-changed",</span> <span class="pre">["list",</span> <span class="pre">"_.height",</span> <span class="pre">"_.width"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true if the source entity’s <code class="docutils literal notranslate"><span class="pre">height</span></code> or <code class="docutils literal notranslate"><span class="pre">width</span></code> properties changed.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-changed",</span> <span class="pre">["-",</span> <span class="pre">"_.end",</span> <span class="pre">"_.start"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true if the source entity’s distance between <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> changed.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="conditionals">
<h3>Conditionals<a class="headerlink" href="#conditionals" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="if-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">if</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">CONDITION(boolean-expression{1}),</div>
<div class="line">THEN(value-expression{1}),</div>
<div class="line">ELSE(value-expression{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">If CONDITION evaluates to <em>true</em> then return the result of
evaluating THEN. If CONDITION evaluates to <em>false</em> then return
the result of evaluating ELSE.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if",</span> <span class="pre">["gt",</span> <span class="pre">"_S.age",</span> <span class="pre">42],</span> <span class="pre">1,</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Return 1 if the source entity’s <code class="docutils literal notranslate"><span class="pre">age</span></code> field is greater
than 42, if not 2 is returned.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="case-eq-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">case-eq</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(value-expression{1}),</div>
<div class="line">(VALUE_N(value-expression{1},</div>
<div class="line-block">
<div class="line">THEN(value-expression{1}))+,</div>
</div>
<div class="line">ELSE(value-expression{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the first THEN for which VALUE is equal to VALUE_N. If there is no
match, then ELSE is returned. If there is no ELSE, then <code class="docutils literal notranslate"><span class="pre">null</span></code> is returned.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["case-eq",</span> <span class="pre">"_S.country",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"NO",</span> <span class="pre">"Norway",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"SE",</span> <span class="pre">"Sweden",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"Other"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><br/></div>
</div>
<div class="line">Given then value of <code class="docutils literal notranslate"><span class="pre">_S.country</span></code>, returns <code class="docutils literal notranslate"><span class="pre">"Norway"</span></code> if the value is <code class="docutils literal notranslate"><span class="pre">"NO"</span></code>
and <code class="docutils literal notranslate"><span class="pre">"Sweden"</span></code> if the value is <code class="docutils literal notranslate"><span class="pre">"SE"</span></code>, otherwise <code class="docutils literal notranslate"><span class="pre">"Other"</span></code> is returned.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["case-eq",</span> <span class="pre">"_S.dialing_code",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">45,</span> <span class="pre">"DK",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">46,</span> <span class="pre">"SE",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">47,</span> <span class="pre">"NO"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><br/></div>
</div>
<div class="line">Given the value of <code class="docutils literal notranslate"><span class="pre">_S.dialing_code</span></code>, returns <code class="docutils literal notranslate"><span class="pre">"DK"</span></code> if the value is
<code class="docutils literal notranslate"><span class="pre">45</span></code> and <code class="docutils literal notranslate"><span class="pre">"SE"</span></code> if the value  is <code class="docutils literal notranslate"><span class="pre">46</span></code> and <code class="docutils literal notranslate"><span class="pre">"NO"</span></code> if the value is <code class="docutils literal notranslate"><span class="pre">47</span></code>,
otherwise <code class="docutils literal notranslate"><span class="pre">null</span></code> is returned.</div>
</div>
</td>
</tr>
<tr class="row-even" id="case-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">case</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">(VALUE(value-expression{1},</div>
<div class="line-block">
<div class="line">THEN(value-expression{1}))+,</div>
</div>
<div class="line">ELSE(value-expression{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the first THEN for which VALUE is true. If there is no
match, then ELSE is returned. If there is no ELSE, then <code class="docutils literal notranslate"><span class="pre">null</span></code> is returned.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["case",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gte",</span> <span class="pre">"_S.age",</span> <span class="pre">18],</span> <span class="pre">"adult",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gte",</span> <span class="pre">"_S.age",</span> <span class="pre">13],</span> <span class="pre">"teenager",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gte",</span> <span class="pre">"_S.age",</span> <span class="pre">2],</span> <span class="pre">"toddler",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lt",</span> <span class="pre">"_S.age",</span> <span class="pre">2],</span> <span class="pre">"baby",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"unknown"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"adult"</span></code> if the value of <code class="docutils literal notranslate"><span class="pre">_S.age</span></code> is greater than or equal to <code class="docutils literal notranslate"><span class="pre">18</span></code>,</div>
<div class="line">or <code class="docutils literal notranslate"><span class="pre">"teenager"</span></code> if the value of <code class="docutils literal notranslate"><span class="pre">_S.age</span></code> is greater than or equal to <code class="docutils literal notranslate"><span class="pre">13</span></code>,</div>
<div class="line">or <code class="docutils literal notranslate"><span class="pre">"toddler"</span></code> if the value of <code class="docutils literal notranslate"><span class="pre">_S.age</span></code> is less than <code class="docutils literal notranslate"><span class="pre">2</span></code>,</div>
<div class="line">otherwise <code class="docutils literal notranslate"><span class="pre">"unknown"</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="nulls">
<span id="id4"></span><h3>Nulls<a class="headerlink" href="#nulls" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="is-null-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is-null</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if value is either <code class="docutils literal notranslate"><span class="pre">null</span></code>, an
empty list, or a list where the first element in the list is <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-null",</span> <span class="pre">null]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-null",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-null",</span> <span class="pre">["list"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-null",</span> <span class="pre">["list",</span> <span class="pre">null]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-null",</span> <span class="pre">["list",</span> <span class="pre">null,</span> <span class="pre">123]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>. Note that the function only looks at the first value
in the list.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-null",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-not-null-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-not-null</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns <code class="docutils literal notranslate"><span class="pre">false</span></code> if value is either <code class="docutils literal notranslate"><span class="pre">null</span></code>, an
empty list, or a list where the first element in the list is <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-not-null",</span> <span class="pre">null]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-not-null",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-not-null",</span> <span class="pre">["list"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-not-null",</span> <span class="pre">["list",</span> <span class="pre">null]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-not-null",</span> <span class="pre">["list",</span> <span class="pre">null,</span> <span class="pre">123]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>. Note that the function only looks at the first value
in the list.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-not-null",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="if-null-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">if-null</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(value-expression{1})</div>
<div class="line">FALLBACK-VALUE(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">If <code class="docutils literal notranslate"><span class="pre">is-null</span></code> is false for VALUE then VALUE is returned, otherwise
FALLBACK-VALUE is returned.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if-null",</span> <span class="pre">null,</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if-null",</span> <span class="pre">1,</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">1</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if-null",</span> <span class="pre">["list",</span> <span class="pre">null],</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if-null",</span> <span class="pre">["list",</span> <span class="pre">null,</span> <span class="pre">123],</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if-null",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"12345"],</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">"12345"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="coalesce-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">coalesce</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression{0|1}),</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the first value in VALUES that makes the FUNCTION expression
return a trueish value. The FUNCTION expression argument is optional,
so if it is not given the first non-null value in VALUES is returned.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["coalesce",</span> <span class="pre">"_S.tags"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the first value in the source entity’s <code class="docutils literal notranslate"><span class="pre">tags</span></code>
field that is not null.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["coalesce",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["gt",</span> <span class="pre">"_.expenses",</span> <span class="pre">1000],</span> <span class="pre">"_S.hobbies"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the first hobby that has expenses greater than 1000.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="numbers">
<h3>Numbers<a class="headerlink" href="#numbers" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="integer-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(default-value-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to integers. If no default value expression
is given, values that don’t parse as integers will be silently ignored.
If not, the evaluated value from the default expression will be used
as a replacement value.</div>
<div class="line"><br/></div>
<div class="line">Values that starts with <code class="docutils literal notranslate"><span class="pre">"0x"</span></code> are parsed as hexadecimal values in two’s complement
format.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["integer",</span> <span class="pre">"1"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one integer: 1.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["integer",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">124.4,</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of integers: [1, 124, 12345]. The URI value is ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["integer",</span> <span class="pre">["integer",</span> <span class="pre">0],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"10^2",</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of integers: [1, 0, 0, 12345]. The URI value and the
string value are replaced with the literal value 0</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["integer",</span> <span class="pre">["string",</span> <span class="pre">"n/a"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"10^2",</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of integers: [1, “n/a”, “n/a”, 12345]. The URI value
and the string value are replaced with the literal value “n/a”</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["integer",</span> <span class="pre">["string",</span> <span class="pre">"_."],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"10^2",</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of integers: [1, “<a class="reference external" href="http://www.example.org/">http://www.example.org/</a>”, “10^2”, 12345].
The URI value and the non-integer string value are replaced with the
their respective string casts.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["integer",</span> <span class="pre">"0x00ff"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one integer: 255.</div>
<div class="line"><br/></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["integer",</span> <span class="pre">"0xff"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one integer: -1.</div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-integer-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-integer</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is an integer literal or
if it is a list, that the first element in the list is an integer</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-integer",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-integer",</span> <span class="pre">"1"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-integer",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-integer",</span> <span class="pre">["list",</span> <span class="pre">"1",</span> <span class="pre">2]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-integer",</span> <span class="pre">["list",</span> <span class="pre">["integer",</span> <span class="pre">"1"],</span> <span class="pre">2]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="decimal-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">decimal</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(default-value-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to decimals (a fractional number with
unlimited precision). If no default value expression is given,
values that don’t parse as decimal values will be silently ignored.
If not, the evaluated value from the default expression will be
used as a replacement value.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decimal",</span> <span class="pre">"1.0"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one decimal value: 1.0</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decimal",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">2.2,</span> <span class="pre">"one"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of decimal values: [1.0, 2.2]. The URI and
non-decimal string value are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decimal",</span> <span class="pre">["boolean",</span> <span class="pre">false],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.1,</span> <span class="pre">"~rhttp://www.example.org/",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"124.4",</span> <span class="pre">"FALSE"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns [1.0, 2.1, false, 124.4, false]. The URI value and the
non-decimal string value are replaced with the literal value: false</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decimal",</span> <span class="pre">["string",</span> <span class="pre">"n/a"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.0,</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"124.4"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns [1.0, 2.0, “n/a”, 124.4]. The URI value is replaced with the</div>
<div class="line">literal value “n/a”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decimal",</span> <span class="pre">["string",</span> <span class="pre">"_."],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.0,</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"2.5"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns [1.0, 2.0, “<a class="reference external" href="http://www.example.org/">http://www.example.org/</a>”, 2.5]. The URI value
is replaced with its string cast.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-decimal-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-decimal</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a decimal literal or
if it is a list, that the first element in the list is a decimal</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-decimal",</span> <span class="pre">1.0]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false (it is a float literal).</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-decimal",</span> <span class="pre">["decimal",</span> <span class="pre">"1.23"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-decimal",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-decimal",</span> <span class="pre">["list",</span> <span class="pre">1.0,</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-decimal",</span> <span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.0]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-decimal",</span> <span class="pre">["list",</span> <span class="pre">["decimal",</span> <span class="pre">"-1.0"],</span> <span class="pre">1234]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
</div>
</td>
</tr>
<tr class="row-even" id="float-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(default-value-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to floats (a  IEEE 754 binary 64 format).
if no default value expression is given,
values that don’t parse as float values will be silently ignored.
If not, the evaluated value from the default expression will be
used as a replacement value. Note that if you cast decimals to floats
you can lose precision.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["float",</span> <span class="pre">"1.0"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one float value: 1.0</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["float",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">2.2,</span> <span class="pre">"one"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of float values: [1.0, 2.2]. The URI and
non-numeric string value are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["float",</span> <span class="pre">["boolean",</span> <span class="pre">false],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.1,</span> <span class="pre">"~rhttp://www.example.org/",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"124.4",</span> <span class="pre">"FALSE"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns [1.0, 2.1, false, 124.4, false]. The URI value and the
non-numeric string value are replaced with the literal value: false</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["float",</span> <span class="pre">["string",</span> <span class="pre">"n/a"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.0,</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"124.4"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns [1.0, 2.0, “n/a”, 124.4]. The URI value is replaced with the</div>
<div class="line">literal value “n/a”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["float",</span> <span class="pre">["string",</span> <span class="pre">"_."],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.0,</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"2.5"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns [1.0, 2.0, “<a class="reference external" href="http://www.example.org/">http://www.example.org/</a>”, 2.5]. The URI value
is replaced with its string cast.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-float-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-float</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a float literal or
if it is a list, that the first element in the list is a float value</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-float",</span> <span class="pre">1.0]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-float",</span> <span class="pre">["decimal",</span> <span class="pre">"1.23"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false (it is a decimal literal).</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-float",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-float",</span> <span class="pre">["list",</span> <span class="pre">1.0,</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-float",</span> <span class="pre">["list",</span> <span class="pre">"1.0",</span> <span class="pre">2.0]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-float",</span> <span class="pre">["list",</span> <span class="pre">["decimal",</span> <span class="pre">"-1.0"],</span> <span class="pre">123.4]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
</div>
</td>
</tr>
<tr class="row-even" id="hex-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">hex</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to a string containing an hexadecimal representation of the value
in two’s complement format.</div>
<div class="line">Values that don’t parse as integers will be silently ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["hex",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"0x01"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["hex",</span> <span class="pre">255]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"0x00ff"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["hex",</span> <span class="pre">-1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"0xff"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["hex",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">124.4,</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of strings: [“0x1”, “0x3039”]. The URI value and the float value are ignored.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="date-and-time">
<h3>Date and time<a class="headerlink" href="#date-and-time" title="Permalink to this headline">#</a></h3>
<p>A general note on timezone conversion functions: Sesam relies on tabulated historical data for daylight
saving information for the various timezones. This data gets corrected or supplemented from time to time which means
that the result of an explicit or implicit timezone conversion operation can change over time.</p>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="now-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">now</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">NONE(value-expression{0})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the current time as a datetime value.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["now"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the current time as a datetime value, e.g.
“~t2016-05-13T14:32:00.431Z”.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is non-deterministic and will return a
different value every time it is evaluated. Be aware that if
the pipe is rewound or reset then it will produce a
different output. Dependency tracking will also have a
similar effect as to produce a different value when entities
are reprocessed.</p>
<p><em>Use this function with care and make sure
that you are aware of the consequences of reprocessing
entities.</em></p>
</div>
</td>
</tr>
<tr class="row-odd" id="datetime-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">datetime</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(default-value-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to datetime values. If no default value
expression is given, values that don’t parse as datetime values will
be silently ignored. If not, the evaluated value from the default
expression will be used as a replacement value.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime",</span> <span class="pre">"2015-07-28T09:46:00.12345Z"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one datetime value: “~t2015-07-28T09:46:00.12345Z”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime",</span> <span class="pre">1438076760123450000]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one datetime value: “~t2015-07-28T09:46:00.12345Z”. Note that
integer values are treated as nanoseconds since “1970-01-01T00:00:00Z”.
Negative integer values are interpreted as nanoseconds before that.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime",</span> <span class="pre">["list",</span> <span class="pre">["now"],</span> <span class="pre">["now"],</span> <span class="pre">"hello"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a list of two datetime values which both are the current time.
The “hello” string is ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime",</span> <span class="pre">["now"],</span> <span class="pre">"hello"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the current time as a datetime value, e.g.
“~t2016-05-13T14:32:00.431Z”. Note that this was created by the
function argument.</div>
</div>
</td>
</tr>
<tr class="row-even" id="datetime-parse-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">datetime-parse</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">TIMEZONE_NAME(string{0|1})</div>
<div class="line">FORMATSTRING(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to datetime values. The values must be strings
matching the format string given. Any values that don’t parse as datetime values will
be silently ignored.</div>
<div class="line"><br/></div>
<div class="line">The timezone name defaults to “UTC”. The datetime string will be interpreted
as being in this timezone. Click <a class="reference internal" href="#supported-timezones"><span class="std std-ref">here</span></a> to
see the list of supported timezones.</div>
<div class="line"><br/></div>
<div class="line"><br/></div>
<div class="line">The supported formatting tokens are:</div>
<div class="line"><br/></div>
<div class="line-block">
<div class="line">%d - day of the month (01 to 31)</div>
<div class="line">%e - day of the month (1 to 31)</div>
<div class="line">%H - hour, using a 24-hour clock (00 to 23)</div>
<div class="line">%I - hour, using a 12-hour clock (01 to 12)</div>
<div class="line">%m - month (01 to 12)</div>
<div class="line">%M - minute</div>
<div class="line">%p - either am or pm according to the given time value</div>
<div class="line">%S - second</div>
<div class="line">%f - microsecond as a decimal number, zero-padded on the left</div>
<div class="line">%y - year without a century (range 00 to 99)</div>
<div class="line">%Y - year including the century</div>
<div class="line">%z - UTC offset in the form +HHMM, -HHMM, +HH:MM or -HH:MM. If present, this token must be the last token in the format string.</div>
<div class="line">%% - a literal % character</div>
<div class="line"><br/></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">%y</span></code>, then the two digits are converted
according to the POSIX and ISO C standards; 00-68 are mapped
to the years 2000-2068 and 69-99 are mapped to the years 1969-1999.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%dT%H:%M:%S.%fZ",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"2015-07-28T09:46:00.12345Z"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one datetime value: “~t2015-07-28T09:46:00.12345Z”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%dT%H:%M:%S%z",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"2015-07-28T09:46:00+0200"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one datetime value: “~t2015-07-28T07:46:00Z”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%d.%m.%Y",</span> <span class="pre">"28.07.2015"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one datetime value: “~t2015-07-28T00:00:00Z”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%d.%m.%Y",</span> <span class="pre">["list",</span> <span class="pre">"28.07.2015",</span> <span class="pre">"01.01.1970"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns two datetime values: [“~t2015-07-28T00:00:00Z”, “~t1970-01-01T00:00:00Z”]</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"Europe/Oslo"</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%dT%H:%M:%S",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"2018-08-18T12:39:01"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one datetime value: “~t2018-08-08T10:39:01Z”.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="datetime-format-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">datetime-format</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">TIMEZONE_NAME(string{0|1})</div>
<div class="line">FORMATSTRING(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input datetime values to strings. The strings will be formattet according to the format string.
Any values that aren’t datetime values will be silently ignored. Note that precision loss is possible since
<code class="docutils literal notranslate"><span class="pre">datetime</span></code> objects internally have nanoseconds precision while the formatted strings will only support
microseconds (using the seconds fraction token <code class="docutils literal notranslate"><span class="pre">%f</span></code>).</div>
<div class="line"><br/></div>
<div class="line">The timezone name defaults to “UTC”. The datetime value will be translated to this timezone before it
is formatted. Click <a class="reference internal" href="#supported-timezones"><span class="std std-ref">here</span></a> to see the list of supported timezones.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">%y</span></code>, then the years are converted
according to the POSIX and ISO C standards; the years 2000-2068 are mapped to 00-68
and the years 1969-1999 are mapped to 69-99. For years outside of that range the
last two digits are used.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-format",</span> <span class="pre">"%Y-%m-%dT%H:%M:%SZ",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-07-28"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one string: “2015-07-28T00:00:00Z”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-format",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d</span> <span class="pre">%H:%M:%S",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%dT%H:%M:%S",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"2018-08-18T12:39:01"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns one string: “2018-08-18 12:39:01”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-format",</span> <span class="pre">"Europe/Oslo",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d</span> <span class="pre">%H:%M:%S",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%dT%H:%M:%S",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"2018-08-18T12:39:01"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns one string: “2018-08-18 14:39:01”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-format",</span> <span class="pre">"Europe/Oslo",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d</span> <span class="pre">%H:%M:%S",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"Europe/Oslo",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%dT%H:%M:%S",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"2018-08-18T12:39:01"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns one string: “2018-08-18 12:39:01”.</div>
<div class="line"><br/></div>
<div class="line">See <code class="docutils literal notranslate"><span class="pre">datetime-parse</span></code> for the supported tokens in the format string.</div>
</div>
</td>
</tr>
<tr class="row-even" id="datetime-plus-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">datetime-plus</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DATEPART(string{1})</div>
<div class="line">VALUE(integer{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Adds a fixed <code class="docutils literal notranslate"><span class="pre">VALUE</span></code> number (positive or negative) of <code class="docutils literal notranslate"><span class="pre">DATEPART</span></code> values to the the input values,</div>
<div class="line">producing new datetime objects. <code class="docutils literal notranslate"><span class="pre">DATEPART</span></code> can be one of the following values:</div>
<div class="line"><br/></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">year</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">month</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">week</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">day</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">hour</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">minute</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">second</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">millisecond</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">microsecond</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nanosecond</span></code></div>
<div class="line"><br/></div>
</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-plus",</span> <span class="pre">"day",</span> <span class="pre">1,</span> <span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-07-28"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one datetime value: <code class="docutils literal notranslate"><span class="pre">"~t2015-07-29T00:00:00Z"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-plus",</span> <span class="pre">"hour",</span> <span class="pre">-1,</span> <span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d",</span> <span class="pre">"2016-03-01"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one datetime value: <code class="docutils literal notranslate"><span class="pre">"~t2016-02-29T23:00:00Z"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-plus",</span> <span class="pre">"year",</span> <span class="pre">1,</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d",</span> <span class="pre">"1971-01-01"],</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d",</span> <span class="pre">"1950-06-01"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
</div>
<div class="line">Returns two datetime values: <code class="docutils literal notranslate"><span class="pre">["~t1972-01-01T00:00:00Z",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"~t1951-06-01T00:00:00Z"]</span></code>.</div>
</div>
</div>
</td>
</tr>
<tr class="row-odd" id="datetime-diff-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">datetime-diff</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DATEPART(string{1})</div>
<div class="line">STARTDATE(value-expression{1})</div>
<div class="line">ENDDATE(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Computes the positive or negative number of <code class="docutils literal notranslate"><span class="pre">DATEPART</span></code> values between the end and start date input values</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">DATEPART</span></code> can be one of the following values:</div>
<div class="line"><br/></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">year</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">month</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">week</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">day</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">hour</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">minute</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">second</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">millisecond</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">microsecond</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">nanosecond</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Note that the return values are rounded downwards to the nearest (absolute) integer value, i.e. +-11 months is</div>
<div class="line">0 years and +-8 days is +-1 week.</div>
</div>
<div class="line-block">
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-diff",</span> <span class="pre">"day",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-07-28"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-07-29"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one integer value: -1</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-diff",</span> <span class="pre">"day",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-07-29"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-07-28"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns one integer value: 1</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-diff",</span> <span class="pre">"year",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-03-02"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2016-07-29"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns: -1</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-diff",</span> <span class="pre">"month",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2015-03-02"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span> <span class="pre">"%Y-%m-%d",</span> <span class="pre">"2016-07-29"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns: -16</div>
</div>
</td>
</tr>
<tr class="row-even" id="datetime-shift-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">datetime-shift</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FROM_TIMEZONE(string{1})</div>
<div class="line">TO_TIMEZONE(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Shifts all the input datetime values from one timezone to another timezone. Any values that aren’t datetime
values will be silently ignored. Click <a class="reference internal" href="#supported-timezones"><span class="std std-ref">here</span></a> to see the list of supported timezones.</div>
<div class="line">Internally, SESAM stores datetimes as UTC, and timezone converting is usually done automatically by the datasources.
Sometimes, though, there is need to explicitly convert a timezone in a non-UTC timezone into some other timezone; An
example is if you are reading from a CSV-file where one of the columns is a date-string with no explicit timezone information,
but where you know that the dates are in some non-UTC timezone. In this case you could use the datetime-shift function
to convert the dates from the CSV-file into correct UTC datetimes. |</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-shift",</span> <span class="pre">"Europe/Oslo",</span> <span class="pre">"UTC",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y/%m/%d</span> <span class="pre">%H:%M",</span> <span class="pre">"2015/07/28</span> <span class="pre">09:46"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns one datetime value: <code class="docutils literal notranslate"><span class="pre">"~t2015-07-28T07:46:00Z"</span></code>.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-shift",</span> <span class="pre">"UTC",</span> <span class="pre">"Europe/Oslo",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y/%m/%d</span> <span class="pre">%H:%M",</span> <span class="pre">"2015/07/28</span> <span class="pre">09:46"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns one datetime value: <code class="docutils literal notranslate"><span class="pre">"~t2015-07-28T11:46:00Z"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-shift",</span> <span class="pre">"Europe/Oslo",</span> <span class="pre">"UTC",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y/%m/%d</span> <span class="pre">%H:%M",</span> <span class="pre">"2015/07/28</span> <span class="pre">09:46"],</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"%Y/%m/%d</span> <span class="pre">%H:%M",</span> <span class="pre">"2015/07/28</span> <span class="pre">04:46"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
</div>
<div class="line">Returns two datetime values: <code class="docutils literal notranslate"><span class="pre">["~t2015-07-28T07:46:00Z",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"~t2015-07-28T02:46:00Z"]</span></code>.</div>
</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-datetime-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-datetime</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a datetime value or
if it is a list, that the first element in the list is a datetime value.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-datetime",</span> <span class="pre">["now"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-datetime",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["datetime",</span> <span class="pre">"2015-07-28T09:46:00.12345Z"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-datetime",</span> <span class="pre">"2015-07-28T09:46:00.12345Z"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-datetime",</span> <span class="pre">["list",</span> <span class="pre">"1",</span> <span class="pre">2]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="strings">
<h3>Strings<a class="headerlink" href="#strings" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="string-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input values to strings.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Complex types like list and dict are JSON encoded (no transit encoding).
Bytes are decoded to strings using <code class="docutils literal notranslate"><span class="pre">utf-8</span></code> encoding.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["string",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"1"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["string",</span> <span class="pre">"hello"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"hello"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["string",</span> <span class="pre">null]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["string",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"abc",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"b":</span> <span class="pre">2,</span> <span class="pre">"a":</span> <span class="pre">1},</span> <span class="pre">["uri",</span> <span class="pre">"http://www.example.org/"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">124.4,</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
</div>
<div class="line">Returns a list of strings:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["abc",</span> <span class="pre">"[1,</span> <span class="pre">2,</span> <span class="pre">3]",</span> <span class="pre">"{\"a\":</span> <span class="pre">1,</span> <span class="pre">\"b\":</span> <span class="pre">2}",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"http://www.example.org/",</span> <span class="pre">"124.4",</span> <span class="pre">"12345"]</span></code>.</div>
</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-string-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-string</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a string literal or if
it is a list, that the first element</div>
<div class="line">in the list is a string</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-string",</span> <span class="pre">"foo:bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-string",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-string",</span> <span class="pre">["list",</span> <span class="pre">"foo:bar",</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-string",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"foo:bar"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false</div>
</div>
</td>
</tr>
<tr class="row-even" id="upper-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">upper</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the uppercase version of its input strings.
Non-string values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["upper",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["A",</span> <span class="pre">"B",</span> <span class="pre">"C"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["upper",</span> <span class="pre">"_S.name"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns an uppercased version of the source entity’s name.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="lower-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">lower</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the lowercase version of its input strings.
Non-string values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lower",</span> <span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lower",</span> <span class="pre">"_S.name"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a lowercased version of the source entity’s name.</div>
</div>
</td>
</tr>
<tr class="row-even" id="length-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">length</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the length (number of characters) of its input strings.
Non-string values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["length",</span> <span class="pre">["list",</span> <span class="pre">"",</span> <span class="pre">"a",</span> <span class="pre">"bb",</span> <span class="pre">"ccc"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["length",</span> <span class="pre">"_S.name"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the length of the source entity’s name.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="concat-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">concat</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{&gt;1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a concatenated string of its input strings.
Non-string values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"abc"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"_S.tags"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a concatenated version of the source entity’s tags.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"Hello</span> <span class="pre">",</span> <span class="pre">"_S.name",</span> <span class="pre">"!"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"Hello</span> <span class="pre">John!"</span></code> if the <code class="docutils literal notranslate"><span class="pre">name</span></code> property is <code class="docutils literal notranslate"><span class="pre">John</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"a",</span> <span class="pre">["list",</span> <span class="pre">"b",</span> <span class="pre">"c"],</span> <span class="pre">"d",</span> <span class="pre">123,</span> <span class="pre">["list",</span> <span class="pre">"!"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"abcd!"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">123,</span> <span class="pre">3.14]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">""</span></code>, because non-string values are ignored.</div>
</div>
</td>
</tr>
<tr class="row-even" id="join-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">join</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">SEPARATOR(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a string created by joining its input strings by SEPARATOR.
Non-string values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["join",</span> <span class="pre">"-",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">123,</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"a-b-c"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["join",</span> <span class="pre">"-",</span> <span class="pre">"_S.tags"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a joined string of the source entity’s tags separated by dashes.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="split-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">split</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">SEPARATOR(string{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of strings created by splitting its input strings by SEPARATOR.
Non-string values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["split",</span> <span class="pre">"-",</span> <span class="pre">"a-b-c"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["split",</span> <span class="pre">"",</span> <span class="pre">"abc"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code>.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["split",</span> <span class="pre">"",</span> <span class="pre">["list",</span> <span class="pre">"ab",</span> <span class="pre">"cd",</span> <span class="pre">"e"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c",</span> <span class="pre">"d",</span> <span class="pre">"e"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["split",</span> <span class="pre">"-",</span> <span class="pre">["list",</span> <span class="pre">"a-b",</span> <span class="pre">"c-d",</span> <span class="pre">"e"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c",</span> <span class="pre">"d",</span> <span class="pre">"e"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["split",</span> <span class="pre">"-",</span> <span class="pre">"_S.uuid"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a list of strings of the source entity’s tags separated by dashes.</div>
</div>
</td>
</tr>
<tr class="row-even" id="strip-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">strip</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">CHARACTERS(string{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a version of its input strings where characters in CHARACTERS are removed
from both sides. Non-string values are ignored. The default value of
CHARACTERS is all whitespace characters.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["strip",</span> <span class="pre">["list",</span> <span class="pre">"</span> <span class="pre">ab</span> <span class="pre">",</span> <span class="pre">"cd</span> <span class="pre">",</span> <span class="pre">"ef"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["ab",</span> <span class="pre">"cd",</span> <span class="pre">"ef"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["strip",</span> <span class="pre">"</span>  <span class="pre">abc"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"abc"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["strip",</span> <span class="pre">"_S.name"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a stripped version of the source entity’s name where whitespace is removed.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["strip",</span> <span class="pre">"xy",</span> <span class="pre">["list",</span> <span class="pre">"123xyx",</span> <span class="pre">"xy456yx"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["123",</span> <span class="pre">"456"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="lstrip-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">lstrip</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">CHARACTERS(string{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a version of its input strings where characters in CHARACTERS are removed
from the left side. Non-string values are ignored. The default value of
CHARACTERS is all whitespace characters.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lstrip",</span> <span class="pre">["list",</span> <span class="pre">"</span> <span class="pre">ab</span> <span class="pre">",</span> <span class="pre">"cd</span> <span class="pre">",</span> <span class="pre">"ef"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["ab</span> <span class="pre">",</span> <span class="pre">"cd</span> <span class="pre">",</span> <span class="pre">"ef"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lstrip",</span> <span class="pre">"</span>  <span class="pre">abc"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"abc"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lstrip",</span> <span class="pre">"_S.name"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a stripped version of the source entity’s name where whitespace is removed
from the left.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lstrip",</span> <span class="pre">"xy",</span> <span class="pre">["list",</span> <span class="pre">"123xyx",</span> <span class="pre">"xy456yx"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["123xyx",</span> <span class="pre">"456yx"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="rstrip-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">rstrip</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">CHARACTERS(string{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a version of its input strings where characters in CHARACTERS are removed
from the right side. Non-string values are ignored. The default value of
CHARACTERS is all whitespace characters.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rstrip",</span> <span class="pre">["list",</span> <span class="pre">"</span> <span class="pre">ab</span> <span class="pre">",</span> <span class="pre">"cd</span> <span class="pre">",</span> <span class="pre">"ef"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["</span> <span class="pre">ab",</span> <span class="pre">"cd",</span> <span class="pre">"ef"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rstrip",</span> <span class="pre">"</span>  <span class="pre">abc"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"</span>  <span class="pre">abc"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rstrip",</span> <span class="pre">"_S.name"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a stripped version of the source entity’s name where whitespace is removed
from the right.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rstrip",</span> <span class="pre">"xy",</span> <span class="pre">["list",</span> <span class="pre">"123xyx",</span> <span class="pre">"xy456yx"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["123",</span> <span class="pre">"xy456"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="ljust-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">ljust</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">WIDTH(integer-expression{1})</div>
<div class="line">FILL_CHARACTER(character-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a left-justified version of its input strings. The WIDTH defines the minimum
length of the returned strings. If the input strings are longer than WIDTH, then the
input string is returned as-is. If the input string is shorter than WIDTH then it is
justified to the left using the FILL_CHARACTER.</div>
<div class="line"><br/></div>
<div class="line">Non-string values are ignored. If the WIDTH is not an integer or FILL_CHARACTER is
not a single character then the function returns <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ljust",</span> <span class="pre">10,</span> <span class="pre">"0",</span> <span class="pre">"123"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"1230000000"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ljust",</span> <span class="pre">5,</span> <span class="pre">"</span> <span class="pre">",</span> <span class="pre">["list",</span> <span class="pre">"abc",</span> <span class="pre">"def",</span> <span class="pre">"ghijklm"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["abc</span>  <span class="pre">",</span> <span class="pre">"def</span>  <span class="pre">",</span> <span class="pre">"ghijklm"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="rjust-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">rjust</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">WIDTH(integer-expression{1})</div>
<div class="line">FILL_CHARACTER(character-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a right-justified version of its input strings. The WIDTH defines the minimum
length of the returned strings. If the input strings are longer than WIDTH, then the
input string is returned as-is. If the input string is shorter than WIDTH then it is
justified to the right using the FILL_CHARACTER.</div>
<div class="line"><br/></div>
<div class="line">Non-string values are ignored. If the WIDTH is not an integer or FILL_CHARACTER is
not a single character then the function returns <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rjust",</span> <span class="pre">10,</span> <span class="pre">"0",</span> <span class="pre">"123"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"0000000123"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["rjust",</span> <span class="pre">5,</span> <span class="pre">"</span> <span class="pre">",</span> <span class="pre">["list",</span> <span class="pre">"abc",</span> <span class="pre">"def",</span> <span class="pre">"ghijklm"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["</span>  <span class="pre">abc",</span> <span class="pre">"</span>  <span class="pre">def",</span> <span class="pre">"ghijklm"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="replace-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">replace</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">(REPLACEMENTS(dict{1}) or
(OLD_STRING(string{1})
 NEW_STRING(string{1})))</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Replaces occurrences of OLD_STRING with NEW_STRING in VALUES, or replaces the keys
in the REPLACEMENT dict with the respective values. Non-string values
are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["replace",</span> <span class="pre">"http://",</span> <span class="pre">"https://",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"http://www.sesam.io/"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"https://www.sesam.io/"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["replace",</span> <span class="pre">":",</span> <span class="pre">".",</span> <span class="pre">"_S.date"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a date string where the colon has been replaced by a period.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["replace",</span> <span class="pre">{"Hello":</span> <span class="pre">"HELLO",</span> <span class="pre">"world":</span> <span class="pre">"WORLD"},</span> <span class="pre">"Hello</span> <span class="pre">world!"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"HELLO</span> <span class="pre">WORLD!"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["replace",</span> <span class="pre">["dict",</span> <span class="pre">"a",</span> <span class="pre">"A",</span> <span class="pre">"b",</span> <span class="pre">"B"],</span> <span class="pre">"abc"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"ABc"</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="substring-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">substring</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">START_INDEX(integer{1})</div>
<div class="line">END_INDEX(integer{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Extracts the substring between START_INDEX and END_INDEX. If the indexes are negative they start from the end.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["substring",</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">"abcdef"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"cd"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["substring",</span> <span class="pre">2,</span> <span class="pre">"abcdef"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"cdef"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["substring",</span> <span class="pre">-3,</span> <span class="pre">-1,</span> <span class="pre">"abcdef"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"de"</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="matches-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">matches</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PATTERN(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns true if all the values in VALUES match the pattern in PATTERN. The ‘*’ and ‘?’
wildcard characters can be used. Non-string values are not matched and will cause the
function to return false. If PATTERN contains multiple string values then only the
first one is used.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["matches",</span> <span class="pre">"a*p*a",</span> <span class="pre">["list",</span> <span class="pre">"alpha",</span> <span class="pre">"alpaca"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["matches",</span> <span class="pre">"*_sport",</span> <span class="pre">"_S.tags"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>, unless <code class="docutils literal notranslate"><span class="pre">_S.tags</span></code> is empty or <code class="docutils literal notranslate"><span class="pre">null</span></code>, if all the tags that have a “_sport” suffix.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["matches",</span> <span class="pre">"*",</span> <span class="pre">null]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["matches",</span> <span class="pre">"*",</span> <span class="pre">["list"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="bytes">
<h3>Bytes<a class="headerlink" href="#bytes" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="bytes-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bytes</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all non-null input string values to bytes using <code class="docutils literal notranslate"><span class="pre">utf-8</span></code> encoding.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["bytes",</span> <span class="pre">"abc"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one bytes object: <code class="docutils literal notranslate"><span class="pre">~bYWJj</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-bytes-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-bytes</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a bytes literal or value or if
it is a list, that the first element in the list is a bytes type value or literal</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-bytes",</span> <span class="pre">["bytes",</span> <span class="pre">"abc"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-bytes",</span> <span class="pre">"~bYWJj"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-bytes",</span> <span class="pre">"some-string"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-bytes",</span> <span class="pre">["list",</span> <span class="pre">"~bYWJj",</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-bytes",</span> <span class="pre">["list",</span> <span class="pre">"12345",</span> <span class="pre">"~bYWJj"]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-even" id="base64-encode-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">base64-encode</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the base64 encoded version of its input bytes.
Non-bytes values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["base64-encode",</span> <span class="pre">["bytes",</span> <span class="pre">"abc"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"YWJj"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["base64-encode",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">["bytes",</span> <span class="pre">"abc"],</span> <span class="pre">2,</span> <span class="pre">["bytes",</span> <span class="pre">"def"],</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["YWJj",</span> <span class="pre">"ZGVm"]</span></code>.</div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-odd" id="base64-decode-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">base64-decode</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the base64 decoded version of its input strings.
Non-string values and non-base64 encoded values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["base64-decode",</span> <span class="pre">"YWJj"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"~babc"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["base64-decode",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"YWJj",</span> <span class="pre">2,</span> <span class="pre">"ZGVm",</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["~bYWJj",</span> <span class="pre">"~bZGVm"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line">(Note that the JSON string representation of a bytes object is represented as a base64 encoded string, hence</div>
<div class="line">the similar looking output and input)</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="encryption">
<h3>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="encrypt-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">encrypt</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">KEY(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Encrypts the VALUES using the key in KEY</div>
<div class="line">the data wil be encrypted using a symmetric Fernet algorithm with the key as the password. Note that this</div>
<div class="line">function by itself does not offer an end-to-end secure system of encryption</div>
<div class="line">as the key is stored along with the encrypted data. This applies even when using a <code class="docutils literal notranslate"><span class="pre">$SECRET(secret</span> <span class="pre">key)</span></code> via</div>
<div class="line">the secrets manager.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt",</span> <span class="pre">"secret",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns an encrypted bytes object.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="encrypt-pki-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">encrypt-pki</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PUBLIC_KEY(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Encrypts the strings in VALUES using the public key in PUBLIC_KEY</div>
<div class="line"><br/></div>
<div class="line">Note that this function requires the VALUES parameter to either be a string or a list of strings so</div>
<div class="line">if you want to encrypt some property that is not a string or a list of strings,</div>
<div class="line">you must convert it this form first, for example using the <code class="docutils literal notranslate"><span class="pre">json</span></code> or <code class="docutils literal notranslate"><span class="pre">json-transit</span></code> serialize functions.</div>
<div class="line"><br/></div>
<div class="line">The PUBLIC_KEY parameter must be a RSA public key in PEM format (PKCSv8, which starts with the header</div>
<div class="line">“—–BEGIN PUBLIC KEY—–”). The input is encrypted using an asymmetric RSA 2048 bits</div>
<div class="line">encryption algorithm - to decrypt the data you must use the corresponding private key. See <code class="docutils literal notranslate"><span class="pre">decrypt-pki</span></code>.</div>
<div class="line"><br/></div>
<div class="line">Note that this function can’t encrypt large strings, it is intended to encrypt shorter passphrases or similar</div>
<div class="line">identifiers. Use the <code class="docutils literal notranslate"><span class="pre">encrypt-pgp</span></code> function instead if you need to encrypt larger blocks of data.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pki",</span> <span class="pre">"RSA_PEM_public_key",</span> <span class="pre">["json-transit",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a list of bytes objects: <code class="docutils literal notranslate"><span class="pre">["~bDHAERS..",</span> <span class="pre">"~bHDURKSS..",</span> <span class="pre">"~bXYSERS.."]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pki",</span> <span class="pre">"RSA_PEM_public_key",</span> <span class="pre">"secret-passphrase"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a single bytes object: <code class="docutils literal notranslate"><span class="pre">"~bDHAERS.."</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pki",</span> <span class="pre">"$SECRET(key-secret-name)",</span> <span class="pre">"$SECRET(secret-passphrase-name)"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a single bytes object: <code class="docutils literal notranslate"><span class="pre">"~bDHAERS.."</span></code></div>
</div>
</td>
</tr>
<tr class="row-even" id="encrypt-pgp-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">encrypt-pgp</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PUBLIC_KEY(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Encrypts the strings in VALUES in OpenPGP format using the PGP public key in PUBLIC_KEY</div>
<div class="line"><br/></div>
<div class="line">Note that this function requires the VALUES parameter to either be a string or a list of strings so</div>
<div class="line">if you want to encrypt some property that is not a string or a list of strings,</div>
<div class="line">you must convert it this form first, for example using the <code class="docutils literal notranslate"><span class="pre">json</span></code> or <code class="docutils literal notranslate"><span class="pre">json-transit</span></code> serialize functions.</div>
<div class="line"><br/></div>
<div class="line">The PUBLIC_KEY parameter must be a PGP public key which starts with the header</div>
<div class="line">“—–BEGIN PGP PUBLIC KEY—–”). The resulting encrypted data is stored in OpenPGP form (RFC4880, <a class="reference external" href="https://tools.ietf.org/html/rfc4880">https://tools.ietf.org/html/rfc4880</a>)</div>
<div class="line">To decrypt the data you must use the corresponding private key and associated password. See <code class="docutils literal notranslate"><span class="pre">decrypt-pgp</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pgp",</span> <span class="pre">"OpenPGP_public_key",</span> <span class="pre">["json-transit",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a list of strings in OpenPGP ASCII format:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["----BEGIN</span> <span class="pre">PGP</span> <span class="pre">MESSAGE..",</span> <span class="pre">"----BEGIN</span> <span class="pre">PGP</span> <span class="pre">MESSAGE..",</span> <span class="pre">"----BEGIN</span> <span class="pre">PGP</span> <span class="pre">MESSAGE.."]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pgp",</span> <span class="pre">"OpenPGP_public_key",</span> <span class="pre">"secret-message"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a single OpenPGP message in ASCII format: <code class="docutils literal notranslate"><span class="pre">"----BEGIN</span> <span class="pre">PGP</span> <span class="pre">MESSAGE.."</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pgp",</span> <span class="pre">"$SECRET(key-secret-name)",</span> <span class="pre">"secret-message"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a single OpenPGP message in ASCII format: <code class="docutils literal notranslate"><span class="pre">"----BEGIN</span> <span class="pre">PGP</span> <span class="pre">MESSAGE.."</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd" id="decrypt-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">decrypt</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">KEY(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">The key is assumed to be a matching password used by a previous <code class="docutils literal notranslate"><span class="pre">encrypt</span></code></div>
<div class="line">function, i.e. it is symmetric with <code class="docutils literal notranslate"><span class="pre">encrypt</span></code> if the same key is used:</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decrypt",</span> <span class="pre">"secret",</span> <span class="pre">["encrypt",</span> <span class="pre">"secret",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decrypt",</span> <span class="pre">"$SECRET(secret-name)",</span> <span class="pre">["encrypt",</span> <span class="pre">"$SECRET(secret-name)",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code></div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-even" id="decrypt-pki-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">decrypt-pki</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PRIVATE_KEY(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Decrypts the bytes objects in VALUES using the private key in PRIVATE_KEY.</div>
<div class="line"><br/></div>
<div class="line">Note that this function requires the VALUES parameter to either be a single bytes object or a list of bytes</div>
<div class="line">objects.</div>
<div class="line"><br/></div>
<div class="line">The PRIVATE_KEY parameter must be a RSA private key in PEM format (PKSv8, which starts with the header</div>
<div class="line">“—–BEGIN RSA PRIVATE KEY—–”). The bytes data in VALUE is then decrypted to a string using the asymmetric</div>
<div class="line">RSA 2048 bits algorithm - the data must have been encrypted with the corresponding public key. If the data</div>
<div class="line">is encoded as a string, it must be cast (for example using <code class="docutils literal notranslate"><span class="pre">datetime-parse</span></code>) or decoded using an appropriate</div>
<div class="line">function such as <code class="docutils literal notranslate"><span class="pre">json-parse</span></code> or <code class="docutils literal notranslate"><span class="pre">json-transit-parse</span></code>.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decrypt-pki",</span> <span class="pre">"-----BEGIN</span> <span class="pre">RSA</span> <span class="pre">PRIVATE</span> <span class="pre">KEY-----..-----END</span> <span class="pre">RSA</span> <span class="pre">PRIVATE</span> <span class="pre">KEY-----",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pki",</span> <span class="pre">"-----BEGIN</span> <span class="pre">PUBLIC</span> <span class="pre">KEY-----..-----END</span> <span class="pre">PUBLIC</span> <span class="pre">KEY-----",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit",</span> <span class="pre">["list",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]]]]</span></code></div>
</div>
</div>
</div>
</div>
<div class="line-block">
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decrypt-pki",</span> <span class="pre">"$SECRET(private-key-name)",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pki",</span> <span class="pre">"-----BEGIN</span> <span class="pre">PUBLIC</span> <span class="pre">KEY-----..-----END</span> <span class="pre">PUBLIC</span> <span class="pre">KEY-----",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit",</span> <span class="pre">["list",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]]]]</span></code></div>
</div>
</div>
</div>
</div>
<div class="line-block">
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code></div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-odd" id="decrypt-pgp-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">decrypt-pgp</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PRIVATE_KEY(string{1})</div>
<div class="line">PASSPHRASE(string{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Decrypts the strings in VALUES in OpenPGP format using the PGP private key in PRIVATE_KEY and the password in</div>
<div class="line">PASSPHRASE.</div>
<div class="line"><br/></div>
<div class="line">Note that this function requires the VALUES parameter to either be a string or a list of strings in OpenPGP</div>
<div class="line">message format (these are ASCII strings starting with the header “—-BEGIN PGP MESSAGE..”, see RFC4880,</div>
<div class="line"><a class="reference external" href="https://tools.ietf.org/html/rfc4880">https://tools.ietf.org/html/rfc4880</a>).</div>
<div class="line"><br/></div>
<div class="line">The PRIVATE_KEY parameter must be a PGP private key which starts with the header</div>
<div class="line">“—–BEGIN PGP PRIVATE KEY—–”) and the password in PASSPHRASE must match this key so it can be unlocked.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decrypt-pgp",</span> <span class="pre">"-----BEGIN</span> <span class="pre">PGP</span> <span class="pre">PRIVATE</span> <span class="pre">KEY..",</span> <span class="pre">"valid-password",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pgp",</span> <span class="pre">"-----BEGIN</span> <span class="pre">PGP</span> <span class="pre">PUBLIC</span> <span class="pre">KEY..",</span> <span class="pre">["list",</span> <span class="pre">"data",</span> <span class="pre">"data2"]]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list: <code class="docutils literal notranslate"><span class="pre">["data",</span> <span class="pre">"data2"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decrypt-pgp",</span> <span class="pre">"-----BEGIN</span> <span class="pre">PGP</span> <span class="pre">PRIVATE</span> <span class="pre">KEY..",</span> <span class="pre">"valid-password",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pgp",</span> <span class="pre">"-----BEGIN</span> <span class="pre">PGP</span> <span class="pre">PUBLIC</span> <span class="pre">KEY..",</span> <span class="pre">"secret</span> <span class="pre">message"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a string: <code class="docutils literal notranslate"><span class="pre">"secret</span> <span class="pre">message"</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["decrypt-pgp",</span> <span class="pre">"$SECRET(private-key-name)",</span> <span class="pre">"$SECRET(password-name)",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["encrypt-pgp",</span> <span class="pre">"-----BEGIN</span> <span class="pre">PGP</span> <span class="pre">PUBLIC</span> <span class="pre">KEY..",</span> <span class="pre">"secret</span> <span class="pre">message"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a string: <code class="docutils literal notranslate"><span class="pre">"secret</span> <span class="pre">message"</span></code></div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="json">
<h3>JSON<a class="headerlink" href="#json" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="json-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">json</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all input values to JSON strings (no transit encoding).
The keys of dicts are sorted lexically.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"1"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json",</span> <span class="pre">"hello"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"\"hello\""</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"abc",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"b":</span> <span class="pre">2,</span> <span class="pre">"a":</span> <span class="pre">1},</span> <span class="pre">["uri",</span> <span class="pre">"http://www.example.org/"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">124.4,</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
</div>
<div class="line">Returns a list of strings:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["\"abc\"",</span> <span class="pre">"[1,</span> <span class="pre">2,</span> <span class="pre">3]",</span> <span class="pre">"{\"a\":</span> <span class="pre">1,</span> <span class="pre">\"b\":</span> <span class="pre">2}",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"http://www.example.org/",</span> <span class="pre">"124.4",</span> <span class="pre">"12345"]</span></code>.</div>
</div>
</div>
</td>
</tr>
<tr class="row-odd" id="json-transit-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">json-transit</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates all input values to transit encoded JSON strings.
The keys of dicts are sorted lexically. This function behaves like
the <code class="docutils literal notranslate"><span class="pre">json</span></code> function, except that it transit encodes values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit",</span> <span class="pre">1]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"1"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit",</span> <span class="pre">"hello"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"\"hello\""</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"abc",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"b":</span> <span class="pre">2,</span> <span class="pre">"a":</span> <span class="pre">1},</span> <span class="pre">["uri",</span> <span class="pre">"http://www.example.org/"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">124.4,</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
</div>
<div class="line">Returns a list of strings:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["\"abc\"",</span> <span class="pre">"[1,</span> <span class="pre">2,</span> <span class="pre">3]",</span> <span class="pre">"{\"a\":</span> <span class="pre">1,</span> <span class="pre">\"b\":</span> <span class="pre">2}",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"~rhttp://www.example.org/",</span> <span class="pre">"124.4",</span> <span class="pre">"12345"]</span></code>.</div>
</div>
</div>
</td>
</tr>
<tr class="row-even" id="json-parse-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">json-parse</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(default-value-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Parses all input values as JSON strings (no transit decoding).</div>
<div class="line"><br/></div>
<div class="line">If no default value expression is given, then invalid values that don’t
parse as valid JSON will be silently ignored. If not, the evaluated value
from the default expression will be used as a replacement value.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-parse",</span> <span class="pre">"1"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one number: <code class="docutils literal notranslate"><span class="pre">1</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-parse",</span> <span class="pre">"\"hello\""]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"hello"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uri",</span> <span class="pre">["json-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"\"~rhttp://www.example.org/\""]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-parse",</span> <span class="pre">"{\"a\":</span> <span class="pre">1,</span> <span class="pre">\"b\":</span> <span class="pre">2}"</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a dictionary: <code class="docutils literal notranslate"><span class="pre">{"a":</span> <span class="pre">1,</span> <span class="pre">"b":</span> <span class="pre">2}",</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-parse",</span> <span class="pre">"hello"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code> because <code class="docutils literal notranslate"><span class="pre">hello</span></code> is not a valid JSON string.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"hello",</span> <span class="pre">"123",</span> <span class="pre">"null",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"\"abc\"",</span> <span class="pre">"\"~rhttp://example.org/\""]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[123,</span> <span class="pre">null,</span> <span class="pre">"abc",</span> <span class="pre">"~rhttp://example.org/"]</span></code>. Note that <code class="docutils literal notranslate"><span class="pre">null</span></code>
is a valid JSON expression, so <code class="docutils literal notranslate"><span class="pre">null</span></code> is included in the result list. Note
also that <code class="docutils literal notranslate"><span class="pre">"~rhttp://www.example.org/"</span></code> is not parsed as a URI since we don’t do
transit decoding here.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-parse",</span> <span class="pre">"no-value",</span> <span class="pre">"hello"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"no-value"</span></code> because <code class="docutils literal notranslate"><span class="pre">hello</span></code> is not a valid JSON string.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-parse",</span> <span class="pre">"no-value",</span> <span class="pre">"null"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code> because <code class="docutils literal notranslate"><span class="pre">"null"</span></code> is a valid JSON string.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="json-transit-parse-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">json-transit-parse</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(default-value-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Parses all input values as transit-encoded JSON strings.</div>
<div class="line"><br/></div>
<div class="line">If no default value expression is given, then invalid values that don’t
parse as valid JSON will be silently ignored. If not, the evaluated value
from the default expression will be used as a replacement value.</div>
<div class="line"><br/></div>
<div class="line">This function behaves like
the <code class="docutils literal notranslate"><span class="pre">json-parse</span></code> function, except that it transit decodes values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span> <span class="pre">"1"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one number: <code class="docutils literal notranslate"><span class="pre">1</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span> <span class="pre">"\"hello\""]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one string: <code class="docutils literal notranslate"><span class="pre">"hello"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uri",</span> <span class="pre">["json-transit-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"\"~rhttp://www.example.org/\""]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span> <span class="pre">"hello"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code> because <code class="docutils literal notranslate"><span class="pre">hello</span></code> is not a valid JSON string.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"hello",</span> <span class="pre">"123",</span> <span class="pre">"null",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"\"abc\"",</span> <span class="pre">"\"~rhttp://example.org/\""]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[123,</span> <span class="pre">null,</span> <span class="pre">"abc",</span> <span class="pre">"~rhttp://example.org/"]</span></code>. Note that <code class="docutils literal notranslate"><span class="pre">null</span></code>
is a valid JSON expression, so <code class="docutils literal notranslate"><span class="pre">null</span></code> is included in the result list. Note
also that “~rhttp://www.example.org/” is parsed as a URI since we are
doing transit decoding.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"no-value",</span> <span class="pre">"~rhttp://example.org/"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"no-value"</span></code> because <code class="docutils literal notranslate"><span class="pre">~rhttp://example.org/</span></code> is not
a valid JSON string.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uri",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["json-transit-parse",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"no-value",</span> <span class="pre">"\"~rhttp://example.org/\""]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> because <code class="docutils literal notranslate"><span class="pre">"\"~rhttp://example.org/\""</span></code> is a valid JSON string
and the return value is a URI.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="uris">
<h3>URIs<a class="headerlink" href="#uris" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="uri-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uri</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates input values to URIs. Only strings in VALUES will be
cast to URIs. Note that <em>no</em> URI escaping is done on the strings.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["uri",</span> <span class="pre">"http://www.example.org/"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns one URI.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["uri",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"http://www.example.org/",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"http://www.sesam.io/",</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns a list of two URIs. The number is silently ignored because
it is not a string.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-uri-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-uri</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a URI literal, or if it is
a list, that the first element in the list is a URI.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uri",</span> <span class="pre">["uri",</span> <span class="pre">"foo:bar"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uri",</span> <span class="pre">"foo:bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uri",</span> <span class="pre">["list",</span> <span class="pre">["uri",</span> <span class="pre">"foo:bar"],</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uri",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">["uri",</span> <span class="pre">"foo:bar"]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="url-quote-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">url-quote</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">SAFE_CHARS(string{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the URL quoted versions of any string or list of strings in the
argument list. Any non-strings are ignored and is not returned in the
result. Returns either a single string (if the input is a single
string literal) or a list (of strings).</div>
<div class="line"><br/></div>
<div class="line">If you want some ASCII characters to not be encoded, e.g. the slash character <code class="docutils literal notranslate"><span class="pre">/</span></code>,
then specify the <code class="docutils literal notranslate"><span class="pre">SAFE_CHARS</span></code> argument. The default value is “”. The <code class="docutils literal notranslate"><span class="pre">SAFE_CHARS</span></code>
argument must be a string that contains zero or more ASCII characters that should
not be encoded. Note that this only is applicable for ASCII characters.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["url-quote",</span> <span class="pre">"/foo</span> <span class="pre">bar/baz"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">%2Ffoo%20bar%2Fbaz</span></code>. Note that the <code class="docutils literal notranslate"><span class="pre">/</span></code> characters have been encoded.
To avoid this you can add the SAFE_CHARS argument:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["url-quote",</span> <span class="pre">"/",</span> <span class="pre">"/foo</span> <span class="pre">bar/baz"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">/foo%20bar/baz</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["url-quote",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"å",</span> <span class="pre">1,</span> <span class="pre">2,</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["uri",</span> <span class="pre">"http://example.com"],</span> <span class="pre">"foo</span> <span class="pre">bar"]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["%C3%A5",</span> <span class="pre">"foo%20bar]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="url-unquote-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">url-unquote</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the URL unquoted versions of any string or list of strings in the
argument list. Any non-strings are ignored and is not returned in the
result. Returns either a single string (if the input is a single
string literal) or a list (of strings).</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["url-unquote",</span> <span class="pre">"%2Ffoo%20bar%2Fbaz"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">/foo</span> <span class="pre">bar/baz</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["url-quote",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">"%C3%A5",</span> <span class="pre">["uri",</span> <span class="pre">"http://example.com"],</span> <span class="pre">"foo%20bar"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["å",</span> <span class="pre">"foo</span> <span class="pre">bar"]</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="uuids">
<h3>UUIDs<a class="headerlink" href="#uuids" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="uuid-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uuid</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Create a new UUID object (version 4 ). It can optionally cast a single string or list of string UUID representations to
UUID objects. Any input that can’t be cast to a UUID object will be ignored.</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["uuid"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a new random UUID object on the form “~u9f598f65-eea5-4906-a8f5-82f6d8e69726”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["uuid",</span> <span class="pre">"abc98f65-ddf5-1234-a8f5-82f6d8e69726"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a new UUID object cast from the input argument: “~uabc98f65-ddf5-1234-a8f5-82f6d8e69726”.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["uuid",</span> <span class="pre">["list",</span> <span class="pre">"abc98f65-ddf5-1234-a8f5-82f6d8e601a8",</span> <span class="pre">2,</span> <span class="pre">"9f598f65-eea5-4906-a8f5-82f6d8e69726"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns two UUID objects: [“~uabc98f65-ddf5-1234-a8f5-82f6d8e69726”, “~u9f598f65-eea5-4906-a8f5-82f6d8e69726”]</div>
<div class="line">Note that the mismatched input argument <code class="docutils literal notranslate"><span class="pre">2</span></code> is ignored.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is non-deterministic and will return a
different value every time it is evaluated. Be aware that if
the pipe is rewound or reset then it will produce a
different output. Dependency tracking will also have a
similar effect as to produce a different value when entities
are reprocessed.</p>
<p><em>Use this function with care and make sure
that you are aware of the consequences of reprocessing
entities.</em></p>
</div>
</td>
</tr>
<tr class="row-odd" id="is-uuid-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-uuid</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a UUID literal or value or if
it is a list, that the first element in the list is a UUID type value or literal</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uuid",</span> <span class="pre">["uuid"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uuid",</span> <span class="pre">"~u9f598f65-eea5-4906-a8f5-82f6d8e69726"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uuid",</span> <span class="pre">"some-string"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uuid",</span> <span class="pre">["list",</span> <span class="pre">["uuid"],</span> <span class="pre">"12345"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-uuid",</span> <span class="pre">["list",</span> <span class="pre">"12345",</span> <span class="pre">["uuid"]]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="nested-transformations">
<h3>Nested transformations<a class="headerlink" href="#nested-transformations" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="apply-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">apply</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">RULE_ID(string{1}),</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Applies the RULE_ID transform rule on the entities in VALUES.
RULE_ID must be the id of a transform rule in the current DTL
specification.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["apply",</span> <span class="pre">"order",</span> <span class="pre">"_S.orders"]</span></code></div>
<div class="line"><br/></div>
<div class="line">This will transform the order entities in the source entity’s
<code class="docutils literal notranslate"><span class="pre">orders</span></code> field using the <code class="docutils literal notranslate"><span class="pre">order</span></code> transform rules. The output is
the transformed order entities.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="apply-hops-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">apply-hops</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">RULE_ID(string{1}),</div>
<div class="line">HOPS_SPEC(dict{&gt;1})</div>
<div class="line"><br/></div>
</div>
<div class="line">This function is a combined <code class="docutils literal notranslate"><span class="pre">hops</span></code> and <code class="docutils literal notranslate"><span class="pre">apply</span></code> function. It
evaluates the hops, and then passes the result through
the RULE_ID transform rule.</div>
</div>
<div class="line-block">
<div class="line">See the <a class="reference internal" href="#apply-dtl-function"><span class="std std-ref">apply</span></a>
and the <a class="reference internal" href="#hops-dtl-function"><span class="std std-ref">hops</span></a> functions for more information
about the parts.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use this function instead of <code class="docutils literal notranslate"><span class="pre">apply</span></code> if you use <code class="docutils literal notranslate"><span class="pre">hops</span></code> inside
the transformation rule. This is required so that
<a class="reference external" href="concepts.html#dependency-tracking">dependency tracking</a>
can work. Calling <code class="docutils literal notranslate"><span class="pre">apply</span></code> on a rule that contains <code class="docutils literal notranslate"><span class="pre">hops</span></code> or
<code class="docutils literal notranslate"><span class="pre">apply-hops</span></code> is not allowed.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["apply-hops",</span> <span class="pre">"order",</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"datasets":</span> <span class="pre">["orders</span> <span class="pre">o"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"where":</span> <span class="pre">["eq",</span> <span class="pre">"_S._id",</span> <span class="pre">"o.cust_id"]</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">This will retrieve orders from the hops expression and then
transform them using the <code class="docutils literal notranslate"><span class="pre">order</span></code> transformation rule. The output
is the transformed order entities.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="paths">
<h3>Paths<a class="headerlink" href="#paths" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="path-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">PROPERTY_PATH(value-expression{1}),</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Traverses the PROPERTY_PATH path for each of the entities in
VALUES. The result is all the values at the end of
the traversal. This may be a single value or a list of values.
PROPERTY_PATH is an expression that should resolve
to a string or a list of strings. Those strings are treated as
literals, i.e. property names, so no variables can be used. Only
properties on the entity can be traversed. If you want to traverse
to other entities use the <code class="docutils literal notranslate"><span class="pre">hops</span></code> function instead.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transform function is <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespaced identifiers</span></a> aware.</p>
<p>If namespaced identifiers are enabled and the path element is not
a fully qualified namespaced identifier then all properties with
the path element as its identifier part will be part of the result.
In practice the result is the union of all those properties.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">"age",</span> <span class="pre">["list",</span> <span class="pre">{"age":</span> <span class="pre">23},</span> <span class="pre">{"age":</span> <span class="pre">24}]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Traverses the <code class="docutils literal notranslate"><span class="pre">age</span></code> field of the VALUES entities.
Returns <code class="docutils literal notranslate"><span class="pre">[23,</span> <span class="pre">24]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">["list",</span> <span class="pre">"order_lines",</span> <span class="pre">"item_name"],</span> <span class="pre">"_S.orders"]</span></code></div>
<div class="line"><br/></div>
<div class="line">This will traverse from the source entity’s orders to the
order lines and then return their item names. The output is a
list of product item names.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">"age",</span> <span class="pre">{"age":</span> <span class="pre">24}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">24</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">"foo",</span> <span class="pre">{"bar":</span> <span class="pre">123}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"a":</span> <span class="pre">{"b":</span> <span class="pre">1}},</span> <span class="pre">{"a":</span> <span class="pre">[{"b":</span> <span class="pre">2},</span> <span class="pre">{"b":</span> <span class="pre">3}]}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><strong>With namespaced identifiers enabled:</strong></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaced_identifiers":</span> <span class="pre">true,</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"namespaces":</span> <span class="pre">{</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"identity":</span> <span class="pre">"foo",</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">"property":</span> <span class="pre">"bar"</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">"foo:a",</span> <span class="pre">{"a":</span> <span class="pre">1,</span> <span class="pre">"foo:a":</span> <span class="pre">2,</span> <span class="pre">"bar:a":</span> <span class="pre">[3,</span> <span class="pre">4]}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code> as the path element <code class="docutils literal notranslate"><span class="pre">"foo:a"</span></code> is a fully qualified
namespaced identifier.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">"a",</span> <span class="pre">{"a":</span> <span class="pre">1,</span> <span class="pre">"foo:a":</span> <span class="pre">2,</span> <span class="pre">"bar:a":</span> <span class="pre">[3,</span> <span class="pre">4]}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></code>, i.e. the union of all the values in all
the properties that have <code class="docutils literal notranslate"><span class="pre">a</span></code> in their identifiers part.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">"::a",</span> <span class="pre">{"a":</span> <span class="pre">1,</span> <span class="pre">"foo:a":</span> <span class="pre">2,</span> <span class="pre">"bar:a":</span> <span class="pre">[3,</span> <span class="pre">4]}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">1</span></code> as <code class="docutils literal notranslate"><span class="pre">"::a"</span></code> uses the <a class="reference internal" href="#ni-escape-syntax"><span class="std std-ref">NI escape syntax</span></a>
to explicity reference the unqualified <code class="docutils literal notranslate"><span class="pre">a</span></code> property.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["path",</span> <span class="pre">":a",</span> <span class="pre">{"a":</span> <span class="pre">1,</span> <span class="pre">"foo:a":</span> <span class="pre">2,</span> <span class="pre">"bar:a":</span> <span class="pre">[3,</span> <span class="pre">4]}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[3,</span> <span class="pre">4]</span></code> as <code class="docutils literal notranslate"><span class="pre">":a"</span></code> uses the <a class="reference internal" href="#ni-escape-syntax"><span class="std std-ref">NI escape syntax</span></a>
to explicity reference the <code class="docutils literal notranslate"><span class="pre">"a"</span></code> property in the current namespace <code class="docutils literal notranslate"><span class="pre">"bar"</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="hops">
<span id="id5"></span><h3>Hops<a class="headerlink" href="#hops" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="hops-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hops</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">HOPS_SPEC(dict{&gt;1})</div>
<div class="line"><br/></div>
</div>
<div class="line">The HOPS_SPEC is a dictionary that takes the following keys:</div>
</div>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">datasets</span></code>: A list of strings with the dataset id
whitespace separated by the dataset alias. The database
aliases can be referenced in the <code class="docutils literal notranslate"><span class="pre">where</span></code> clause. The list
must contain at least one element.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">where</span></code>: An expression or a list of expressions. If it is
a list, then the expressions in the list will be wrapped
with the <code class="docutils literal notranslate"><span class="pre">and</span></code> function. The expressions are then
evaluated to perform the joins.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recurse</span></code>: OPTIONAL. A boolean. The default is false. If
true, then HOPS_SPEC should be traversed recursively. This
makes it possible for a hops expression to be recursive. The
output of one evaluation is fed as the input to the next
evaluation until there are no more output. At that point the
execution is moved on to the next HOPS_SPEC in the chain.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclude_root</span></code>: OPTIONAL. A boolean. The default is
false. If true, then the original input to the recursion
will not be included in the final output. This property is
only meaningful on a HOP_SPEC where <code class="docutils literal notranslate"><span class="pre">recurse</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_depth</span></code>: OPTIONAL. An integer. The default is
<code class="docutils literal notranslate"><span class="pre">10</span></code>. The recursion will stop after the given number of
recursion levels. A value of <code class="docutils literal notranslate"><span class="pre">2</span></code> means that the recursion will
happen at most two times. Set it to <code class="docutils literal notranslate"><span class="pre">null</span></code> if you want the
recursion will run until its output is exhausted. This
property is only meaningful on a HOP_SPEC where <code class="docutils literal notranslate"><span class="pre">recurse</span></code>
is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">return</span></code>: OPTIONAL. A string, or an expression, or not
specified. If it is a string, then it should refer to a
comma separated list of dataset aliases. In that case all
the values of those aliases will be returned. If it is an
expression then the expression is used as a template for
the hops result. In the template you can refer to the
dataset aliases and the interpolated result is returned. If
not specified, then it will return the last dataset alias
in the list. This is the default. It can only be specified
on the last HOP_SPEC argument. <code class="docutils literal notranslate"><span class="pre">return</span></code> cannot be used
with <code class="docutils literal notranslate"><span class="pre">recurse</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">track-dependencies</span></code>: OPTIONAL. A boolean. The default is
true. Can be used to disable
<a class="reference external" href="concepts.html#dependency-tracking">dependency tracking</a> for this
particular HOP_SPEC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trace</span></code>: OPTIONAL. A string. The default is not set.
If set, it is used to enable gathering of statistics for the execution of
the <code class="docutils literal notranslate"><span class="pre">hops</span></code> function during runtime. Currently this tracks the maximum
cardinality of the join statements in the <code class="docutils literal notranslate"><span class="pre">hops</span></code>. This information
will be available in the pipe execution log in the <code class="docutils literal notranslate"><span class="pre">pump-completed</span></code> and
<code class="docutils literal notranslate"><span class="pre">pump-failed</span></code> entities. The value of the <code class="docutils literal notranslate"><span class="pre">trace</span></code> property
should be unique to the particular <code class="docutils literal notranslate"><span class="pre">hops</span></code> function as it
will be used to key the statistics gathered about its execution.
The <code class="docutils literal notranslate"><span class="pre">trace</span></code> property should only be specified on the last HOP_SPEC argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subsets</span></code>: OPTIONAL. A dict where the keys must be dataset aliases
specified in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> property. The values must be valid subset
expressions, i.e. an <code class="docutils literal notranslate"><span class="pre">eq</span></code> DTL expression where the left hand side is
the index expression and the right hand side is the value that represents
the subset. Example: <code class="docutils literal notranslate"><span class="pre">["eq",</span> <span class="pre">"_S.category",</span> <span class="pre">72]</span></code></p>
<p>(<code class="docutils literal notranslate"><span class="pre">subsets</span></code> replaces the deprecated <code class="docutils literal notranslate"><span class="pre">prefilters</span></code> property)</p>
</li>
</ol>
<div class="line-block">
<div class="line">If multiple HOP_SPEC arguments are given, then the output of
a HOP_SPEC is passed on as the input to the next. This is a
convenient way of chaining hops together. It is mostly useful
when at least one of the HOP_SPEC arguments use recursion.</div>
</div>
<div class="line-block">
<div class="line">The join criteria are described by using the
<code class="docutils literal notranslate"><span class="pre">eq</span></code> function. All dataset aliases defined in the
<code class="docutils literal notranslate"><span class="pre">datasets</span></code> key have to be joined and all must by navigable
from the source entity. If that is not the case, then an error
will be raised at compile time.</div>
</div>
<div class="line-block">
<div class="line">The <code class="docutils literal notranslate"><span class="pre">hops</span></code> function produces a table inside, one column per
dataset alias. This table is the projected down into a list
of values by the <code class="docutils literal notranslate"><span class="pre">return</span></code> clause that is then returned by
the function.</div>
</div>
<div class="line-block">
<div class="line">Note that the result of the <code class="docutils literal notranslate"><span class="pre">hops</span></code> function is deterministic based on the
<code class="docutils literal notranslate"><span class="pre">_id</span></code> property of the entities processed within each dataset. I.e.. re-running a DTL transform with
a <code class="docutils literal notranslate"><span class="pre">hops</span></code> function using the exact same entities in the source and in the datasets in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> property
will yield the same order of the result. You should apply a <code class="docutils literal notranslate"><span class="pre">sorted*</span></code> function to the result to get a
particular order (for example on a particular property, or if you use the <code class="docutils literal notranslate"><span class="pre">return</span></code> keyword).</div>
</div>
<div class="admonition warning" id="hops-function-targeting-sink">
<p class="admonition-title">Warning</p>
<p>Hop-ing to the sink dataset is discouraged as there are some gotchas. In practice the pipe’s <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> must be set to <code class="docutils literal notranslate"><span class="pre">1</span></code> in order to guarantee that the hops is able to find the entities being written by the sink. Entities inside the current unflushed batch is not visible to the hops.</p>
</div>
</td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">"hops"</span><span class="p">,</span> <span class="p">{</span>
  <span class="s2">"datasets"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"Address a"</span><span class="p">,</span> <span class="s2">"Country c"</span><span class="p">],</span>
  <span class="s2">"return"</span><span class="p">:</span> <span class="s2">"a"</span><span class="p">,</span>
  <span class="s2">"where"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">"or"</span><span class="p">,</span>
       <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"a.type"</span><span class="p">,</span> <span class="s2">"SHIPPING"</span><span class="p">],</span>
       <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"a.type"</span><span class="p">,</span> <span class="s2">"BILLING"</span><span class="p">]],</span>
    <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S.address"</span><span class="p">,</span> <span class="s2">"a._id"</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"c._id"</span><span class="p">,</span> <span class="s2">"a.country"</span><span class="p">]</span>
  <span class="p">]}]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Join the source entity’s <code class="docutils literal notranslate"><span class="pre">address</span></code> property with the
<code class="docutils literal notranslate"><span class="pre">Address</span></code>’s <code class="docutils literal notranslate"><span class="pre">_id</span></code> property, and then the <code class="docutils literal notranslate"><span class="pre">Address</span></code>’s
<code class="docutils literal notranslate"><span class="pre">country</span></code> property with <code class="docutils literal notranslate"><span class="pre">Country</span></code>’s <code class="docutils literal notranslate"><span class="pre">_id</span></code> property.
Filter the addresses by type, so that only shipping and
billing addresses are included in the result. Return the
addresses found.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">"hops"</span><span class="p">,</span> <span class="p">{</span>
  <span class="s2">"datasets"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"Person p"</span><span class="p">],</span>
  <span class="s2">"where"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S.children"</span><span class="p">,</span> <span class="s2">"p._id"</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"p.gender"</span><span class="p">,</span> <span class="s2">"female"</span><span class="p">]],</span>
  <span class="s2">"recurse"</span><span class="p">:</span> <span class="n">true</span>
 <span class="p">},</span>
 <span class="p">{</span>
  <span class="s2">"datasets"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"Hobby h"</span><span class="p">],</span>
  <span class="s2">"where"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S.hobbies"</span><span class="p">,</span> <span class="s2">"h._id"</span><span class="p">],</span>
  <span class="s2">"return"</span><span class="p">:</span> <span class="s2">"h.name"</span>
 <span class="p">}]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Recursively retrieve the source entity’s daughters (and
granddaughters and so on) and then return the names of all
their hobbies. Please note that the result list is not automatically sorted on the <code class="docutils literal notranslate"><span class="pre">name</span></code> property - if order
matters, a <code class="docutils literal notranslate"><span class="pre">sorted</span></code> function must be applied before the result is used.</div>
<div class="line"><br/></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">"hops"</span><span class="p">,</span> <span class="p">{</span>
  <span class="s2">"datasets"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"orders o"</span><span class="p">,</span> <span class="s2">"product p"</span><span class="p">],</span>
  <span class="s2">"where"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S._id"</span><span class="p">,</span> <span class="s2">"o.customer_id"</span><span class="p">]</span>
    <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"o.lines.product_id"</span><span class="p">,</span> <span class="s2">"p.product_id"</span><span class="p">]</span>
  <span class="p">],</span>
  <span class="s2">"subsets"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"o"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"eq"</span><span class="p">,</span> <span class="s2">"_S.webshop_id"</span><span class="p">,</span> <span class="s2">"myshop"</span><span class="p">]</span>
  <span class="p">}</span>
 <span class="p">}]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Find the products that the customer has bought from a specific web shop. This example uses the <code class="docutils literal notranslate"><span class="pre">subsets</span></code>
property to reference a subset of the <code class="docutils literal notranslate"><span class="pre">orders</span></code> dataset, i.e. the orders placed in the <code class="docutils literal notranslate"><span class="pre">myshop</span></code> web shop.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="entity-lookups">
<h3>Entity lookups<a class="headerlink" href="#entity-lookups" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="lookup-entity-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lookup-entity</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DATASET_ID(string{1})</div>
<div class="line">ENTITY_ID(string{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns an entity in the given dataset.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lookup-entity",</span> <span class="pre">"code-table",</span> <span class="pre">"foo"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Looks up the entity with the <code class="docutils literal notranslate"><span class="pre">_id</span></code> property value of <code class="docutils literal notranslate"><span class="pre">foo</span></code> in the <code class="docutils literal notranslate"><span class="pre">code-table</span></code> dataset.</div>
<div class="line">Note that the dataset referenced has to be populated before the DTL transform can run.</div>
<div class="line">If the entity doesn’t exist in the dataset, <code class="docutils literal notranslate"><span class="pre">null</span></code> is returned.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function does not support dependency tracking, so if
the entity that is looked up changes then you may want to
reset the pipe. This will not happen automatically.</p>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="namespaced-identifiers">
<h3>Namespaced identifiers<a class="headerlink" href="#namespaced-identifiers" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="ni-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ni</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">NAMESPACE(string{0|1}),</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Translates input values to namespaced identifiers. Strings and URIs in VALUES
will be cast to namespaced identifiers. Note that no escaping is done on
the strings.</div>
<div class="line"><br/></div>
<div class="line">If NAMESPACE is omitted, then the global namespace is used.</div>
<div class="line"><br/></div>
<div class="line">URIs can be passed as values in VALUES only when NAMESPACE is not specified.
The URIs will be collapsed, i.e. the prefix part of URIs will be collapsed into
a namespace. If the prefix has been declared as a <a class="reference internal" href="configuration.html#namespaces"><span class="std std-ref">namespace</span></a>
then that namespace will be used, otherwise a generated namespace will be added.</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Constructs a new namespaced identifier.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni",</span> <span class="pre">"foo",</span> <span class="pre">"bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">This will produce a namespaced identifier <code class="docutils literal notranslate"><span class="pre">"~:foo:bar"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni",</span> <span class="pre">"bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">This will produce a namespaced identifier in the global namespace; <code class="docutils literal notranslate"><span class="pre">"~:bar"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni",</span> <span class="pre">"foo",</span> <span class="pre">["list",</span> <span class="pre">"bar",</span> <span class="pre">"x:y"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">This will produce a list of two namespaced identifiers: <code class="docutils literal notranslate"><span class="pre">["~:foo:bar",</span> <span class="pre">"~:foo:x:y"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni",</span> <span class="pre">"foo",</span> <span class="pre">["uri,</span> <span class="pre">"http://example.org/"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code> because URIs are not supported when NAMESPACE is specified.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni",</span> <span class="pre">["uri,</span> <span class="pre">"http://example.org/bar"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"~:_:bar"</span></code>, i.e. a NI with the <code class="docutils literal notranslate"><span class="pre">_</span></code> namespace and <code class="docutils literal notranslate"><span class="pre">bar</span></code> as identifier.
Note that the <code class="docutils literal notranslate"><span class="pre">http://example.org/</span></code> URI prefix is mapped to the  <code class="docutils literal notranslate"><span class="pre">_</span></code> namespace
by default.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni",</span> <span class="pre">["uri,</span> <span class="pre">"http://unknown.org/something/baz"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">If the <code class="docutils literal notranslate"><span class="pre">"http://unknown.org/something/"</span></code> URI prefix has not been declared as a
namespace then it will return <code class="docutils literal notranslate"><span class="pre">"~:your-pipe-1:baz"</span></code> if the current pipe id is
<code class="docutils literal notranslate"><span class="pre">your-pipe</span></code>. The <code class="docutils literal notranslate"><span class="pre">-1</span></code> part is a sequence counter, so if you introduce other
namespaces in your pipe they’ll be assigned unique namespace ids. If the URI prefix
had already been mapped to the <code class="docutils literal notranslate"><span class="pre">unknown</span></code> namespace then the expression would have
returned <code class="docutils literal notranslate"><span class="pre">"~:unknown:baz"</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-ni-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-ni</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a namespaced
identifier literal, or if it is a list, that the first element
in the list is a namespaced identifier.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-ni",</span> <span class="pre">["ni",</span> <span class="pre">"foo:bar"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-ni",</span> <span class="pre">"foo:bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-ni",</span> <span class="pre">["list",</span> <span class="pre">["ni",</span> <span class="pre">"foo:bar"],</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-ni",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">["ni",</span> <span class="pre">"foo:bar"]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="ni-ns-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">ni-ns</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Extracts the namespace part of namespaced identifiers. VALUES that
are not namespaced identifiers are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-ns",</span> <span class="pre">"~:foo:bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"foo"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-ns",</span> <span class="pre">["list",</span> <span class="pre">"~:foo:bar",</span> <span class="pre">"~:bar:baz"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["foo",</span> <span class="pre">"bar"]</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd" id="ni-id-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">ni-id</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Extracts the namespace id part of namespaced identifiers. VALUES that
are not namespaced identifiers are ignored.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-id",</span> <span class="pre">"~:foo:bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"bar"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-id",</span> <span class="pre">["list",</span> <span class="pre">"~:foo:bar",</span> <span class="pre">"~:bar:baz"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["bar",</span> <span class="pre">"baz"]</span></code></div>
</div>
</td>
</tr>
<tr class="row-even" id="ni-collapse-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">ni-collapse</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Uses the <code class="docutils literal notranslate"><span class="pre">namespaces.default</span></code> service metadata contents to produce a namespaced identifier from URLs.
VALUES that are not URLs are ignored (i.e. it accepts strings and URI parameters). If there is no longest
matching prefix in the <code class="docutils literal notranslate"><span class="pre">namespaces.default</span></code> settings, the functions will return a NI that contains the
original input (i.e. the The <code class="docutils literal notranslate"><span class="pre">http</span></code> and <code class="docutils literal notranslate"><span class="pre">https</span></code> prefixes are implicitly defined). Non-http URIs are not
supported.
NOTE: this function is experimental and is meant to work with the <code class="docutils literal notranslate"><span class="pre">global_defaults.symmetric_namespace_collapse</span></code>
service metadata option set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
</div>
<div class="line-block">
<div class="line"><br/></div>
<div class="line">Given this <code class="docutils literal notranslate"><span class="pre">namespaces.default</span></code> mapping in the service metadata:</div>
<div class="line"><br/></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code>
<code class="docutils literal notranslate"><span class="pre">"foo":</span> <span class="pre">"http://psi.test.no/",</span></code>
<code class="docutils literal notranslate"><span class="pre">"sesam_male":</span> <span class="pre">"http://sesam.io/people/male/",</span></code>
<code class="docutils literal notranslate"><span class="pre">"sesam_female":</span> <span class="pre">"http://sesam.io/people/female/",</span></code>
<code class="docutils literal notranslate"><span class="pre">"sesam":</span> <span class="pre">"http://sesam.io/people/"</span></code>
<code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">The following examples will produce this output:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-collapse",</span> <span class="pre">"http://psi.test.no/bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"~:foo:bar"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-collapse",</span> <span class="pre">["list",</span> <span class="pre">"http://psi.test.no/bar",</span> <span class="pre">"http://psi.test.no/baz"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["~:foo:bar",</span> <span class="pre">"~:foo:baz"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-collapse",</span> <span class="pre">"http://sesam.io/people/employees"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"~:sesam:employees"</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-collapse",</span> <span class="pre">"http://sesam.io/people/male/john"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"~:sesam_male:john"</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-collapse",</span> <span class="pre">"http://sesam.io/people/female/jane"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"~:sesam_female:jane"</span></code></div>
<div class="line"><br/></div>
<div class="line">The <code class="docutils literal notranslate"><span class="pre">http</span></code> and <code class="docutils literal notranslate"><span class="pre">https</span></code> namespaces are implicitly defined, so a URI that doesn’t match any prefix will work:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-collapse",</span> <span class="pre">"http://example.com/path"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"~:http://example.com/path"</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd" id="ni-expand-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">ni-expand</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Uses the <code class="docutils literal notranslate"><span class="pre">namespaces.default</span></code> service metadata contents to produce a URL string from a namespaced identifier.
VALUES that are not NIs are ignored. If there is no longest matching prefix in the <code class="docutils literal notranslate"><span class="pre">namespaces.default</span></code>
settings, the functions will return a string cast of the NI.
NOTE: this function is experimental and is meant to work with the <code class="docutils literal notranslate"><span class="pre">global_defaults.symmetric_namespace_collapse</span></code>
service metadata option set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
</div>
<div class="line-block">
<div class="line"><br/></div>
<div class="line">Given this <code class="docutils literal notranslate"><span class="pre">namespaces.default</span></code> mapping in the service metadata:</div>
<div class="line"><br/></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code>
<code class="docutils literal notranslate"><span class="pre">"foo":</span> <span class="pre">"http://psi.test.no/",</span></code>
<code class="docutils literal notranslate"><span class="pre">"sesam_male":</span> <span class="pre">"http://sesam.io/people/male/",</span></code>
<code class="docutils literal notranslate"><span class="pre">"sesam_female":</span> <span class="pre">"http://sesam.io/people/female/",</span></code>
<code class="docutils literal notranslate"><span class="pre">"sesam":</span> <span class="pre">"http://sesam.io/people/"</span></code>
<code class="docutils literal notranslate"><span class="pre">}</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">The following examples will produce this output:</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-expand",</span> <span class="pre">"~:foo:bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">http://psi.test.no/bar</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-expand",</span> <span class="pre">["list",</span> <span class="pre">"~:foo:bar",</span> <span class="pre">"~:foo:baz"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["http://psi.test.no/bar",</span> <span class="pre">"http://psi.test.no/baz"]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-expand",</span> <span class="pre">"~:sesam:employees"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"http://sesam.io/people/employees"</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-expand",</span> <span class="pre">"~:sesam_male:john"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"http://sesam.io/people/male/john"</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-expand",</span> <span class="pre">"~:sesam_female:jane"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"http://sesam.io/people/female/jane"</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-expand",</span> <span class="pre">"~:http://example.com/path"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"http://example.com/path"</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ni-expand",</span> <span class="pre">"~:unknown:path"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"unknown:path"</span></code></div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="lists">
<h3>Lists<a class="headerlink" href="#lists" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="list-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">list</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{&gt;=0})</div>
<div class="line"><br/></div>
</div>
<div class="line">Constructs a list of the values in VALUES.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">["list",</span> <span class="pre">"b"],</span> <span class="pre">"c"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">["b"],</span> <span class="pre">"c"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="is-list-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-list</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a list</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-list",</span> <span class="pre">["list",</span> <span class="pre">"foo:bar"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-list",</span> <span class="pre">"foo:bar"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-list",</span> <span class="pre">["list",</span> <span class="pre">["uri",</span> <span class="pre">"foo:bar"],</span> <span class="pre">12345]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-list",</span> <span class="pre">["dict",</span> <span class="pre">"1",</span> <span class="pre">2]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-list",</span> <span class="pre">["items",</span> <span class="pre">["dict",</span> <span class="pre">"1",</span> <span class="pre">2]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
</div>
</td>
</tr>
<tr class="row-even" id="first-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">first</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the first value in VALUES. If VALUES is not a sequence
of values, then VALUES is returned. If VALUES is empty, then
null is returned.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["first",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"a"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["first",</span> <span class="pre">"_S.tags"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the first tag in the source entity’s <code class="docutils literal notranslate"><span class="pre">tags</span></code> field.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="last-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">last</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the last value in VALUES. If VALUES is not a sequence
of values, then VALUES is returned. If VALUES is empty, then
null is returned.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["last",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"c"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["last",</span> <span class="pre">"_S.tags"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the last tag in the source entity’s <code class="docutils literal notranslate"><span class="pre">tags</span></code> field.</div>
</div>
</td>
</tr>
<tr class="row-even" id="in-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">in</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line">ITEMS(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if all values in VALUES exist in ITEMS,
i.e. if VALUES is a subset of ITEMS. Returns false if VALUES is null or empty.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">"a",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">"d",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">["list",</span> <span class="pre">10],</span> <span class="pre">10]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">["list"],</span> <span class="pre">10]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">null,</span> <span class="pre">["list",</span> <span class="pre">null]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">["list",</span> <span class="pre">null],</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">null,</span> <span class="pre">2]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"c"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["in",</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"c",</span> <span class="pre">"d"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="nth-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">nth</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">INDEX(integer-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the nth value in VALUES. If VALUES is not a sequence
of values, then VALUES is returned only if INDEX is 0. If VALUES is
empty or the INDEX is out of bounds, then null is returned.
Note that INDEX is zero-based.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["nth",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"b"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["nth",</span> <span class="pre">5,</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["nth",</span> <span class="pre">1,</span> <span class="pre">"_S.tags"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the second tag in the source entity’s <code class="docutils literal notranslate"><span class="pre">tags</span></code> field.</div>
</div>
</td>
</tr>
<tr class="row-even" id="slice-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">slice</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">START(integer-expression{1})</div>
<div class="line">END(integer-expression{0|1}}</div>
<div class="line">STRIDE(integer-expression{0|1}}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a slice of VALUES from START to END with STRIDE. If END is not specified, the slice will
continue to the end of VALUES. If no STRIDE is specified every element is returned (same as STRIDE=1).</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["slice",</span> <span class="pre">2,</span> <span class="pre">-2,</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">6]]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">4]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["slice",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">6]]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">6]</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd" id="insert-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">insert</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">INDEX(integer-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line">OBJECT(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Inserts OBJECT at INDEX in VALUES. A negative INDEX means starting from the end.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["insert",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["insert",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">4]]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">[3,</span> <span class="pre">4],</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["insert",</span> <span class="pre">-2,</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3],</span> <span class="pre">4]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></div>
</div>
</td>
</tr>
<tr class="row-even" id="combine-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">combine</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{&gt;=1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Combines the VALUES into a single list.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["combine",</span> <span class="pre">null]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["combine",</span> <span class="pre">1]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["combine",</span> <span class="pre">1,</span> <span class="pre">4]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">4]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["combine",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">3]]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["combine",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">["list",</span> <span class="pre">4]]]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">[4]]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["combine",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">4],</span> <span class="pre">5]</span></code></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5]</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd" id="flatten-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">flatten</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Flattens its input values in VALUES. Note that it does <em>not</em> do so
recursively. Constructs a new list.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["flatten",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">4]]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["flatten",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">["list",</span> <span class="pre">4],</span> <span class="pre">5]]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">[4],</span> <span class="pre">5]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["flatten",</span> <span class="pre">["list",</span> <span class="pre">"_S.sisters",</span> <span class="pre">"_S.brothers"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a list that contains the sisters and brothers.</div>
</div>
</td>
</tr>
<tr class="row-even" id="filter-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">filter</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Filters out the the values in VALUES for which the FUNCTION expression
does <em>not</em> evaluate to <em>true</em>.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["filter",</span> <span class="pre">["gt",</span> <span class="pre">"_.age",</span> <span class="pre">42],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"age":</span> <span class="pre">30},</span> <span class="pre">{"age":</span> <span class="pre">50},</span> <span class="pre">{"age":</span> <span class="pre">40}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"age":</span> <span class="pre">50}]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["filter",</span> <span class="pre">["gt",</span> <span class="pre">"_.amount",</span> <span class="pre">100],</span> <span class="pre">"_S.orders"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the order entities that have an amount of more than 100.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="min-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the minimum value in VALUES. If FUNCTION is given, the
function is evaluated for each value in VALUES to, and the return
value is used to for ordering to figure out what is the minimal value.
Note that even though FUNCTION is given it is the value in VALUES that
is returned.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Values of different types are ordered using
<a class="reference internal" href="entitymodel.html#mixed-type-ordering"><span class="std std-ref">mixed type ordering</span></a>.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["min",</span> <span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["min",</span> <span class="pre">["list",</span> <span class="pre">"b",</span> <span class="pre">2,</span> <span class="pre">"a",</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["min",</span> <span class="pre">["list",</span> <span class="pre">{"x":</span> <span class="pre">1},</span> <span class="pre">"b",</span> <span class="pre">"a"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"a"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["min",</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"b",</span> <span class="pre">"A",</span> <span class="pre">"a"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"A"</span></code> (Based on <a class="reference external" href="https://ascii.cl/">ASCII ordering</a>).</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["min",</span> <span class="pre">"_.amount",</span> <span class="pre">"_S.orders"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the order with the lowest amount.</div>
</div>
</td>
</tr>
<tr class="row-even" id="max-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the maximum value in VALUES. If FUNCTION is given, the
function is evaluated for each value in VALUES to, and the return
value is used to for ordering to figure out what is the maximal value.
Note that even though FUNCTION is given it is the value in VALUES that
is returned.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Values of different types are ordered using
<a class="reference internal" href="entitymodel.html#mixed-type-ordering"><span class="std std-ref">mixed type ordering</span></a>.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["max",</span> <span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">5</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["max",</span> <span class="pre">["list",</span> <span class="pre">"b",</span> <span class="pre">2,</span> <span class="pre">"a",</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">"b"</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["max",</span> <span class="pre">["list",</span> <span class="pre">{"x":</span> <span class="pre">1},</span> <span class="pre">"b",</span> <span class="pre">2,</span> <span class="pre">"a"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"x":</span> <span class="pre">1}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["max",</span> <span class="pre">"_.amount",</span> <span class="pre">"_S.orders"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the order with the highest amount.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="sum-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">sum</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the sum of the numeric values in VALUES. Any non-numeric
values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sum",</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">12</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sum",</span> <span class="pre">"_S.amounts"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the sum of the amounts.</div>
</div>
</td>
</tr>
<tr class="row-even" id="count-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">count</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the number of elements in VALUES.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["count",</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">3</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["count",</span> <span class="pre">null]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">0</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["count",</span> <span class="pre">123]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">1</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["count",</span> <span class="pre">"_S.orders"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the the number of orders.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="range-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">range</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">START(integer-expression{1})</div>
<div class="line">STOP(integer-expression{1})</div>
<div class="line">STEP(integer-expression{0|1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of integers ranging from START (inclusive) to STOP
(exclusive) in STEP increments. Note that STEP cannot be 0 and all
arguments must be integers or integer expressions.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["range",</span> <span class="pre">0,</span> <span class="pre">4]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["range",</span> <span class="pre">4,</span> <span class="pre">0,</span> <span class="pre">-1]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">3,</span> <span class="pre">2,</span> <span class="pre">1]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="enumerate-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">enumerate</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">START(integer-expression{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Enumerates the values by returning dictionaries with <code class="docutils literal notranslate"><span class="pre">key</span></code>
and <code class="docutils literal notranslate"><span class="pre">value</span></code> keys. <code class="docutils literal notranslate"><span class="pre">value</span></code> contains the value and <code class="docutils literal notranslate"><span class="pre">key</span></code> the
enumerator count. The enumeration counter starts at START and uses an
increment of 1. The default value of START is 0.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["enumerate",</span> <span class="pre">"a"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">0,</span> <span class="pre">"value":</span> <span class="pre">"a"}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["enumerate",</span> <span class="pre">1,</span> <span class="pre">"a"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">1,</span> <span class="pre">"value":</span> <span class="pre">"a"}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["enumerate",</span> <span class="pre">["list",</span> <span class="pre">17,</span> <span class="pre">32,</span> <span class="pre">21]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"key":</span> <span class="pre">0,</span> <span class="pre">"value":</span> <span class="pre">17},</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">1,</span> <span class="pre">"value":</span> <span class="pre">32},</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">2,</span> <span class="pre">"value":</span> <span class="pre">21}]</span></code>.</div>
<div class="line"><br/></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["enumerate",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">17,</span> <span class="pre">32,</span> <span class="pre">21]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"key":</span> <span class="pre">2,</span> <span class="pre">"value":</span> <span class="pre">17},</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">3,</span> <span class="pre">"value":</span> <span class="pre">32},</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">4,</span> <span class="pre">"value":</span> <span class="pre">21}]</span></code>.</div>
</div>
</div>
</td>
</tr>
<tr class="row-odd" id="distinct-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">distinct</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns a list of distinct values in VALUES, i.e. it returns a list
where duplicates have been removed from VALUES. If FUNCTION is given, then
function is evaluated for each value in VALUES, and the return
value is used to check for duplicates. Note that even though FUNCTION is
given it is the value in VALUES that is returned.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["distinct",</span> <span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">4,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">3]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["distinct",</span> <span class="pre">"_S.tags"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a deduplicated list of tags.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["distinct",</span> <span class="pre">"_.ean",</span> <span class="pre">"_S.orders.line_item"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a list of order lines, but only one per unique EAN, i.e. product
number.</div>
</div>
</td>
</tr>
<tr class="row-even" id="sorted-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">sorted</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns VALUES sorted in ascending order. If FUNCTION is given, then
function is evaluated for each value in VALUES, and the return
value is used as the sort key. Note that even though FUNCTION is
given it is the value in VALUES that is returned. Note that this function
does <em>not</em> remove duplicates. Use <code class="docutils literal notranslate"><span class="pre">distinct</span></code> to do that. If VALUES is not
a list, then VALUES is returned.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Values of different types are ordered using
<a class="reference internal" href="entitymodel.html#mixed-type-ordering"><span class="std std-ref">mixed type ordering</span></a>.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted",</span> <span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">4,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">4,</span> <span class="pre">5]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted",</span> <span class="pre">["list",</span> <span class="pre">"b",</span> <span class="pre">2,</span> <span class="pre">{"x":</span> <span class="pre">1},</span> <span class="pre">"a",</span> <span class="pre">4]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">4,</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">{"x":</span> <span class="pre">1}]</span></code>.</div>
<div class="line">Note that the values are sorted using <a class="reference internal" href="entitymodel.html#mixed-type-ordering"><span class="std std-ref">mixed type ordering</span></a>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"x":</span> <span class="pre">1},</span> <span class="pre">{"x":</span> <span class="pre">"abc"},</span> <span class="pre">{"x":</span> <span class="pre">2}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"x":</span> <span class="pre">1},</span> <span class="pre">{"x":</span> <span class="pre">2},</span> <span class="pre">{"x":</span> <span class="pre">"abc"}]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted",</span> <span class="pre">"_.age",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">30},</span> <span class="pre">{"age":</span> <span class="pre">50},</span> <span class="pre">{"age":</span> <span class="pre">20}]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"age":</span> <span class="pre">20},</span> <span class="pre">{"age":</span> <span class="pre">30},</span> <span class="pre">{"age":</span> <span class="pre">50}]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted",</span> <span class="pre">"_S.tags"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the tags in ascending order.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="sorted-descending-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">sorted-descending</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns VALUES sorted in descending order. If FUNCTION is given, then
function is evaluated for each value in VALUES, and the return
value is used as the sort key. Note that even though FUNCTION is
given it is the value in VALUES that is returned. Note that this function
does <em>not</em> remove duplicates. Use <code class="docutils literal notranslate"><span class="pre">distinct</span></code> to do that. If VALUES is not
a list, then VALUES is returned.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Values of different types are ordered using
<a class="reference internal" href="entitymodel.html#mixed-type-ordering"><span class="std std-ref">mixed type ordering</span></a>.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted-descending",</span> <span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">4,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[5,</span> <span class="pre">4,</span> <span class="pre">4,</span> <span class="pre">3,</span> <span class="pre">2]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted-descending",</span> <span class="pre">["list",</span> <span class="pre">"b",</span> <span class="pre">2,</span> <span class="pre">{"x":</span> <span class="pre">1},</span> <span class="pre">"a",</span> <span class="pre">4]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"x":</span> <span class="pre">1},</span> <span class="pre">"b",</span> <span class="pre">"a",</span> <span class="pre">4,</span> <span class="pre">2]</span></code>.</div>
<div class="line">Note that the values are sorted using <a class="reference internal" href="entitymodel.html#mixed-type-ordering"><span class="std std-ref">mixed type ordering</span></a>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted-descending",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"x":</span> <span class="pre">1},</span> <span class="pre">{"x":</span> <span class="pre">"abc"},</span> <span class="pre">{"x":</span> <span class="pre">2}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"x":</span> <span class="pre">"abc"},</span> <span class="pre">{"x":</span> <span class="pre">2},</span> <span class="pre">{"x":</span> <span class="pre">1}]</span></code></div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted-descending",</span> <span class="pre">"_.age",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"age":</span> <span class="pre">30},</span> <span class="pre">{"age":</span> <span class="pre">50},</span> <span class="pre">{"age":</span> <span class="pre">20}]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"age":</span> <span class="pre">50},</span> <span class="pre">{"age":</span> <span class="pre">30},</span> <span class="pre">{"age":</span> <span class="pre">20}]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sorted-descending",</span> <span class="pre">"_S.tags"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns the tags in descending order.</div>
</div>
</td>
</tr>
<tr class="row-even" id="reversed-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">reversed</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns VALUES in reversed order.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["reversed",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">3,</span> <span class="pre">2]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">3,</span> <span class="pre">1]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["reversed",</span> <span class="pre">["sorted",</span> <span class="pre">"_S.tags"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns list of tags sorted in descending order.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="map-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">map</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">FUNCTION(function-expression(1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">For each value in VALUES apply the FUNCTION function and construct a new
list of the return values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["map",</span> <span class="pre">["lower",</span> <span class="pre">"_."],</span> <span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["map",</span> <span class="pre">["distinct",</span> <span class="pre">"_."],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"A"],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[["A"],</span> <span class="pre">["B",</span> <span class="pre">"C"]]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="map-values-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">map-values</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE_FUNCTION(function-expression(1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">For each dictionary in VALUES apply the VALUE_FUNCTION to the
dictionary’s values. The function maps over the values of dictionaries
and returns a list of mapped values. Non-dictionary values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["map-values",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lower",</span> <span class="pre">"_."],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key1":</span> <span class="pre">"A",</span> <span class="pre">"key2":</span> <span class="pre">"B"}]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["map-values",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lower",</span> <span class="pre">"_."],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"key1":</span> <span class="pre">"A",</span> <span class="pre">"key2":</span> <span class="pre">"B"},</span> <span class="pre">100,</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key1":</span> <span class="pre">"B",</span> <span class="pre">"key2":</span> <span class="pre">"A",</span> <span class="pre">"key3":</span> <span class="pre">"C"}]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["a",</span> <span class="pre">"b",</span> <span class="pre">"b",</span> <span class="pre">"a",</span> <span class="pre">"c"]</span></code>.</div>
<div class="line"><br/></div>
</div>
</td>
</tr>
<tr class="row-odd" id="map-dict-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">map-dict</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">KEY_FUNCTION(function-expression(1}</div>
<div class="line">VALUE_FUNCTION(function-expression(1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">For each dictionary in VALUES construct a new dictionary by applying
the KEY_FUNCTION function and the VALUE_FUNCTION to all its key+value
pairs. If the KEY_FUNCTION returns a non-string value then the key+value
pair is ignored. Empty dictionaries are not returned.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["map-dict",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["upper",</span> <span class="pre">"_."],</span> <span class="pre">["plus",</span> <span class="pre">1,</span> <span class="pre">"_."],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"B":</span> <span class="pre">2}]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"A":</span> <span class="pre">2,</span> <span class="pre">"B":</span> <span class="pre">3}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["map-dict",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["if",</span> <span class="pre">["gt",</span> <span class="pre">["length",</span> <span class="pre">"_."],</span> <span class="pre">2],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["concat",</span> <span class="pre">"x:",</span> <span class="pre">"_."]],</span> <span class="pre">"_.",</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"abc":</span> <span class="pre">1,</span> <span class="pre">"ab":</span> <span class="pre">2,</span> <span class="pre">"abcd":</span> <span class="pre">3},</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"def":</span> <span class="pre">4},</span> <span class="pre">{"gh":</span> <span class="pre">5}]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"x:abc":</span> <span class="pre">1,</span> <span class="pre">"x:abcd":</span> <span class="pre">3},</span> <span class="pre">{"x:def":</span> <span class="pre">4}]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="group-by-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">group-by</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">KEY_FUNCTION(function-expression(0|1}</div>
<div class="line">STRING_FUNCTION(function-expression(0|1}</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Groups the values in VALUES by the result of executing the KEY_FUNCTION
function on them. Returns a dictionary, where the key is the
group key and the value is the list of values in VALUES that were
grouped under that key.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The keys in the returned dict are strings only. The reason
is that the <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">entity data model</span></a>
(and <a class="reference external" href="http://json.org/">JSON</a>) only supports string keys.</p>
<p>The group keys are <a class="reference internal" href="entitymodel.html#extension-types"><span class="std std-ref">transit encoded</span></a>
JSON strings, i.e. the same kind of strings generated by the
<a class="reference internal" href="#json-transit-dtl-function"><span class="std std-ref">json-transit</span></a> function.</p>
<p>If you do not want the keys to be transit encoded JSON, then you have the
option of specifying STRING_FUNCTION, a function that then will be used to
generate the string key.</p>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["group-by",</span> <span class="pre">["length",</span> <span class="pre">"_."],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"phi",</span> <span class="pre">"alpha",</span> <span class="pre">"rho"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"3":</span> <span class="pre">["phi",</span> <span class="pre">"rho"],</span> <span class="pre">"5":</span> <span class="pre">["alpha"]}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["group-by",</span> <span class="pre">"_.ean",</span> <span class="pre">"_S.orders.line_item"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns order lines grouped by EAN, i.e. product number.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["group-by",</span> <span class="pre">"_.gender",</span> <span class="pre">"_S.people"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns a dictionary of people grouped by their gender.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["group-by",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["upper",</span> <span class="pre">"_."],</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"\"A\"":</span> <span class="pre">["a"],</span> <span class="pre">"\"B\"":</span> <span class="pre">["b"]}</span></code>. The keys are
transit-encoded JSON strings.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["group-by",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["upper",</span> <span class="pre">"_."],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["string",</span> <span class="pre">"_."],</span> <span class="pre">["list",</span> <span class="pre">"a",</span> <span class="pre">"b"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"A":</span> <span class="pre">["a"],</span> <span class="pre">"B":</span> <span class="pre">["b"]}</span></code>. Same as above, but we specify
a STRING_FUNCTION function that creates string keys.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="sets">
<h3>Sets<a class="headerlink" href="#sets" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="union-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">union</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES1(value-expression{1})</div>
<div class="line">VALUES2(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the union of the two sets VALUES1 and VALUES2, i.e. the elements that
are either in VALUES1 or in VALUES2. The two arguments do not have to be real
sets, but will be coerced into sets before applying the union operator. The
return type is a list of distinct values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["union",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B"],</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["A",</span> <span class="pre">"B",</span> <span class="pre">"C"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["union",</span> <span class="pre">"A",</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["A",</span> <span class="pre">"B",</span> <span class="pre">"C"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="intersection-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">intersection</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES1(value-expression{1})</div>
<div class="line">VALUES2(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the intersection of the two sets VALUES1 and VALUES2, i.e. the elements
that are in both VALUES1 and VALUES2. The two arguments do not have to be real sets,
but will be coerced into sets before applying the intersection operator. The
return type is a list of distinct values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["intersection",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B"],</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["B"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["intersection",</span> <span class="pre">"B",</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["B"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["intersection",</span> <span class="pre">"A",</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="intersects-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">intersects</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES1(value-expression{1})</div>
<div class="line">VALUES2(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Same as <code class="docutils literal notranslate"><span class="pre">intersection</span></code>, but returns a boolean value. Returns true if the two
arguments have elements in common.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["intersects",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B"],</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["intersects",</span> <span class="pre">"B",</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["intersects",</span> <span class="pre">"A",</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">false</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="difference-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">difference</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES1(value-expression{1})</div>
<div class="line">VALUES2(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the difference of the two sets VALUES1 and VALUES2, i.e. the elements
that are in VALUES1, but not in VALUES2. The two arguments do not have to be real
sets, but will be coerced into sets before applying the difference operator. The
return type is a list of distinct values.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["difference",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B"],</span> <span class="pre">["list",</span> <span class="pre">"B"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["A"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["difference",</span> <span class="pre">"A",</span> <span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">"C"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["A"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["difference",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B",</span> <span class="pre">"C",</span> <span class="pre">"D"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">"B",</span> <span class="pre">"E"]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["C",</span> <span class="pre">"D"]</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="dictionaries">
<h3>Dictionaries<a class="headerlink" href="#dictionaries" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="items-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">items</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DICTS(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of dictionaries in and outputs a list of key+value tuples.
For each key+value pair in the dictionaries one pair is added to the output
list. Non-dictionary values are ignored. Note that entities are dictionaries,
so you can use this function with them.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["items",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"B":</span> <span class="pre">2},</span> <span class="pre">{"C":</span> <span class="pre">3}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[["A",</span> <span class="pre">1],</span> <span class="pre">["B",</span> <span class="pre">2],</span> <span class="pre">["C",</span> <span class="pre">3]]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["items",</span> <span class="pre">["list",</span> <span class="pre">"X",</span> <span class="pre">123,</span> <span class="pre">{"A":</span> <span class="pre">1}]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[["A",</span> <span class="pre">1]]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="dict-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">dict</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">EMPTY{0} or ITEMS(value-expression{1}) or (KEY, VALUE){&gt;=0)</div>
<div class="line"><br/></div>
</div>
<div class="line">If EMPTY, i.e. no arguments given, then an empty dict (<code class="docutils literal notranslate"><span class="pre">{}</span></code>) is returned.</div>
<div class="line"><br/></div>
<div class="line">If ITEMS specified, then it takes a list of key+value pair tuples and
returns a dictionary with those tuples as keys and values. Note that
last key  wins. Values that are not two-element tuples are ignored.</div>
<div class="line"><br/></div>
<div class="line">If KEY+VALUE pairs are given, then a new dict with those pairs as keys and
values. Note that last key  wins.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["dict"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["dict",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">1],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"B",</span> <span class="pre">2],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">"C",</span> <span class="pre">3]]]</span></code></div>
<div class="line"><br/></div>
</div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"B":</span> <span class="pre">2,</span> <span class="pre">"C":</span> <span class="pre">3}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["dict",</span> <span class="pre">["list",</span> <span class="pre">"X",</span> <span class="pre">123,</span> <span class="pre">["list",</span> <span class="pre">"A",</span> <span class="pre">1]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"A":</span> <span class="pre">1}</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["dict",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">"a",</span> <span class="pre">["upper",</span> <span class="pre">"a"],</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["lower",</span> <span class="pre">"B"],</span> <span class="pre">"B"]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"a":</span> <span class="pre">"A",</span> <span class="pre">"b":</span> <span class="pre">"B"}</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="is-dict-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">is-dict</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Boolean function that returns true if value is a dictionary or if it is a list, that the first element</div>
<div class="line">in the list is a dictionary</div>
<div class="line"><br/></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-dict",</span> <span class="pre">"_S."]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-dict",</span> <span class="pre">["list",</span> <span class="pre">{"a":</span> <span class="pre">1},</span> <span class="pre">123]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns true.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-dict",</span> <span class="pre">["list",</span> <span class="pre">123,</span> <span class="pre">{"a":</span> <span class="pre">1}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["is-dict",</span> <span class="pre">"abc"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns false</div>
</div>
</td>
</tr>
<tr class="row-odd" id="keys-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">keys</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DICTS(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of dictionaries in and outputs a list of keys.
For each key+value pair in the dictionaries one key is added to the output
list. Non-dict values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["keys",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"B":</span> <span class="pre">2},</span> <span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"C":</span> <span class="pre">3}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["A",</span> <span class="pre">"B",</span> <span class="pre">"A",</span> <span class="pre">"C"]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["keys",</span> <span class="pre">["list",</span> <span class="pre">"X",</span> <span class="pre">123,</span> <span class="pre">{"A":</span> <span class="pre">1}]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">["A"]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="values-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">values</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DICTS(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of dictionaries in and outputs a list of values.
For each key+value pair in the dictionaries one value is added to the output
list. Non-dict values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["values",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"B":</span> <span class="pre">2},</span> <span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"C":</span> <span class="pre">3}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">1,</span> <span class="pre">3]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["values",</span> <span class="pre">["list",</span> <span class="pre">"X",</span> <span class="pre">123,</span> <span class="pre">{"A":</span> <span class="pre">1}]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1]</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="key-values-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">key-values</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DICTS(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of dictionaries in and outputs a list of dictionaries with “key”
and “value” keys. For each key+value pair in the dictionaries one dict is added
to the output list. Non-dictionary values are ignored. Note that entities are
dictionaries, so you can use this function with them.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["key-values",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">{"A":</span> <span class="pre">1,</span> <span class="pre">"B":</span> <span class="pre">2},</span> <span class="pre">123,</span> <span class="pre">{"C":</span> <span class="pre">3,</span> <span class="pre">"A":</span> <span class="pre">1}]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[{"key":</span> <span class="pre">"A",</span> <span class="pre">"value":</span> <span class="pre">1},</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">"B",</span> <span class="pre">"value":</span> <span class="pre">2},</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">"C",</span> <span class="pre">"value":</span> <span class="pre">3},</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">"A",</span> <span class="pre">"value":</span> <span class="pre">1}]</span></code>.</div>
<div class="line"><br/></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["key-values",</span> <span class="pre">{"hello":</span> <span class="pre">"world"}]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">{"key":</span> <span class="pre">"hello",</span> <span class="pre">"value":</span> <span class="pre">"world"}</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="tuples">
<h3>Tuples<a class="headerlink" href="#tuples" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="tuples-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tuples</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUES(value-expression{&gt;0})</div>
<div class="line"><br/></div>
</div>
<div class="line">Constructs a list of tuples, the product of the values given in the
arguments. The tuple length is equal to the number
of function arguments. <code class="docutils literal notranslate"><span class="pre">null</span></code> values are ignored.</div>
<div class="line"><br/></div>
<div class="line">This function is a good choice when you need to do joins on
composite keys.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["tuples"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["tuples",</span> <span class="pre">"a",</span> <span class="pre">"b",</span> <span class="pre">"c"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[["a",</span> <span class="pre">"b",</span> <span class="pre">"c"]]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["tuples",</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[[1,</span> <span class="pre">3],</span> <span class="pre">[2,</span> <span class="pre">3]]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["tuples",</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">null,</span> <span class="pre">4,</span> <span class="pre">5]]</span></code></div>
<div class="line"><br/></div>
</div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[[1,</span> <span class="pre">3],</span> <span class="pre">[1,</span> <span class="pre">4],</span> <span class="pre">[1,</span> <span class="pre">5],</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">3],</span> <span class="pre">[2,</span> <span class="pre">4],</span> <span class="pre">[2,</span> <span class="pre">5]]</span></code>. The <code class="docutils literal notranslate"><span class="pre">null</span></code> value was ignored.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="hashing">
<h3>Hashing<a class="headerlink" href="#hashing" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="hash128-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hash128</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">ALGORITM(“murmur3”)</div>
<div class="line">SEED(integer-expression{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Generates 128 bit integer hashes from bytes and strings. Values of
other types are ignored. This function can be used to generate
content hashes. The only supported algoritm is “murmur3”
(<a class="reference external" href="https://en.wikipedia.org/wiki/MurmurHash">MurmurHash3</a>).</div>
</div>
<div class="line-block">
<div class="line">The function takes an optional seed argument. The seed
can be used to randomize the hash function.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["hash128",</span> <span class="pre">"murmur3",</span> <span class="pre">"abc"]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">79267961763742113019008347020647561319</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["hash128",</span> <span class="pre">"murmur3",</span> <span class="pre">["combine",</span> <span class="pre">"abc",</span> <span class="pre">123,</span> <span class="pre">"def"]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[[79267961763742113019008347020647561319,</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">114697464648834432121201791580882983835]]</span></code>.</div>
</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="math">
<h3>Math<a class="headerlink" href="#math" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">plus</span></code>, <code class="docutils literal notranslate"><span class="pre">minus</span></code>, <code class="docutils literal notranslate"><span class="pre">multiply</span></code>, <code class="docutils literal notranslate"><span class="pre">divide</span></code>, <code class="docutils literal notranslate"><span class="pre">mod</span></code> and <code class="docutils literal notranslate"><span class="pre">pow</span></code> functions are <code class="docutils literal notranslate"><span class="pre">map</span></code>-style functions that apply the first
argument to one or more values. For “natural order” math operators that operate on single numbers, use the symbolic
equivalents <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code> and <code class="docutils literal notranslate"><span class="pre">^</span></code>. If the argument(s) to the natural order functions
are lists, the first value is used. If either argument evaluates to <code class="docutils literal notranslate"><span class="pre">null</span></code>, the result will also be
<code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="plus-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plus</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">INCREMENT(numeric-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of <code class="docutils literal notranslate"><span class="pre">VALUES</span></code> and increments them by <code class="docutils literal notranslate"><span class="pre">INCREMENT</span></code>. Non-numeric
values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["plus",</span> <span class="pre">10,</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[11,</span> <span class="pre">12,</span> <span class="pre">13]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["plus",</span> <span class="pre">10,</span> <span class="pre">10]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">20</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="plus-symbol-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE1(value-expression{1})</div>
<div class="line">VALUE2(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the result of <code class="docutils literal notranslate"><span class="pre">VALUE1</span> <span class="pre">+</span> <span class="pre">VALUE2</span></code>. The result is always a single number (or <code class="docutils literal notranslate"><span class="pre">null</span></code>).</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["+",</span> <span class="pre">10,</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">13</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["+",</span> <span class="pre">10,</span> <span class="pre">["list",</span> <span class="pre">10,</span> <span class="pre">20,</span> <span class="pre">30]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">20</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="minus-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">minus</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DECREMENT(numeric-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of <code class="docutils literal notranslate"><span class="pre">VALUES</span></code> and decrements them by <code class="docutils literal notranslate"><span class="pre">DECREMENT</span></code>. Non-numeric
values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["minus",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["minus",</span> <span class="pre">10,</span> <span class="pre">12]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="minus-symbol-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE1(value-expression{1})</div>
<div class="line">VALUE2(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the result of <code class="docutils literal notranslate"><span class="pre">VALUE1</span> <span class="pre">-</span> <span class="pre">VALUE2</span></code>. The result is always a single number (or <code class="docutils literal notranslate"><span class="pre">null</span></code>).</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["-",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">0</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["-",</span> <span class="pre">10,</span> <span class="pre">12]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">-2</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="divide-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">divide</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DIVISOR(numeric-expression{1})</div>
<div class="line">DIVIDENDS(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of <code class="docutils literal notranslate"><span class="pre">DIVIDENDS</span></code> and divides them by <code class="docutils literal notranslate"><span class="pre">DIVISOR</span></code>. Non-numeric
values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["divide",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["divide",</span> <span class="pre">10,</span> <span class="pre">20]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["divide",</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">8],</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">1.5</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="divide-symbol-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DIVIDEND(numeric-expression{1})</div>
<div class="line">DIVISOR(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the result of <code class="docutils literal notranslate"><span class="pre">DIVIDEND</span> <span class="pre">/</span> <span class="pre">DIVISOR</span></code>. The result is always a single number (or <code class="docutils literal notranslate"><span class="pre">null</span></code>).</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["/",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">6,</span> <span class="pre">8]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">0.5</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["/",</span> <span class="pre">10,</span> <span class="pre">20]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">0.5</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["/",</span> <span class="pre">["list",</span> <span class="pre">-3,</span> <span class="pre">10,</span> <span class="pre">100],</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">-1.5</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["/",</span> <span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">8],</span> <span class="pre">["list",</span> <span class="pre">-2,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">-1.5</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["/",</span> <span class="pre">5,</span> <span class="pre">0]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">null</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="multiply-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">multiply</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">MULTIPLIER(numeric-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of <code class="docutils literal notranslate"><span class="pre">VALUES</span></code> and multiplies them by <code class="docutils literal notranslate"><span class="pre">MULTIPLIER</span></code>. Non-numeric
values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["multiply",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">8,</span> <span class="pre">12]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["multiply",</span> <span class="pre">10,</span> <span class="pre">20]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">200</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["multiply",</span> <span class="pre">2.3,</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">4.6</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="multiply-symbol-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(value-expression{1})</div>
<div class="line">MULTIPLIER(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Returns the result of the expression <code class="docutils literal notranslate"><span class="pre">VALUE</span> <span class="pre">*</span> <span class="pre">MULTIPLIER</span></code></div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["*",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">4</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["*",</span> <span class="pre">10,</span> <span class="pre">20]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">200</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["*",</span> <span class="pre">["list",</span> <span class="pre">2.3,</span> <span class="pre">14],</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">4.6</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="mod-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">mod</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DIVISOR(numeric-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of <code class="docutils literal notranslate"><span class="pre">VALUES</span></code> and finds the remainder of dividing them
by <code class="docutils literal notranslate"><span class="pre">DIVISOR</span></code>. Non-numeric values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["mod",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">0]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["mod",</span> <span class="pre">3,</span> <span class="pre">5]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="mod-symbol-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DIVIDEND(numeric-expression{1})</div>
<div class="line">DIVISOR(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a <code class="docutils literal notranslate"><span class="pre">DIVIDEND</span></code> value finds the remainder of dividing them by <code class="docutils literal notranslate"><span class="pre">DIVISOR</span></code>:
<code class="docutils literal notranslate"><span class="pre">DIVIDEND</span> <span class="pre">%</span> <span class="pre">DIVISOR</span></code>. Non-numeric values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["%",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">0</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["%",</span> <span class="pre">5,</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["%",</span> <span class="pre">["list",</span> <span class="pre">5,</span> <span class="pre">8,</span> <span class="pre">9],</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["%",</span> <span class="pre">["list",</span> <span class="pre">5,</span> <span class="pre">8,</span> <span class="pre">9],</span> <span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">-2.3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="pow-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">pow</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">EXPONENT(numeric-expression{1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of <code class="docutils literal notranslate"><span class="pre">VALUES</span></code> and raises them to the power of <code class="docutils literal notranslate"><span class="pre">EXPONENT</span></code>.
Non-numeric values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["pow",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">25,</span> <span class="pre">36]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["pow",</span> <span class="pre">3,</span> <span class="pre">10]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="pow-symbol-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(value-expression{1})</div>
<div class="line">EXPONENT(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a <code class="docutils literal notranslate"><span class="pre">VALUE</span></code> and raises it to the power of <code class="docutils literal notranslate"><span class="pre">EXPONENT</span></code>:
<code class="docutils literal notranslate"><span class="pre">VALUE^EXPONENT</span></code>. The result is always a single value (or <code class="docutils literal notranslate"><span class="pre">null</span></code>).
Non-numeric values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["^",</span> <span class="pre">2,</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">5,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">4</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["^",</span> <span class="pre">5,</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">25</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["^",</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">8,</span> <span class="pre">9],</span> <span class="pre">3]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">8</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["^",</span> <span class="pre">["list",</span> <span class="pre">2,</span> <span class="pre">8,</span> <span class="pre">9],</span> <span class="pre">["list",</span> <span class="pre">3,</span> <span class="pre">-2.3]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">8</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="round-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">round</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DIGITS(numeric-expression{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and optionally rounds them to the number of DIGITS and then returns the nearest integer
digit (adjusted for the number of digits specified, default is 0). Non-numeric
values are ignored. In contrast to <code class="docutils literal notranslate"><span class="pre">ceil</span></code> or <code class="docutils literal notranslate"><span class="pre">floor</span></code> it uses the “half to even” rule to decide if to round
up or down (see <a class="reference external" href="https://en.wikipedia.org/wiki/Rounding#Round_half_to_even">this wikipedia article</a> for details).</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["round",</span> <span class="pre">["list",</span> <span class="pre">2.2,</span> <span class="pre">3.5,</span> <span class="pre">4.5]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">4,</span> <span class="pre">4]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["round",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">2.2,</span> <span class="pre">4.778,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2.2,</span> <span class="pre">4.8,</span> <span class="pre">6]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["round",</span> <span class="pre">2,</span> <span class="pre">2.299]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2.30</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["round",</span> <span class="pre">2.299]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">3</span></code>.</div>
<div class="line"><br/></div>
<div class="line">Note that the even/odd rule also applies to negative numbers:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["round",</span> <span class="pre">-4.5]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">-4</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["round",</span> <span class="pre">-3.5]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">-4</span></code>.</div>
<div class="line"><br/></div>
<div class="line">If <code class="docutils literal notranslate"><span class="pre">DIGITS</span></code> is 0 or not provided, the return value will be of type integer. In all other cases</div>
<div class="line">it will be a decimal or a float.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="ceil-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">ceil</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DIGITS(numeric-expression{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and optionally rounds them to the number of DIGITS and then returns the nearest integer
that is larger than the value (adjusted for the number of digits specified, default is 0). Non-numeric
values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ceil",</span> <span class="pre">["list",</span> <span class="pre">2.2,</span> <span class="pre">4.778,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[3,</span> <span class="pre">5,</span> <span class="pre">6]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ceil",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">2.2,</span> <span class="pre">4.778,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2.2,</span> <span class="pre">4.8,</span> <span class="pre">6]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ceil",</span> <span class="pre">2,</span> <span class="pre">2.299]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2.30</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["ceil",</span> <span class="pre">2.299]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">3</span></code>.</div>
<div class="line"><br/></div>
<div class="line">Note that if <code class="docutils literal notranslate"><span class="pre">DIGITS</span></code> is 0 or not provided, the return value will be of type integer. In all other cases</div>
<div class="line">it will be a decimal or a float.</div>
</div>
</td>
</tr>
<tr class="row-even" id="floor-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">floor</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">DIGITS(numeric-expression{0|1})</div>
<div class="line">VALUES(value-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and optionally rounds them to the number of DIGITS and then returns the nearest integer
that is lower than the value (adjusted for the number of digits specified, default is 0). Non-numeric
values are ignored.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["floor",</span> <span class="pre">["list",</span> <span class="pre">2.2,</span> <span class="pre">4.778,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">4,</span> <span class="pre">6]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["floor",</span> <span class="pre">1,</span> <span class="pre">["list",</span> <span class="pre">2.2,</span> <span class="pre">4.778,</span> <span class="pre">6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2.2,</span> <span class="pre">4.7,</span> <span class="pre">6]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["floor",</span> <span class="pre">2,</span> <span class="pre">2.299]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2.29</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["floor",</span> <span class="pre">2.299]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line">Note that if <code class="docutils literal notranslate"><span class="pre">DIGITS</span></code> is 0 or not provided, the return value will be of type integer. In all other cases</div>
<div class="line">it will be a decimal or a float.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="abs-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">abs</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(numeric-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and returns the absolute value. If the VALUE is an integer,
an integer will be returned. If not, a decimal or a float.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["abs",</span> <span class="pre">["list",</span> <span class="pre">-2,</span> <span class="pre">4,</span> <span class="pre">-6]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">4,</span> <span class="pre">6]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["abs",</span> <span class="pre">2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["abs",</span> <span class="pre">-2.23]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">2.23</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="sqrt-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">sqrt</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(numeric-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and returns the square root of the value. If the result is not a real number,
<code class="docutils literal notranslate"><span class="pre">None</span></code> is returned instead.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sqrt",</span> <span class="pre">["list",</span> <span class="pre">4,</span> <span class="pre">9,</span> <span class="pre">16]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[2.0,</span> <span class="pre">3.0,</span> <span class="pre">4.0]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sqrt",</span> <span class="pre">-2]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sqrt",</span> <span class="pre">9.0]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">3.0</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="sin-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">sin</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(numeric-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and returns the sinus of the value, where value is in
radians.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sin",</span> <span class="pre">["list",</span> <span class="pre">0,</span> <span class="pre">3.14159265]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[0.0,</span> <span class="pre">~0.0]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["sin",</span> <span class="pre">0.0]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">0.0</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even" id="cos-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">cos</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(numeric-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and returns the cosinus of the value, where value is in
radians.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["cos",</span> <span class="pre">["list",</span> <span class="pre">0,</span> <span class="pre">3.14159265]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[1.0,</span> <span class="pre">~-1.0]</span></code>.</div>
<div class="line"><br/></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">["cos",</span> <span class="pre">0.0]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-odd" id="tan-dtl-function"><td><p><code class="docutils literal notranslate"><span class="pre">tan</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">VALUE(numeric-expression{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">Takes a list of VALUES and returns the tangens of the value, where value is in
radians. Note that values approaching very close to multiples of PI/2 will be
undefined (+-infinite) and the result will be a <code class="docutils literal notranslate"><span class="pre">None</span></code> value.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["tan",</span> <span class="pre">["list",</span> <span class="pre">0,</span> <span class="pre">3.14159265]]</span></code></div>
<div class="line"><br/></div>
<div class="line">Returns <code class="docutils literal notranslate"><span class="pre">[0.0,</span> <span class="pre">~0.0]</span></code>.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="misc">
<h3>Misc<a class="headerlink" href="#misc" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper"><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 11%"/>
<col style="width: 33%"/>
<col style="width: 56%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p>
</th>
</tr>
</thead>
<tbody id="fail-dtl-function">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fail!</span></code></p></td>
<td><div class="line-block">
<div class="line"><em>Arguments:</em></div>
<div class="line-block">
<div class="line">MESSAGE(string{1})</div>
<div class="line"><br/></div>
</div>
<div class="line">A function that makes the pump fail. It can be used to conditionally fail the pump. A string error message can be specified in the first argument.</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">["fail!",</span> <span class="pre">"Processing</span> <span class="pre">stopped</span> <span class="pre">because</span> <span class="pre">of</span> <span class="pre">invalid</span> <span class="pre">input.</span> <span class="pre">Please</span> <span class="pre">review."]</span></code></div>
<div class="line"><br/></div>
<div class="line">Causes the pump to fail. The error message is reported in the <cite>pump-failed</cite> event in the pump execution dataset.</div>
</div>
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="section" id="supported-timezones">
<span id="id8"></span><h2>Supported timezones<a class="headerlink" href="#supported-timezones" title="Permalink to this headline">#</a></h2>
<p>The <a class="reference internal" href="#datetime-shift-dtl-function"><span class="std std-ref">datetime-shift</span></a> dtl-function supports the following timezones:</p>
<p>‘Africa/Abidjan’, ‘Africa/Accra’, ‘Africa/Addis_Ababa’, ‘Africa/Algiers’, ‘Africa/Asmara’, ‘Africa/Asmera’, ‘Africa/Bamako’, ‘Africa/Bangui’, ‘Africa/Banjul’, ‘Africa/Bissau’, ‘Africa/Blantyre’, ‘Africa/Brazzaville’, ‘Africa/Bujumbura’, ‘Africa/Cairo’, ‘Africa/Casablanca’, ‘Africa/Ceuta’, ‘Africa/Conakry’, ‘Africa/Dakar’, ‘Africa/Dar_es_Salaam’, ‘Africa/Djibouti’, ‘Africa/Douala’, ‘Africa/El_Aaiun’, ‘Africa/Freetown’, ‘Africa/Gaborone’, ‘Africa/Harare’, ‘Africa/Johannesburg’, ‘Africa/Juba’, ‘Africa/Kampala’, ‘Africa/Khartoum’, ‘Africa/Kigali’, ‘Africa/Kinshasa’, ‘Africa/Lagos’, ‘Africa/Libreville’, ‘Africa/Lome’, ‘Africa/Luanda’, ‘Africa/Lubumbashi’, ‘Africa/Lusaka’, ‘Africa/Malabo’, ‘Africa/Maputo’, ‘Africa/Maseru’, ‘Africa/Mbabane’, ‘Africa/Mogadishu’, ‘Africa/Monrovia’, ‘Africa/Nairobi’, ‘Africa/Ndjamena’, ‘Africa/Niamey’, ‘Africa/Nouakchott’, ‘Africa/Ouagadougou’, ‘Africa/Porto-Novo’, ‘Africa/Sao_Tome’, ‘Africa/Timbuktu’, ‘Africa/Tripoli’, ‘Africa/Tunis’, ‘Africa/Windhoek’, ‘America/Adak’, ‘America/Anchorage’, ‘America/Anguilla’, ‘America/Antigua’, ‘America/Araguaina’, ‘America/Argentina/Buenos_Aires’, ‘America/Argentina/Catamarca’, ‘America/Argentina/ComodRivadavia’, ‘America/Argentina/Cordoba’, ‘America/Argentina/Jujuy’, ‘America/Argentina/La_Rioja’, ‘America/Argentina/Mendoza’, ‘America/Argentina/Rio_Gallegos’, ‘America/Argentina/Salta’, ‘America/Argentina/San_Juan’, ‘America/Argentina/San_Luis’, ‘America/Argentina/Tucuman’, ‘America/Argentina/Ushuaia’, ‘America/Aruba’, ‘America/Asuncion’, ‘America/Atikokan’, ‘America/Atka’, ‘America/Bahia’, ‘America/Bahia_Banderas’, ‘America/Barbados’, ‘America/Belem’, ‘America/Belize’, ‘America/Blanc-Sablon’, ‘America/Boa_Vista’, ‘America/Bogota’, ‘America/Boise’, ‘America/Buenos_Aires’, ‘America/Cambridge_Bay’, ‘America/Campo_Grande’, ‘America/Cancun’, ‘America/Caracas’, ‘America/Catamarca’, ‘America/Cayenne’, ‘America/Cayman’, ‘America/Chicago’, ‘America/Chihuahua’, ‘America/Coral_Harbour’, ‘America/Cordoba’, ‘America/Costa_Rica’, ‘America/Creston’, ‘America/Cuiaba’, ‘America/Curacao’, ‘America/Danmarkshavn’, ‘America/Dawson’, ‘America/Dawson_Creek’, ‘America/Denver’, ‘America/Detroit’, ‘America/Dominica’, ‘America/Edmonton’, ‘America/Eirunepe’, ‘America/El_Salvador’, ‘America/Ensenada’, ‘America/Fort_Nelson’, ‘America/Fort_Wayne’, ‘America/Fortaleza’, ‘America/Glace_Bay’, ‘America/Godthab’, ‘America/Goose_Bay’, ‘America/Grand_Turk’, ‘America/Grenada’, ‘America/Guadeloupe’, ‘America/Guatemala’, ‘America/Guayaquil’, ‘America/Guyana’, ‘America/Halifax’, ‘America/Havana’, ‘America/Hermosillo’, ‘America/Indiana/Indianapolis’, ‘America/Indiana/Knox’, ‘America/Indiana/Marengo’, ‘America/Indiana/Petersburg’, ‘America/Indiana/Tell_City’, ‘America/Indiana/Vevay’, ‘America/Indiana/Vincennes’, ‘America/Indiana/Winamac’, ‘America/Indianapolis’, ‘America/Inuvik’, ‘America/Iqaluit’, ‘America/Jamaica’, ‘America/Jujuy’, ‘America/Juneau’, ‘America/Kentucky/Louisville’, ‘America/Kentucky/Monticello’, ‘America/Knox_IN’, ‘America/Kralendijk’, ‘America/La_Paz’, ‘America/Lima’, ‘America/Los_Angeles’, ‘America/Louisville’, ‘America/Lower_Princes’, ‘America/Maceio’, ‘America/Managua’, ‘America/Manaus’, ‘America/Marigot’, ‘America/Martinique’, ‘America/Matamoros’, ‘America/Mazatlan’, ‘America/Mendoza’, ‘America/Menominee’, ‘America/Merida’, ‘America/Metlakatla’, ‘America/Mexico_City’, ‘America/Miquelon’, ‘America/Moncton’, ‘America/Monterrey’, ‘America/Montevideo’, ‘America/Montreal’, ‘America/Montserrat’, ‘America/Nassau’, ‘America/New_York’, ‘America/Nipigon’, ‘America/Nome’, ‘America/Noronha’, ‘America/North_Dakota/Beulah’, ‘America/North_Dakota/Center’, ‘America/North_Dakota/New_Salem’, ‘America/Ojinaga’, ‘America/Panama’, ‘America/Pangnirtung’, ‘America/Paramaribo’, ‘America/Phoenix’, ‘America/Port-au-Prince’, ‘America/Port_of_Spain’, ‘America/Porto_Acre’, ‘America/Porto_Velho’, ‘America/Puerto_Rico’, ‘America/Punta_Arenas’, ‘America/Rainy_River’, ‘America/Rankin_Inlet’, ‘America/Recife’, ‘America/Regina’, ‘America/Resolute’, ‘America/Rio_Branco’, ‘America/Rosario’, ‘America/Santa_Isabel’, ‘America/Santarem’, ‘America/Santiago’, ‘America/Santo_Domingo’, ‘America/Sao_Paulo’, ‘America/Scoresbysund’, ‘America/Shiprock’, ‘America/Sitka’, ‘America/St_Barthelemy’, ‘America/St_Johns’, ‘America/St_Kitts’, ‘America/St_Lucia’, ‘America/St_Thomas’, ‘America/St_Vincent’, ‘America/Swift_Current’, ‘America/Tegucigalpa’, ‘America/Thule’, ‘America/Thunder_Bay’, ‘America/Tijuana’, ‘America/Toronto’, ‘America/Tortola’, ‘America/Vancouver’, ‘America/Virgin’, ‘America/Whitehorse’, ‘America/Winnipeg’, ‘America/Yakutat’, ‘America/Yellowknife’, ‘Antarctica/Casey’, ‘Antarctica/Davis’, ‘Antarctica/DumontDUrville’, ‘Antarctica/Macquarie’, ‘Antarctica/Mawson’, ‘Antarctica/McMurdo’, ‘Antarctica/Palmer’, ‘Antarctica/Rothera’, ‘Antarctica/South_Pole’, ‘Antarctica/Syowa’, ‘Antarctica/Troll’, ‘Antarctica/Vostok’, ‘Arctic/Longyearbyen’, ‘Asia/Aden’, ‘Asia/Almaty’, ‘Asia/Amman’, ‘Asia/Anadyr’, ‘Asia/Aqtau’, ‘Asia/Aqtobe’, ‘Asia/Ashgabat’, ‘Asia/Ashkhabad’, ‘Asia/Atyrau’, ‘Asia/Baghdad’, ‘Asia/Bahrain’, ‘Asia/Baku’, ‘Asia/Bangkok’, ‘Asia/Barnaul’, ‘Asia/Beirut’, ‘Asia/Bishkek’, ‘Asia/Brunei’, ‘Asia/Calcutta’, ‘Asia/Chita’, ‘Asia/Choibalsan’, ‘Asia/Chongqing’, ‘Asia/Chungking’, ‘Asia/Colombo’, ‘Asia/Dacca’, ‘Asia/Damascus’, ‘Asia/Dhaka’, ‘Asia/Dili’, ‘Asia/Dubai’, ‘Asia/Dushanbe’, ‘Asia/Famagusta’, ‘Asia/Gaza’, ‘Asia/Harbin’, ‘Asia/Hebron’, ‘Asia/Ho_Chi_Minh’, ‘Asia/Hong_Kong’, ‘Asia/Hovd’, ‘Asia/Irkutsk’, ‘Asia/Istanbul’, ‘Asia/Jakarta’, ‘Asia/Jayapura’, ‘Asia/Jerusalem’, ‘Asia/Kabul’, ‘Asia/Kamchatka’, ‘Asia/Karachi’, ‘Asia/Kashgar’, ‘Asia/Kathmandu’, ‘Asia/Katmandu’, ‘Asia/Khandyga’, ‘Asia/Kolkata’, ‘Asia/Krasnoyarsk’, ‘Asia/Kuala_Lumpur’, ‘Asia/Kuching’, ‘Asia/Kuwait’, ‘Asia/Macao’, ‘Asia/Macau’, ‘Asia/Magadan’, ‘Asia/Makassar’, ‘Asia/Manila’, ‘Asia/Muscat’, ‘Asia/Nicosia’, ‘Asia/Novokuznetsk’, ‘Asia/Novosibirsk’, ‘Asia/Omsk’, ‘Asia/Oral’, ‘Asia/Phnom_Penh’, ‘Asia/Pontianak’, ‘Asia/Pyongyang’, ‘Asia/Qatar’, ‘Asia/Qyzylorda’, ‘Asia/Rangoon’, ‘Asia/Riyadh’, ‘Asia/Saigon’, ‘Asia/Sakhalin’, ‘Asia/Samarkand’, ‘Asia/Seoul’, ‘Asia/Shanghai’, ‘Asia/Singapore’, ‘Asia/Srednekolymsk’, ‘Asia/Taipei’, ‘Asia/Tashkent’, ‘Asia/Tbilisi’, ‘Asia/Tehran’, ‘Asia/Tel_Aviv’, ‘Asia/Thimbu’, ‘Asia/Thimphu’, ‘Asia/Tokyo’, ‘Asia/Tomsk’, ‘Asia/Ujung_Pandang’, ‘Asia/Ulaanbaatar’, ‘Asia/Ulan_Bator’, ‘Asia/Urumqi’, ‘Asia/Ust-Nera’, ‘Asia/Vientiane’, ‘Asia/Vladivostok’, ‘Asia/Yakutsk’, ‘Asia/Yangon’, ‘Asia/Yekaterinburg’, ‘Asia/Yerevan’, ‘Atlantic/Azores’, ‘Atlantic/Bermuda’, ‘Atlantic/Canary’, ‘Atlantic/Cape_Verde’, ‘Atlantic/Faeroe’, ‘Atlantic/Faroe’, ‘Atlantic/Jan_Mayen’, ‘Atlantic/Madeira’, ‘Atlantic/Reykjavik’, ‘Atlantic/South_Georgia’, ‘Atlantic/St_Helena’, ‘Atlantic/Stanley’, ‘Australia/ACT’, ‘Australia/Adelaide’, ‘Australia/Brisbane’, ‘Australia/Broken_Hill’, ‘Australia/Canberra’, ‘Australia/Currie’, ‘Australia/Darwin’, ‘Australia/Eucla’, ‘Australia/Hobart’, ‘Australia/LHI’, ‘Australia/Lindeman’, ‘Australia/Lord_Howe’, ‘Australia/Melbourne’, ‘Australia/NSW’, ‘Australia/North’, ‘Australia/Perth’, ‘Australia/Queensland’, ‘Australia/South’, ‘Australia/Sydney’, ‘Australia/Tasmania’, ‘Australia/Victoria’, ‘Australia/West’, ‘Australia/Yancowinna’, ‘Brazil/Acre’, ‘Brazil/DeNoronha’, ‘Brazil/East’, ‘Brazil/West’, ‘CET’, ‘CST6CDT’, ‘Canada/Atlantic’, ‘Canada/Central’, ‘Canada/Eastern’, ‘Canada/Mountain’, ‘Canada/Newfoundland’, ‘Canada/Pacific’, ‘Canada/Saskatchewan’, ‘Canada/Yukon’, ‘Chile/Continental’, ‘Chile/EasterIsland’, ‘Cuba’, ‘EET’, ‘EST’, ‘EST5EDT’, ‘Egypt’, ‘Eire’, ‘Etc/GMT’, ‘Etc/GMT+0’, ‘Etc/GMT+1’, ‘Etc/GMT+10’, ‘Etc/GMT+11’, ‘Etc/GMT+12’, ‘Etc/GMT+2’, ‘Etc/GMT+3’, ‘Etc/GMT+4’, ‘Etc/GMT+5’, ‘Etc/GMT+6’, ‘Etc/GMT+7’, ‘Etc/GMT+8’, ‘Etc/GMT+9’, ‘Etc/GMT-0’, ‘Etc/GMT-1’, ‘Etc/GMT-10’, ‘Etc/GMT-11’, ‘Etc/GMT-12’, ‘Etc/GMT-13’, ‘Etc/GMT-14’, ‘Etc/GMT-2’, ‘Etc/GMT-3’, ‘Etc/GMT-4’, ‘Etc/GMT-5’, ‘Etc/GMT-6’, ‘Etc/GMT-7’, ‘Etc/GMT-8’, ‘Etc/GMT-9’, ‘Etc/GMT0’, ‘Etc/Greenwich’, ‘Etc/UCT’, ‘Etc/UTC’, ‘Etc/Universal’, ‘Etc/Zulu’, ‘Europe/Amsterdam’, ‘Europe/Andorra’, ‘Europe/Astrakhan’, ‘Europe/Athens’, ‘Europe/Belfast’, ‘Europe/Belgrade’, ‘Europe/Berlin’, ‘Europe/Bratislava’, ‘Europe/Brussels’, ‘Europe/Bucharest’, ‘Europe/Budapest’, ‘Europe/Busingen’, ‘Europe/Chisinau’, ‘Europe/Copenhagen’, ‘Europe/Dublin’, ‘Europe/Gibraltar’, ‘Europe/Guernsey’, ‘Europe/Helsinki’, ‘Europe/Isle_of_Man’, ‘Europe/Istanbul’, ‘Europe/Jersey’, ‘Europe/Kaliningrad’, ‘Europe/Kiev’, ‘Europe/Kirov’, ‘Europe/Lisbon’, ‘Europe/Ljubljana’, ‘Europe/London’, ‘Europe/Luxembourg’, ‘Europe/Madrid’, ‘Europe/Malta’, ‘Europe/Mariehamn’, ‘Europe/Minsk’, ‘Europe/Monaco’, ‘Europe/Moscow’, ‘Europe/Nicosia’, ‘Europe/Oslo’, ‘Europe/Paris’, ‘Europe/Podgorica’, ‘Europe/Prague’, ‘Europe/Riga’, ‘Europe/Rome’, ‘Europe/Samara’, ‘Europe/San_Marino’, ‘Europe/Sarajevo’, ‘Europe/Saratov’, ‘Europe/Simferopol’, ‘Europe/Skopje’, ‘Europe/Sofia’, ‘Europe/Stockholm’, ‘Europe/Tallinn’, ‘Europe/Tirane’, ‘Europe/Tiraspol’, ‘Europe/Ulyanovsk’, ‘Europe/Uzhgorod’, ‘Europe/Vaduz’, ‘Europe/Vatican’, ‘Europe/Vienna’, ‘Europe/Vilnius’, ‘Europe/Volgograd’, ‘Europe/Warsaw’, ‘Europe/Zagreb’, ‘Europe/Zaporozhye’, ‘Europe/Zurich’, ‘GB’, ‘GB-Eire’, ‘GMT’, ‘GMT+0’, ‘GMT-0’, ‘GMT0’, ‘Greenwich’, ‘HST’, ‘Hongkong’, ‘Iceland’, ‘Indian/Antananarivo’, ‘Indian/Chagos’, ‘Indian/Christmas’, ‘Indian/Cocos’, ‘Indian/Comoro’, ‘Indian/Kerguelen’, ‘Indian/Mahe’, ‘Indian/Maldives’, ‘Indian/Mauritius’, ‘Indian/Mayotte’, ‘Indian/Reunion’, ‘Iran’, ‘Israel’, ‘Jamaica’, ‘Japan’, ‘Kwajalein’, ‘Libya’, ‘MET’, ‘MST’, ‘MST7MDT’, ‘Mexico/BajaNorte’, ‘Mexico/BajaSur’, ‘Mexico/General’, ‘NZ’, ‘NZ-CHAT’, ‘Navajo’, ‘PRC’, ‘PST8PDT’, ‘Pacific/Apia’, ‘Pacific/Auckland’, ‘Pacific/Bougainville’, ‘Pacific/Chatham’, ‘Pacific/Chuuk’, ‘Pacific/Easter’, ‘Pacific/Efate’, ‘Pacific/Enderbury’, ‘Pacific/Fakaofo’, ‘Pacific/Fiji’, ‘Pacific/Funafuti’, ‘Pacific/Galapagos’, ‘Pacific/Gambier’, ‘Pacific/Guadalcanal’, ‘Pacific/Guam’, ‘Pacific/Honolulu’, ‘Pacific/Johnston’, ‘Pacific/Kiritimati’, ‘Pacific/Kosrae’, ‘Pacific/Kwajalein’, ‘Pacific/Majuro’, ‘Pacific/Marquesas’, ‘Pacific/Midway’, ‘Pacific/Nauru’, ‘Pacific/Niue’, ‘Pacific/Norfolk’, ‘Pacific/Noumea’, ‘Pacific/Pago_Pago’, ‘Pacific/Palau’, ‘Pacific/Pitcairn’, ‘Pacific/Pohnpei’, ‘Pacific/Ponape’, ‘Pacific/Port_Moresby’, ‘Pacific/Rarotonga’, ‘Pacific/Saipan’, ‘Pacific/Samoa’, ‘Pacific/Tahiti’, ‘Pacific/Tarawa’, ‘Pacific/Tongatapu’, ‘Pacific/Truk’, ‘Pacific/Wake’, ‘Pacific/Wallis’, ‘Pacific/Yap’, ‘Poland’, ‘Portugal’, ‘ROC’, ‘ROK’, ‘Singapore’, ‘Turkey’, ‘UCT’, ‘US/Alaska’, ‘US/Aleutian’, ‘US/Arizona’, ‘US/Central’, ‘US/East-Indiana’, ‘US/Eastern’, ‘US/Hawaii’, ‘US/Indiana-Starke’, ‘US/Michigan’, ‘US/Mountain’, ‘US/Pacific’, ‘US/Samoa’, ‘UTC’, ‘Universal’, ‘W-SU’, ‘WET’ and ‘Zulu’.</p>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="patterns.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Design patterns</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="product-features.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Features</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022 Sesam.io AS
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">DTL Reference Guide</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#core-concepts">Core Concepts</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#annotated-example">Annotated Example</a></li>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#path-expressions-and-hops">Path Expressions and Hops</a></li>
<li><a class="reference internal" href="#how-joins-work">How joins work</a></li>
<li><a class="reference internal" href="#namespaces">Namespaces</a><ul>
<li><a class="reference internal" href="#ni-escape-syntax">NI escape syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#argument-types">Argument types</a></li>
<li><a class="reference internal" href="#transforms">Transforms</a></li>
<li><a class="reference internal" href="#expression-language">Expression language</a><ul>
<li><a class="reference internal" href="#boolean-logic">Boolean logic</a></li>
<li><a class="reference internal" href="#booleans">Booleans</a></li>
<li><a class="reference internal" href="#comparisons">Comparisons</a></li>
<li><a class="reference internal" href="#conditionals">Conditionals</a></li>
<li><a class="reference internal" href="#nulls">Nulls</a></li>
<li><a class="reference internal" href="#numbers">Numbers</a></li>
<li><a class="reference internal" href="#date-and-time">Date and time</a></li>
<li><a class="reference internal" href="#strings">Strings</a></li>
<li><a class="reference internal" href="#bytes">Bytes</a></li>
<li><a class="reference internal" href="#encryption">Encryption</a></li>
<li><a class="reference internal" href="#json">JSON</a></li>
<li><a class="reference internal" href="#uris">URIs</a></li>
<li><a class="reference internal" href="#uuids">UUIDs</a></li>
<li><a class="reference internal" href="#nested-transformations">Nested transformations</a></li>
<li><a class="reference internal" href="#paths">Paths</a></li>
<li><a class="reference internal" href="#hops">Hops</a></li>
<li><a class="reference internal" href="#entity-lookups">Entity lookups</a></li>
<li><a class="reference internal" href="#namespaced-identifiers">Namespaced identifiers</a></li>
<li><a class="reference internal" href="#lists">Lists</a></li>
<li><a class="reference internal" href="#sets">Sets</a></li>
<li><a class="reference internal" href="#dictionaries">Dictionaries</a></li>
<li><a class="reference internal" href="#tuples">Tuples</a></li>
<li><a class="reference internal" href="#hashing">Hashing</a></li>
<li><a class="reference internal" href="#math">Math</a></li>
<li><a class="reference internal" href="#misc">Misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#supported-timezones">Supported timezones</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>