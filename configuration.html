
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Service Configuration Guide &#8212; Sesam Documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Service API" href="api.html" />
    <link rel="prev" title="Changelog" href="gdpr-changelog.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="index.html">
  <img src="_static/sesamlogo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-whatis.html">
  What is Sesam
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index-developer.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-learn.html">
  Learn Sesam
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="community.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="legal.html">
  Legal
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="quick-reference.html">
  Quick Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://support.sesam.io">
  Support
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="best-practices.html">
   Project kickstart
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pre-planning.html">
     Planning a project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="setup-environment.html">
     Setting up an environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-dataflow.html">
     Creating a dataflow
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="developer-guide.html">
   Building blocks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="product-features.html">
   Features
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DTLReferenceGuide.html">
   Data Transformation Language (DTL)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="patterns.html">
   Design patterns
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-synchronization.html">
   Data synchronization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="idempotency.html">
     Non-idempotency
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cron-expressions.html">
     Cron Expressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rdf-support.html">
     RDF support
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="json-pull.html">
     JSON Pull Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="json-push.html">
     JSON Push Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="extension-points.html">
     Developer Extension Points
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="source-datatype-mapping.html">
     Source datatype mapping
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-datamodelling.html">
   Data modelling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="entitymodel.html">
     Entity Data Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-modelling.html">
     Data modelling
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-dataplatforms.html">
   Data platforms
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="azure.html">
     Sesam in Microsoft Azure
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-operations.html">
   Operations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="security.html">
     Security
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="notifications.html">
     Notifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pump-execution.html">
     Pump Execution Dataset
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="project-workflow.html">
     Configuration Management
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="version-control-system.html">
       Using Sesam with a version control system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="testing-locally.html">
       Testing a Sesam configuration locally
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="continuous-integration.html">
       Continuous integration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="automatic-deployment.html">
       Automatic deployment
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="self-hosted.html">
     Self-hosted service
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="low-level-debugging.html">
     Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="behind-the-scenes.html">
     Behind the scenes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="tools.html">
   Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="management-studio.html">
     Management Studio
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-client.html">
     Sesam Client
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="gdpr-platform.html">
     GDPR platform
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-configuration.html">
       Platform configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-types-purposes-configuration.html">
       Datatypes and purposes configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-access-portal.html">
       The GDPR data access portal
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-developer-docs.html">
       Developer documentation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-getting-started.html">
       Getting started
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-changelog.html">
       Changelog
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Service Configuration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="api.html">
   Service API
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="deprecations.html">
   Deprecated features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="databrowser.html">
     Databrowser
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-guide.html">
       Databrowser Guide
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-auth.html">
       Authentication and authorization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-api.html">
       Configuration file API
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="changelog.html">
   Changelog
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general">
   General
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#environment-variables">
   Environment variables
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#service-metadata">
   Service metadata
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#properties">
     Properties
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pipes">
   Pipes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prototype">
     Prototype
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#batching">
     Batching
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Properties
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#namespaces">
     Namespaces
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compaction">
     Compaction
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id5">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#circuit-breakers">
     Circuit breakers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resetting">
     Resetting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#automatic-reprocessing">
     Automatic reprocessing
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#completeness">
     Completeness
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-configuration">
     Example configuration
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sources">
   Sources
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id10">
     Prototype
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id11">
     Properties
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#continuation-support">
     Continuation support
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#continuation-support-for-microservices">
       Continuation support for Microservices
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataset-source">
     Dataset source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id14">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id15">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id16">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id17">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#merge-source">
     Merge source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id19">
       Prototype
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#variant-1-explicit-equality-rules-with-the-equality-property">
         Variant 1: Explicit equality-rules with the
         <code class="docutils literal notranslate">
          <span class="pre">
           equality
          </span>
         </code>
         property
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#variant-2-implicit-equality-rules-with-the-equality-sets-property">
         Variant 2: Implicit equality-rules with the
         <code class="docutils literal notranslate">
          <span class="pre">
           equality_sets
          </span>
         </code>
         property
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id20">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#equality-vs-equality-sets">
       “equality” vs “equality_sets”
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id21">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id22">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#union-datasets-source">
     Union datasets source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id24">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id25">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id26">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id27">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#merge-datasets-source">
     Merge datasets source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id29">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id30">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id31">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id32">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#diff-datasets-source-experimental">
     Diff datasets source (Experimental)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id33">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id34">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id35">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id36">
       Example configuration
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example-result">
       Example result
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#embedded-source">
     Embedded source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id38">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id39">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id40">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sql-source">
     SQL source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id42">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#column-types">
       Column types
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id43">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id44">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id45">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditional-source">
     Conditional source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id47">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id48">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#csv-source">
     CSV source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id50">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id51">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id52">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id53">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rdf-source">
     RDF source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id55">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id56">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id58">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id59">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sdshare-source">
     SDShare source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id62">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id63">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id64">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id65">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ldap-source">
     LDAP source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id67">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id68">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id69">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id70">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#json-source">
     JSON source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id73">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id74">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id75">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id76">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#empty-source">
     Empty source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id78">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id79">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id80">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#http-endpoint-source">
     HTTP endpoint source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#json-push-protocol">
       JSON Push protocol
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sdshare-push-protocol">
       SDShare Push protocol
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id86">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id87">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id88">
       Completeness
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id89">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id90">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sparql-source">
     SPARQL source
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id93">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id94">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id95">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id96">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rest-source-experimental">
     REST source (experimental)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id97">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id98">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id99">
       Continuation support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rest-source-examples">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transforms">
   Transforms
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dtl-transform">
     DTL transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id103">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id104">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#json-schema-validation-transform">
     JSON Schema validation transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id105">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id106">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditional-transform">
     Conditional transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id108">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id109">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#http-transform">
     HTTP transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id112">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id113">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#emit-children-transform">
     Emit children transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id115">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id116">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#xml-transform">
     XML transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id118">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id119">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id120">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rdf-transform">
     RDF transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id122">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id123">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id124">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rest-transform">
     REST transform
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id126">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id127">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#expected-entity-shape">
       Expected entity shape
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id128">
       Example configuration
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pagination-support">
       Pagination support
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sinks">
   Sinks
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id129">
     Prototype
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id130">
     Properties
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditional-sink">
     Conditional sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id132">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id133">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataset-sink">
     Dataset sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id135">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id136">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id137">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sesam-databrowser-sink">
     Sesam Databrowser sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id138">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id139">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id140">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#json-push-sink">
     JSON push sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id141">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id142">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id143">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sdshare-push-sink">
     SDShare push sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id144">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id145">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id146">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sms-message-sink">
     SMS message sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id147">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id148">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id149">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#solr-sink">
     Solr sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#limitations">
       Limitations
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id151">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id152">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#elasticsearch-sink">
     Elasticsearch sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id154">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id155">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sparql-sink">
     SPARQL sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id157">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id158">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id159">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sql-sink">
     SQL sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id162">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id163">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id164">
       Example configuration
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sql-sink-schema-definition-format">
       SQL sink schema definition format
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#email-message-sink">
     Email Message sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id166">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id167">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id168">
       Example configuration
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-note-on-multi-part-messages">
       A note on multi-part messages
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#null-sink">
     Null sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id170">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id171">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#http-endpoint-sink">
     HTTP endpoint sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id173">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id174">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id175">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#csv-endpoint-sink">
     CSV endpoint sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id178">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id179">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id180">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#xml-endpoint-sink">
     XML endpoint sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id182">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id183">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#expected-xml-entity-shape">
       Expected entity shape
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id185">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rest-sink">
     REST sink
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id187">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id188">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rest-expected-rest-entity-shape">
       Expected entity shape
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id190">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#systems">
   Systems
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id191">
     Prototype
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id192">
     Properties
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sql-systems">
     SQL systems
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id193">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#column-type-mapping">
       Column type mapping
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id194">
       Properties
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#oracle-system">
     Oracle system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id196">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id197">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id198">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#oracle-tns-system">
     Oracle TNS system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id200">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id201">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id202">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#legacy-microsoft-sql-system">
     Legacy Microsoft SQL system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id203">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id204">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id205">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#microsoft-sql-server-system">
     Microsoft SQL Server system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id206">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id207">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id208">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bulk-operations-in-microsoft-sql-server-and-azure-synapse-systems">
     Bulk operations in Microsoft SQL server and Azure Synapse systems
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-note-on-writable-views-in-ms-sql-server">
     A note on writable views in MS SQL server
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mysql-system">
     MySQL system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id210">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id211">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id212">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#postgresql-system">
     PostgreSQL system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id214">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id215">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id216">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ldap-system">
     LDAP system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id218">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id219">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id220">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#smtp-system">
     SMTP system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id222">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id223">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id224">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#solr-system">
     Solr system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id226">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id227">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id228">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#elasticsearch-system">
     Elasticsearch system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id230">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id231">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id232">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#twilio-system">
     Twilio system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id234">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id235">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id236">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#url-system">
     URL system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id238">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id239">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id240">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rest-system">
     REST system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id243">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id244">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#operation-properties">
       Operation properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rest-system-example">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#microservice-system">
     Microservice system
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id247">
       Prototype
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id248">
       Properties
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#microservice-apis">
       Microservice APIs
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id250">
       Example configuration
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pumps">
   Pumps
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id251">
     Prototype
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id252">
     Properties
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id253">
     Example configuration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rescans">
     Rescans
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="service-configuration-guide">
<span id="configuration"></span><h1>Service Configuration Guide<a class="headerlink" href="#service-configuration-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<p>The <em>Sesam</em> service is configured using one or more <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> files.
These configuration files can be imported through the service API. They can also be created and edited using the <a class="reference internal" href="management-studio.html"><span class="doc">Sesam Management Studio</span></a>.</p>
<p>Conceptually, the configuration files contains definitions for <em>Systems</em> and <em>Pipes</em>.</p>
<p>The configuration is a <em>JSON array</em> of <a class="reference internal" href="#system-section"><span class="std std-ref">system</span></a> and <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe configurations</span></a>. The configuration <a class="reference internal" href="entitymodel.html"><span class="doc">entities</span></a> are
<em>JSON objects</em> of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;some-solution-wide-unique-id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of component&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;component-type&quot;</span><span class="p">,</span>
        <span class="s2">&quot;some-property&quot;</span><span class="p">:</span> <span class="s2">&quot;some value&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;some-other-solution-wide-unique-id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of other component&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;component-type&quot;</span><span class="p">,</span>
        <span class="s2">&quot;some-other-property&quot;</span><span class="p">:</span> <span class="s2">&quot;some other value&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>It should be noted that all <code class="docutils literal notranslate"><span class="pre">_id</span></code> property values must be unique across across the solution. This means unique within the <em>sesam.conf.json</em> file but also across all files when a multiple file configuration is used.</p>
</div>
<div class="section" id="environment-variables">
<span id="id1"></span><h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p>You can insert the values of environment variables into configuration using the syntax “$ENV(variable)” in place of
property values. You can manage these environment variables using a HTTP client with the <a class="reference internal" href="api.html#api-reference"><span class="std std-ref">Environment Manager API</span></a>.</p>
<p>An example, given a uploaded environment variable JSON file containing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;server-ip&quot;</span><span class="p">:</span> <span class="s2">&quot;10.10.10.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can refer to this property in your configuration by reference:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-system&quot;</span><span class="p">,</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;oracle&quot;</span><span class="p">,</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(server-ip)&quot;</span>
   <span class="o">..</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also compose a property that consists of several environment variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-system&quot;</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;url&quot;</span><span class="p">,</span>
  <span class="s2">&quot;base_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://$ENV(my-domain):$ENV(my-port)&quot;</span><span class="p">,</span>
  <span class="s2">&quot;..&quot;</span><span class="p">:</span> <span class="s2">&quot;..&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that when using properties that contain multiple environment variables you cannot nest them inside each other,
and the resulting property will always be a string.</p>
<p>You can combine environment variables and <em>secrets</em>, but they cannot be nested within each other. For secret variables
see the <a class="reference internal" href="security.html#secrets-manager"><span class="std std-ref">Secrets manager API</span></a> for details on how to upload them and their syntax.</p>
<p>Environment variables applies to both System and Pipe configuration entities.</p>
</div>
<div class="section" id="service-metadata">
<span id="service-metadata-section"></span><h2>Service metadata<a class="headerlink" href="#service-metadata" title="Permalink to this headline">¶</a></h2>
<p>There is an optional special configuration entity used to represent
the service instance’s metadata. The metadata is used to
specify properties that apply to the service instance itself. This
entity can either be added as a normal configuration entity, edited in
the UI or updated with the Service API.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;metadata&quot;</span><span class="p">,</span>
   <span class="s2">&quot;namespaced_identifiers&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;namespaces&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.org/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fifa&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.fifa.com/&quot;</span>
      <span class="p">}</span>
   <span class="p">},</span>
   <span class="s2">&quot;global_defaults&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;use_signalling_internally&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;default_compaction_type&quot;</span><span class="p">:</span> <span class="s2">&quot;sink&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symmetric_namespace_collapse&quot;</span><span class="p">:</span> <span class="n">false</span>
   <span class="p">},</span>
   <span class="s2">&quot;dependency_tracking&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;dependency_warning_threshold&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
      <span class="s2">&quot;dependency_error_threshold&quot;</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>
      <span class="s2">&quot;dependency_warning_threshold_total_bytes&quot;</span><span class="p">:</span> <span class="mi">33554432</span><span class="p">,</span>
      <span class="s2">&quot;dependency_error_threshold_total_bytes&quot;</span><span class="p">:</span> <span class="mi">134217728</span><span class="p">,</span>
      <span class="s2">&quot;enable_hops_thresholds&quot;</span><span class="p">:</span> <span class="n">true</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">namespaced_identifiers</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to enable namespaced identifers support for the service as a whole. Pipes inherit the value of the <code class="docutils literal notranslate"><span class="pre">namespaced_identifiers</span></code> property less explictly overridden.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespaces.default</span></code></p></td>
<td><p>Dict</p></td>
<td><p>A dictionary of namespace to URI expansions. This expansion
mapping is used to expand namespaced identifiers into fully
qualified URIs, e.g. by those components that provide RDF
support.</p>
<p>A few expansion mappings come built-into the system. These
are always available unless explicity overridden:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;_&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.org/&quot;</span><span class="p">,</span>
<span class="s2">&quot;rdf&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span><span class="p">,</span>
<span class="s2">&quot;rdfs&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2000/01/rdf-schema#&quot;</span><span class="p">,</span>
<span class="s2">&quot;owl&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2002/07/owl#&quot;</span><span class="p">,</span>
<span class="s2">&quot;foaf&quot;</span><span class="p">:</span> <span class="s2">&quot;http://xmlns.com/foaf/0.1/&quot;</span><span class="p">,</span>
<span class="s2">&quot;wgs84&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2003/01/geo/wgs84_pos#&quot;</span><span class="p">,</span>
<span class="s2">&quot;xsd&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#&quot;</span><span class="p">,</span>
<span class="s2">&quot;dc&quot;</span><span class="p">:</span> <span class="s2">&quot;http://purl.org/dc/elements/1.1/&quot;</span><span class="p">,</span>
<span class="s2">&quot;skos&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2004/02/skos/core#&quot;</span><span class="p">,</span>
<span class="s2">&quot;dcterms&quot;</span><span class="p">:</span> <span class="s2">&quot;http://purl.org/dc/terms/&quot;</span><span class="p">,</span>
<span class="s2">&quot;gs&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.opengis.net/ont/geosparql#&quot;</span><span class="p">,</span>
</pre></div>
</div>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.use_signalling_internally</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to globally enable signalling support between internal pipes (i.e. dataset to dataset pipes). If enabled, a pipe
run is scheduled as soon as the input dataset changes (it does not interrupt any already running pipes).
The default setting of this property is <code class="docutils literal notranslate"><span class="pre">true</span></code> which means signalling is turned on for all <a class="reference internal" href="#dataset-source"><span class="std std-ref">dataset-type sources</span></a> in the
installation. You can turn this feature on or off individually by setting the <code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code> flag on the
<a class="reference internal" href="#dataset-source"><span class="std std-ref">dataset source</span></a> (including variants like
<a class="reference internal" href="#merge-source"><span class="std std-ref">merge</span></a>, <a class="reference internal" href="#union-datasets-source"><span class="std std-ref">union datasets</span></a> and
<a class="reference internal" href="#merge-datasets-source"><span class="std std-ref">merge datasets</span></a> sources). Note that signalling support is “best-effort” only; signals are not persisted so
delivery is not guaranteed. For this reason, pipes in such flows should always have scheduled interval as a “backup”.
Also note that if the scheduled interval on a pipe is less than 2 minutes or if the scheduling is cron based or the schedule interval
is equal or greater than an hour (3600 seconds), signalling will be disabled for the pipe source (if it’s only set globally).
However, if you set <code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code> explicitly on the pipe source it will be turned on regardless of the pump schedule.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd" id="service-metadata-global-defaults-compaction-settings"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.default_compaction_type</span></code></p></td>
<td><p>Enum&lt;String&gt;</p></td>
<td><p>Specifies the default compaction type. It can be set to <code class="docutils literal notranslate"><span class="pre">&quot;background&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;sink&quot;</span></code>. Background compaction
will run once every 24 hours. Sink compaction will normally run every time the pipe runs, but this can be
tweaked with the <code class="docutils literal notranslate"><span class="pre">global_defaults.compaction_interval</span></code> setting.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;sink&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.compaction_interval</span></code></p></td>
<td><p>Float</p></td>
<td><p>Specifies the default sink compaction interval. If this value is zero, sink compaction will run every time
the pipe runs. If it is larger than zero, sink compaction will only run if at least
<code class="docutils literal notranslate"><span class="pre">compaction_interval</span></code> seconds has passed since the last sink compaction. The use-case for this setting is
to prevent pipes that run often from constantly trying to compact the sink-dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.compaction_keep_versions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of unique versions of an entity to keep around.
The value must be greater than or equal to <code class="docutils literal notranslate"><span class="pre">0</span></code>. If set to <code class="docutils literal notranslate"><span class="pre">0</span></code> then a time
threshold must be set explicitly.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">2</span></code> means that dependency tracking is best effort only,
and it will not be able to find all reprocessable entities. Do full or partial
rescans as a counter measure.</p>
</div>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.compaction_time_threshold_hours</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Specifies the threshold for how old entities must be before they are considered
for compaction. This property is usually used when you want to keep entities
around for a certain time.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.compaction_time_threshold_hours_pump</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Same as <code class="docutils literal notranslate"><span class="pre">compaction_time_threshold_hours</span></code>, but applies to the pipe’s pump
execution dataset. Pump execution datasets are always trimmed by time.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.compaction_growth_threshold</span></code></p></td>
<td><p>Float</p></td>
<td><p>The growth factor required for the automatically scheduled compaction to kick
in. A value of <code class="docutils literal notranslate"><span class="pre">1.1</span></code> mean that there must have been 10% new offsets written to
the dataset since the last compaction. <code class="docutils literal notranslate"><span class="pre">1.0</span></code> is the minimum value allowed.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.max_entity_bytes_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Defines the maximum size in bytes of an individual entity as it is stored in a dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">104857600</span></code> (100MB)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.use_config_circuit_breaker</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>When set to true, activates the circuit breaker for uploading configuration to the node. When activated, any changes to the node configuration that would result in the deletion of more than 10% of the existing components will not go through (this is the case only when the number of deleted components is also more than 10).</p></td>
<td><p>False</p></td>
<td></td>
</tr>
<tr class="row-odd" id="service-metadata-global-defaults-enable-background-rescan"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.enable_background_rescan</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>When set to true, enables running <a class="reference internal" href="#pipe-rescans"><span class="std std-ref">pipe rescans</span></a> in the background for all applicable pipes.</p></td>
<td><p>False</p></td>
<td></td>
</tr>
<tr class="row-even" id="service-metadata-global-defaults-eager-load-microservices"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.eager_load_microservices</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>When set to false, Sesam can hold off starting up microservices which aren’t connected to any pipes. Set to true to force all microservices to start up regardless.</p></td>
<td><p>True</p></td>
<td></td>
</tr>
<tr class="row-odd" id="service-metadata-global-defaults-symmetric-namespace-collapse"><td><p><code class="docutils literal notranslate"><span class="pre">global_defaults.symmetric_namespace_collapse</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>When set to true, the expand and collapse features will be symmetrical, i.e. data containing namespaced identifiers read into Sesam will map to the same thing
on the way out of Sesam. Note that setting this option to <code class="docutils literal notranslate"><span class="pre">true</span></code> as assumed by the DTL <code class="docutils literal notranslate"><span class="pre">ni-collapse</span></code> and <code class="docutils literal notranslate"><span class="pre">ni-expand</span></code> DTL functions
will also alter the URI/NI collapse and expand behaviour of the RDF and SPARQL source and sink.</p></td>
<td><p>False</p></td>
<td></td>
</tr>
<tr class="row-even" id="service-metadata-dependency-tracking-dependency-warning-threshold"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_warning_threshold</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of entities that dependency tracking can keep in memory at a given time. If this number is exceeded then a warning message is written to the log.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10000</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd" id="service-metadata-dependency-tracking-dependency-error-threshold"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_error_threshold</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of entities that dependency tracking can keep in memory at a given time. If this number is exceeded then the pump will fail. Do not set this value too high as it may cause excessive memory usage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50000</span></code></p></td>
<td></td>
</tr>
<tr class="row-even" id="service-metadata-dependency-tracking-dependency-warning-threshold-total-bytes"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_warning_threshold_total_bytes</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of bytes that dependency tracking can keep in memory at a given time. If this number is exceeded then a warning message is written to the log.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">33554432</span></code> (32MB)</p></td>
<td></td>
</tr>
<tr class="row-odd" id="service-metadata-dependency-tracking-dependency-error-threshold-total-bytes"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_error_threshold_total_bytes</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of bytes that dependency tracking can keep in memory at a given time. If this number is exceeded then the pump will fail.  Do not set this value too high as it may cause excessive memory usage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">134217728</span></code> (128MB)</p></td>
<td></td>
</tr>
<tr class="row-even" id="service-metadata-dependency-tracking-enable-hops-thresholds"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.enable_hops_thresholds</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code>, then warning and error thresholds that apply for dependency tracking also apply for regular <code class="docutils literal notranslate"><span class="pre">&quot;hops&quot;</span></code> expressions. It is recommended that you set this property to <code class="docutils literal notranslate"><span class="pre">true</span></code> in development environments.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="pipes">
<span id="pipe-section"></span><h2>Pipes<a class="headerlink" href="#pipes" title="Permalink to this headline">¶</a></h2>
<p>A pipe defines the flow of data from a <em>source</em> to a <em>sink</em> on some schedule as defined by the pump settings.
Optionally, a pipe may define an ordered list of transforms that are applied to entities as they flow from the
<em>source</em> to the <em>sink</em>. As the name implies, a pump “pumps” data in the form of entities from the source to the
sink at regular or scheduled intervals. A chain of transforms can be placed in between the source and the sink, so that entities
are transformed on their way to the sink.</p>
<p>The pipe configuration consists of a <a class="reference internal" href="#source-section"><span class="std std-ref">source</span></a>, <a class="reference internal" href="#transform-section"><span class="std std-ref">transform</span></a>,
<a class="reference internal" href="#sink-section"><span class="std std-ref">sink</span></a> and a <a class="reference internal" href="#pump-section"><span class="std std-ref">pump</span></a>.</p>
<p>Note that the forward slash character (“<code class="docutils literal notranslate"><span class="pre">/</span></code>”) is not allowed in the pipe <code class="docutils literal notranslate"><span class="pre">_id</span></code> property.</p>
<div class="section" id="prototype">
<h3>Prototype<a class="headerlink" href="#prototype" title="Permalink to this headline">¶</a></h3>
<p>The following <em>JSON</em> snippet shows the general form of a pipe definition.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a description of the pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a comment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">},</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">},</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">},</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that if no <code class="docutils literal notranslate"><span class="pre">name</span></code> property is explicitly set for the source, sink or pump configurations one will be generated based on the <code class="docutils literal notranslate"><span class="pre">name</span></code> of the pipe (i.e. the contents of this property postfixed with “source”, “sink” or “pump” respectively).</p>
</div>
<div class="section" id="batching">
<span id="pipe-batching"></span><h3>Batching<a class="headerlink" href="#batching" title="Permalink to this headline">¶</a></h3>
<p>Pipes support batching if the sink supports batching. It does this by
accumulating source entities in a buffer before writing the batch to
transforms and the sink. The size of each batch can be specified using
the <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> property on the pipe. The default batch size
is usually 100, but this may vary depending on the source- and
sink-type used in the pipe. The <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a> will
for instance make the default batch_size 1.</p>
<p>Note that the sink may have its own <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> property. This is
useful if the pipe has transforms that produce more entities than the
number of entities taken as input.</p>
</div>
<div class="section" id="id2">
<h3>Properties<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_id</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the pipe, this should be unique within a Sesam service instance. Note that you cannot use the <code class="docutils literal notranslate"><span class="pre">/</span></code>
character in the id property.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>String</p></td>
<td><p>A human readable name of the component.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable description of the component (optional).</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable comment on the component (optional).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>String</p></td>
<td><p>The type of the component, for pipes the only allowed value is “pipe”</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>The number of source entities to consume before writing to the sink. The batch size
can be used to buffer up entities so that they can be written together to the sink in
one go. The sink must support batch for the bulking to happen. This may increase the
throughput of the pipe, at the cost of extra memory usage. If the batch fails,
then entities will be retried individually.</p></td>
<td><p>usually 100, but varies with other pipe settings.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">checkpoint_interval</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>Specifies how often the pipe offset is saved. It says how many batches
must be processed before the pipe offset is saved the next time. Note that the pipe
offset is always saved at the end of the sync if it changed.</p>
<p>The default value is 10000/<code class="docutils literal notranslate"><span class="pre">batch_size</span></code> = 100, i.e. the
checkpoint happens every 100 batches. The exception is if <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is 1, in which case the
default value of <code class="docutils literal notranslate"><span class="pre">checkpoint_interval</span></code> is also set to 1.</p>
</td>
<td><p>100 (1 if batch_size=1)</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">disable_set_last_seen</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If this flag is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, it will no longer be possible to reset or set the ‘last seen’ parameter for this
pipe. The primary use case for this property is when you need to protect the pipe from accidental resets.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even" id="pipe-settings-enable-background-rescan"><td><p><code class="docutils literal notranslate"><span class="pre">enable_background_rescan</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>When set to true, enables running <a class="reference internal" href="#pipe-rescans"><span class="std std-ref">pipe rescans</span></a> in the background for this pipe.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p>Object</p></td>
<td><p>A configuration object for the <a class="reference internal" href="#source-section"><span class="std std-ref">source</span></a> component of the pipe.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">transform</span></code></p></td>
<td><p>Object/List</p></td>
<td><p>Zero or more configuration objects for the <a class="reference internal" href="#transform-section"><span class="std std-ref">transform</span></a> components of the pipe.
The default is to do no transformation of the entities. If a list of more than one transform components is
given, then they are chained together in the order given. This means that the output of the first transform
is passed as the input of the second, and so on. The output of the last transform is then passed to the
sink. The first transform gets its input from the source.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sink</span></code></p></td>
<td><p>Object</p></td>
<td><p>A configuration object for the <a class="reference internal" href="#sink-section"><span class="std std-ref">sink</span></a> component of the pipe. If omitted, it defaults to
a <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> with its <code class="docutils literal notranslate"><span class="pre">dataset</span></code> property set to same as the pipe’s <code class="docutils literal notranslate"><span class="pre">_id</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pump</span></code></p></td>
<td><p>Object</p></td>
<td><p>A configuration object for the <a class="reference internal" href="#pump-section"><span class="std std-ref">pump</span></a> component of the pipe.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_warning_threshold</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of entities that dependency tracking can keep in memory at a given time. If this number is exceeded then a warning message is written to the log. The default value is inherited from the <a class="reference internal" href="#service-metadata-dependency-tracking-dependency-warning-threshold"><span class="std std-ref">service metadata</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10000</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_error_threshold</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of entities that dependency tracking can keep in memory at a given time. If this number is exceeded then the pump will fail. The default value is inherited from the <a class="reference internal" href="#service-metadata-dependency-tracking-dependency-error-threshold"><span class="std std-ref">service metadata</span></a>.  Do not set this value too high as it may cause excessive memory usage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50000</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_warning_threshold_total_bytes</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of bytes that dependency tracking can keep in memory at a given time. If this number is exceeded then a warning message is written to the log. The default value is inherited from the <a class="reference internal" href="#service-metadata-dependency-tracking-dependency-warning-threshold-total-bytes"><span class="std std-ref">service metadata</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">33554432</span></code> (32MB)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.dependency_error_threshold_total_bytes</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of bytes that dependency tracking can keep in memory at a given time. If this number is exceeded then the pump will fail. The default value is inherited from the <a class="reference internal" href="#service-metadata-dependency-tracking-dependency-error-threshold-total-bytes"><span class="std std-ref">service metadata</span></a>.  Do not set this value too high as it may cause excessive memory usage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">134217728</span></code> (128MB)</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dependency_tracking.enable_hops_thresholds</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code>, then warning and error thresholds that apply for dependency tracking also apply for regular <code class="docutils literal notranslate"><span class="pre">&quot;hops&quot;</span></code> expressions. The default value is inherited from the <a class="reference internal" href="#service-metadata-dependency-tracking-enable-hops-thresholds"><span class="std std-ref">service metadata</span></a>. It is recommended that you set this property to <code class="docutils literal notranslate"><span class="pre">true</span></code> in development environments.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="namespaces">
<span id="id3"></span><h3>Namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">¶</a></h3>
<p>Namespaces can be used by <a class="reference internal" href="entitymodel.html#id-field"><span class="std std-ref">entity identifiers</span></a>, entity property names and the <a class="reference internal" href="entitymodel.html#ni-data-type"><span class="std std-ref">namespaced identifier datatype</span></a>. A namespaced identifier consists of two parts; a namespace and an identifier. The namespace part can consist of any character, including colons. The identifier part can consist of any character except colons (<code class="docutils literal notranslate"><span class="pre">:</span></code>).</p>
<p>Example of an entity with namespaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;user:123&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user:username&quot;</span><span class="p">:</span> <span class="s2">&quot;erica&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user:first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Erica&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user:manager&quot;</span><span class="p">:</span> <span class="s2">&quot;~:user:101&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Namespaced identifiers can be enabled by setting the
<code class="docutils literal notranslate"><span class="pre">namespaced_identifiers</span></code> property to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the pipe
configuration (see below) or the service metadata. The former
enables it for just the one pipe. The latter enables it for all
pipes - except for those pipes that have explicitly disabled it.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the DTL functions are namespace aware and they will behave
slightly differently when namespaces are enabled. See the section
on <a class="reference internal" href="DTLReferenceGuide.html#namespace-aware-functions"><span class="std std-ref">namespaces</span></a> in the DTL
reference guide for more details.</p>
</div>
<div class="section" id="id4">
<h4>Properties<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">namespaced_identifiers</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to enable namespaced identifers support on the pipe. The default value is read from the service metadata. If not specified in the service metadata then the default value is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
<td><p>Service metadata default</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespaces.identity</span></code></p></td>
<td><p>String</p></td>
<td><p>The namespace used for identifiers. The default value is the pipe’s id.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pipe.id</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">namespaces.property</span></code></p></td>
<td><p>String</p></td>
<td><p>The namespace used for properties. The default value is the pipe’s id.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pipe.id</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">add_namespaces</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then the current identity namespace will be added to <code class="docutils literal notranslate"><span class="pre">_id</span></code> and the current property namespace will be added to all properties. The namespaces are added before the first transform. This property is normally only specified on inbound pipes.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">namespaced_identifiers</span></code> is enabled in the service metadata then the source default value is used. The following sources has a default value of <code class="docutils literal notranslate"><span class="pre">true</span></code>: <a class="reference internal" href="#csv-source"><span class="std std-ref">csv</span></a>, <a class="reference internal" href="#ldap-source"><span class="std std-ref">ldap</span></a>, <a class="reference internal" href="#sql-source"><span class="std std-ref">sql</span></a>, <a class="reference internal" href="#embedded-source"><span class="std std-ref">embedded</span></a>, <a class="reference internal" href="#http-endpoint-source"><span class="std std-ref">http_endpoint</span></a>, and <a class="reference internal" href="#json-source"><span class="std std-ref">json</span></a>.</p>
</td>
<td><p>Source default</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">remove_namespaces</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then namespaces will be removed from <code class="docutils literal notranslate"><span class="pre">_id</span></code>, properties and namespaced identifier values. The namespaces are removed after the last transform. This property is normally only specified on outbound pipes.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">namespaced_identifiers</span></code> is enabled in the service metadata then the sink default value is used. The following sinks has a default value of <code class="docutils literal notranslate"><span class="pre">true</span></code>:  <a class="reference internal" href="#csv-endpoint-sink"><span class="std std-ref">csv_endpoint</span></a>, <a class="reference internal" href="#elasticsearch-sink"><span class="std std-ref">elasticsearch</span></a>, <a class="reference internal" href="#mail-sink"><span class="std std-ref">mail</span></a>, <a class="reference internal" href="#rest-sink"><span class="std std-ref">rest</span></a>, <a class="reference internal" href="#sms-sink"><span class="std std-ref">sms</span></a>, <a class="reference internal" href="#solr-sink"><span class="std std-ref">solr</span></a>, <a class="reference internal" href="#sql-sink"><span class="std std-ref">sql</span></a>, <a class="reference internal" href="#http-endpoint-sink"><span class="std std-ref">http_endpoint</span></a>, and <a class="reference internal" href="#json-sink"><span class="std std-ref">json</span></a>.</p>
</td>
<td><p>Sink default</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="compaction">
<span id="pipe-compaction"></span><h3>Compaction<a class="headerlink" href="#compaction" title="Permalink to this headline">¶</a></h3>
<p>Compaction deletes the oldest entities in a dataset and reclaims space for those
entities in the dataset’s indexes.</p>
<p>Datasets that are written to by pipes using the <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> are compacted incrementally as
the pipe writes new entities to the dataset by default (compaction type “sink” enabled). If sink compaction is disabled,
the dataset is automatically compacted once every 24 hours (compaction type “background” in the global settings or
compaction.sink set to <code class="docutils literal notranslate"><span class="pre">false</span></code>). The default is to keep the last two versions of every
entity up until the current time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Compaction will only be performed up to the lowest offset for which there exists a pipe doing dependency tracking on the dataset. Each pipe doing dependency tracking keeps a tracking offset on the dataset so that it knows which entities to perform dependency tracking for. It is this tracking offset that compaction cannot go beyond. This is done so that those pipes should not fall out of sync. If the compaction did not hold off then we could not guarantee that the output of those pipes are correct.</p>
<p>Be aware that disabled pipes also hold off compaction. If the pipes are to be disabled for a long time then it is better to remove the pipe, or alternatively comment out the hops.</p>
</div>
<div class="section" id="id5">
<h4>Properties<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compaction.automatic</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then the dataset is a candidate for automatic compaction.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">compaction.sink</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then the dataset sink will perform dataset compaction. This will make compaction happen incrementally as new entities are written to the dataset. If this is enabled, then automatic compaction won’t run for the dataset itself, but dataset index compaction will be scheduled. Note that dataset index compaction does not require a lock on the dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compaction.keep_versions</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of unique versions of an entity to keep around. The default is <code class="docutils literal notranslate"><span class="pre">2</span></code>.
The value must be greater than or equal to <code class="docutils literal notranslate"><span class="pre">0</span></code>. If set to <code class="docutils literal notranslate"><span class="pre">0</span></code> then a time
threshold must be set explicitly.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A value less than <code class="docutils literal notranslate"><span class="pre">2</span></code> means that dependency tracking is best effort only,
and it will not be able to find all reprocessable entities. Do full or partial
rescans as a counter measure.</p>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">compaction.time_threshold_hours</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Specifies the threshold for how old entities must be before they are considered
for compaction. This property is usually used when you want to keep entities
around for a certain time.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compaction.time_threshold_hours_pump</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Same as <code class="docutils literal notranslate"><span class="pre">compaction.time_threshold_hours</span></code>, but applies to the pipe’s pump
execution dataset. Pump execution datasets are always trimmed by time.  The
default is 30 days, which is the minimum value allowed.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">720</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">compaction.growth_threshold</span></code></p></td>
<td><p>Float</p></td>
<td><p>The growth factor required for the automatically scheduled compaction to kick
in. Uses the minimum value of <code class="docutils literal notranslate"><span class="pre">1.0</span></code> by default, meaning that compaction will always
run when new entities are written to the dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compaction.compaction_interval</span></code></p></td>
<td><p>Float</p></td>
<td><p>Specifies the sink compaction interval. If this value is zero, sink compaction will run every time
the pipe runs. If it is larger than zero, sink compaction will only run if at least
<code class="docutils literal notranslate"><span class="pre">compaction_interval</span></code> seconds has passed since the last sink compaction. The use-case for this setting is
to prevent a pipe that run often from constantly trying to compact the sink-dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="circuit-breakers">
<span id="circuit-breakers-section"></span><h3>Circuit breakers<a class="headerlink" href="#circuit-breakers" title="Permalink to this headline">¶</a></h3>
<p>A circuit breaker is a safety mechanism that one can enable on the
<a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a>. The circuit breaker will trip if
the number of entities written to a dataset in a pipe run exceeds a
certain configurable limit.</p>
<p>Note that a circuit breaker is only activated if the sink dataset is
populated. In practice this means that the pipe must have ran to
completion at least once. This is to avoid tripping it on the initial
sync.</p>
<p>A tripped circuit breaker will prevent the pipe from running.
It can either be rolled back or committed. Rolling it back
will delete any entities that were written in the pipe run before the
circuit breaker was tripped. Committing it will expose the uncommitted
entities. Both operations resets the circuit breaker so that pipe can
run again.</p>
<p>Compaction will not be performed on datasets with a tripped circuit
breaker. It is also not possible to repost entities to these datasets.</p>
<p>You can rollback or commit the circuit breaker on the dataset page in
the <a class="reference internal" href="management-studio.html"><span class="doc">Management Studio</span></a>, or use the
<a class="reference external" href="api.html#post--datasets-dataset_id">service API</a>.</p>
</div>
<div class="section" id="resetting">
<h3>Resetting<a class="headerlink" href="#resetting" title="Permalink to this headline">¶</a></h3>
<p>When the configuration of a pipe is modified in such a way that the entities the pipe
produces changes (for instance by changing the DTL transform of the pipe), the pipe’s “last-seen”
value must be cleared in order to reprocess already seen entities with the new pipe
configuration.</p>
<p>This can be done by setting the “last-seen” value to an empty string with the
<a class="reference external" href="./api.html#api-reference-pump-update-last-seen">update-last-seen</a> operation in the Service API.</p>
</div>
<div class="section" id="automatic-reprocessing">
<span id="id6"></span><h3>Automatic reprocessing<a class="headerlink" href="#automatic-reprocessing" title="Permalink to this headline">¶</a></h3>
<p>Datasets that are input to a pipe or datasets that are hop-ed to by a pipe may be deleted. When this happens the data output by a pipe is no longer in sync with the input data. By default a pipe will not reset automatically if this happens, but it will maintain a list of datasets that are out of sync. Alternatively one can set the reprocessing policy to <code class="docutils literal notranslate"><span class="pre">automatic</span></code> so that such resets happen automatically.</p>
<div class="section" id="id7">
<h4>Properties<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reprocessing_policy</span></code></p></td>
<td><p>Enum&lt;String&gt;</p></td>
<td><p>Specifies the policy that the pipe uses to decide if a pipe needs to be reset or not.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">continue</span></code> (the default) means that the pipe will continue processing input entities, and not reset the pipe, even though there might be factors indicating the the pipe should be reset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">automatic</span></code> means that the pipe will automatically reset the pipe when it finds that there are factors that indicate that the pipe should be reset. The rationale for resetting the pipe is so that input entities can the reprocessed so that the output is correct.</p></li>
</ul>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">continue</span></code></p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="completeness">
<span id="id8"></span><h3>Completeness<a class="headerlink" href="#completeness" title="Permalink to this headline">¶</a></h3>
<p>When a pipe completes a successful run the sink dataset will inherit the smallest completeness timestamp value of the source datasets and the related datasets. Inbound pipes will use the current time as the completeness timestamp value (the <a class="reference internal" href="#http-endpoint-source"><span class="std std-ref">http_endpoint</span></a> can optionally get the completeness value from a request header). This mechanism has been introduced so that a pipe can hold off processing source entities that are more recent than the source dataset’s completeness timestamp value. The propagation of these timestamp values is done automatically. Individual datasets can be excluded from completeness timestamp calculation via the <code class="docutils literal notranslate"><span class="pre">exclude_completeness</span></code> property on the pipe.  One can enable the completeness filtering feature on a pipe by setting the <code class="docutils literal notranslate"><span class="pre">completeness</span></code> property on the <a class="reference internal" href="#dataset-source"><span class="std std-ref">dataset source</span></a> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Completeness is implictly incompatible with full rescans as they do not necessarily expose all the latest entities. This means that if deletion tracking is performed by the pipe that has completeness set to <code class="docutils literal notranslate"><span class="pre">true</span></code> then the non-covered entity ids will get deleted from the sink dataset. This may or may not be a problem depending on the use-case. Deletion tracking is only performed by pipes with <code class="docutils literal notranslate"><span class="pre">dataset</span></code> sinks currently. Set <code class="docutils literal notranslate"><span class="pre">deletion_tracking</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> on the <code class="docutils literal notranslate"><span class="pre">dataset</span></code> sink if you do not want deletion tracking to be performed.</p>
</div>
<div class="section" id="id9">
<h4>Properties<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exclude_completeness</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>A list of dataset ids that should not contribute to the completeness timestamp value. Any
dataset listed in this property will be ignored when calculating the dataset sink
completeness timestamp value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If all datasets are excluded a new completeness timestamp value will be generated in this pipe.</p>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="example-configuration">
<h3>Example configuration<a class="headerlink" href="#example-configuration" title="Permalink to this headline">¶</a></h3>
<p>The following example shows a pipe definition that exposes data from a SQL database table called <code class="docutils literal notranslate"><span class="pre">customers</span></code>, and feeds it into a sink that writes the data into a dataset called <code class="docutils literal notranslate"><span class="pre">Northwind:Customers</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;northwind-customers&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwind customers&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwind&quot;</span><span class="p">,</span>
        <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;Customers&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwind:Customers&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;schedule_interval&quot;</span><span class="p">:</span> <span class="mi">3600</span>
    <span class="p">},</span>
    <span class="s2">&quot;compaction&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;keep_versions&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;time_threshold_hours&quot;</span><span class="p">:</span> <span class="mi">48</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sources">
<span id="source-section"></span><h2>Sources<a class="headerlink" href="#sources" title="Permalink to this headline">¶</a></h2>
<p>Sources provide <em>streams</em> of <a class="reference internal" href="entitymodel.html"><span class="doc">entities</span></a> as input to
the <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipes</span></a> which is the building blocks for the
data flows in Sesam. These entities can take <em>any</em> shape (i.e. they
can also be nested), and have a single required property:
<strong>_id</strong>. This <code class="docutils literal notranslate"><span class="pre">_id</span></code> field must be <em>unique within a flow</em> for a
specific logical entity. There may exist multiple <em>versions</em> of this
entity within a flow, however.</p>
<div class="section" id="id10">
<h3>Prototype<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>The following <em>JSON</em> snippet shows the general form of a source definition.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;a-source-type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a comment&quot;</span><span class="p">,</span>
    <span class="o">..</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The only universally required property is <code class="docutils literal notranslate"><span class="pre">type</span></code>.</p>
</div>
<div class="section" id="id11">
<h3>Properties<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>String</p></td>
<td><p>The type of the source, the allowed types are described below</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable comment on the source (optional).</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="continuation-support">
<span id="id12"></span><h3>Continuation support<a class="headerlink" href="#continuation-support" title="Permalink to this headline">¶</a></h3>
<p>Sources can optionally support a <code class="docutils literal notranslate"><span class="pre">since</span></code> marker which lets them pick
up where the previous stream of entities left off - like a “bookmark”
in the entity stream. The <code class="docutils literal notranslate"><span class="pre">since</span></code> marker is opaque to the rest of
the Sesam components and it is assumed to be interpretable <em>only by
the source</em>. Within an entity the marker is carried in the
<code class="docutils literal notranslate"><span class="pre">_updated</span></code> property if supported by its source.</p>
<p>Sesam supports a diverse set of core data sources. For many of the built-in source modules, such as many of the SQL sources, all you need to to is to place the property <a class="reference internal" href="#sql-source"><span class="std std-ref">updated_column</span></a> in the <a class="reference internal" href="#source-section"><span class="std std-ref">source</span></a> section of your config. It’s corresponding value should be the column (if it exists) inside the SQL table which contains time-stamp or sequence information from when the row was last updated. For continuation support in a <a class="reference internal" href="getting-started.html#getting-started-microservices"><span class="std std-ref">microservice</span></a>, see the example at the bottom of this section.</p>
<p>There are four characteristics that describe continuation
support. All sources have these and there are three properties
available to describe them. The properties can be fixed, have a
default value or be calculated from other properties (aka dynamic) on
the source. The table below explains them in detail.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important that you do not to set any of the boolean properties to
<code class="docutils literal notranslate"><span class="pre">true</span></code> unless the source actually have these
characteristics. Doing so can mean that the pump is not able track
changes properly.</p>
</div>
<table class="colwidths-given table">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Does the source make use of the ‘since’ parameter if it gets
passed one?</p>
<p>This property is typically used to disable the tracking of the
<code class="docutils literal notranslate"><span class="pre">since</span></code> marker. Sometimes it is not necessary to perform the
tracking as the source won’t make use of it anyway.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you set <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> then you should
also make sure that you set either <code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code> to
<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">is_chronological</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> — or <em>both</em>
depending on the strategy you want.</p>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Can you compare two <code class="docutils literal notranslate"><span class="pre">_updated</span></code> values using lexical/bytewise
comparison and decide their relative order?</p>
<p>This property is used to specify if the values of two
entities’s <code class="docutils literal notranslate"><span class="pre">_updated</span></code> properties are always comparable. If
the property can contain values of different types or
structures, then it may not be possible to use lexical/bytewise
comparison of the two values to decide order.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you set <code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> then you
should also make sure that <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Does the source hand out entities in chronological order, i.e.
in increasing order?</p>
<p>If the entities are sorted in chronological other, then the
pump can shift its <code class="docutils literal notranslate"><span class="pre">since</span></code> marker for each new entity in the
stream. It can also store it away more often. This is a good
characteristic to have as it makes the source able to continue
where it left off even though the previous run did not complete
fully. If the property is set to <code class="docutils literal notranslate"><span class="pre">false</span></code> then it can only
know at the end of the run what the new <code class="docutils literal notranslate"><span class="pre">since</span></code> marker is.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you set <code class="docutils literal notranslate"><span class="pre">is_chronological</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> then you
should also make sure that <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">initial_since_value</span></code></p></td>
<td><p>String or integer</p></td>
<td><p>If set, the source will use this value as the “since” value if the pipe offset has not been set yet (or
the pipe has been reset). It should be used when you don’t want the source to fetch all available data when
the pipe is initially run or has been reset. Note that this value is only used by sources that can support “since”.</p></td>
</tr>
</tbody>
</table>
<p id="strategy">The strategy for tracking the <code class="docutils literal notranslate"><span class="pre">since</span></code> marker is chosen like this — and in this specific order:</p>
<ol class="arabic simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">is_chronological</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> then continuation support is enabled and the <em>chronological</em> strategy is chosen. This strategy will store <code class="docutils literal notranslate"><span class="pre">_updated</span></code> values in the order we see them.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> then continuation support is enabled and the <em>max</em> strategy is chosen. This strategy will store the maximum <code class="docutils literal notranslate"><span class="pre">_updated</span></code> value seen in the run.</p></li>
<li><p>If none of the above apply, then continuation support is disabled. No tracking of the <code class="docutils literal notranslate"><span class="pre">since</span></code> marker is then done.</p></li>
</ol>
<p>The table below shows which strategy is chosen depending on the value of the properties:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></th>
<th class="head"><p>Strategy</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Chronological</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>Max</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Chronological</p></td>
</tr>
</tbody>
</table>
<p>If continuation support is enabled for a pipe, the <code class="docutils literal notranslate"><span class="pre">since</span></code>
marker is stored in the <code class="docutils literal notranslate"><span class="pre">pipe_offset</span></code> property on the pump. Note that
one can use the pump’s <a class="reference external" href="api.html#post--pipes-pipe_id-pump">update-last-seen</a> operation in the <a class="reference internal" href="api.html"><span class="doc">Service API</span></a> to
update or reset the <code class="docutils literal notranslate"><span class="pre">pipe_offset</span></code> value manually. This is useful in
cases where one wants to reprocess the data from scratch for some
reason. The <a class="reference internal" href="api.html"><span class="doc">Service API</span></a> can also tell you what the current
<code class="docutils literal notranslate"><span class="pre">pipe_offset</span></code> value is.</p>
<div class="section" id="continuation-support-for-microservices">
<h4>Continuation support for Microservices<a class="headerlink" href="#continuation-support-for-microservices" title="Permalink to this headline">¶</a></h4>
<p>If you wish to activate continuation support for a <a class="reference internal" href="getting-started.html#getting-started-microservices"><span class="std std-ref">microservice</span></a> the pipe source needs to have the “supports_since” parameter set as true, as well as either the “is_since_comparable” or “is_chronological” strategy. An example of this is shown in the Sesam config example below.</p>
<details>
<summary><a>Inbound pipe example of continuation support from a microservice</a></summary><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;contacts-test&quot;</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;system-name&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;is_since_comparable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;supports_since&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/get-contacts&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dtl&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span><span class="p">,</span> <span class="s2">&quot;_S.contactid&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;copy&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0/10 * * * *&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rescan_cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0 * * * *&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details><p>The microservice needs to pass on an entity property named “_updated” to Sesam for each entity from the source. This property should take the value corresponding to the time-stamp or sequence value of the source data representing the last data update for that entity (the same column as for the “updated_column” for SQL type sources). When the entities have been passed on into Sesam, the inbound pipe will go through all these “_updated” values and pick the max value as the new “pipe_offset”.</p>
<p>The first time the inbound pipe runs (or if the pipe is reset), the “pipe_offset” will not have a value, resulting in a complete import of all the data from the endpoint. Once data has been imported, the new “pipe_offset” will get passed to the microservice as the query parameter “since”. This parameter can in turn be used as a query parameter to the API ensuring that only data updated after the last “since” value will be included in the GET request. An example of this is shown in the Python code snippet below.</p>
<details>
<summary><a>Microservice example of continuation support</a></summary><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/get-contacts&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_contacts</span><span class="p">():</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">auth</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;since&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">api_url</span> <span class="o">+</span> <span class="s2">&quot;/contacts&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">api_url</span> <span class="o">+</span> <span class="s2">&quot;/contacts?filter=modifiedon ge </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;since&#39;</span><span class="p">))</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">token</span><span class="p">)}</span>

    <span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">req</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
      <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unexpected response status code: </span><span class="si">%d</span><span class="s2"> with response text </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">req</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
      <span class="k">raise</span> <span class="ne">AssertionError</span> <span class="p">(</span><span class="s2">&quot;Unexpected response status code: </span><span class="si">%d</span><span class="s2"> with response text </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">req</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
    <span class="n">entities</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
      <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;_updated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span><span class="p">[</span><span class="s2">&quot;modifiedon&quot;</span><span class="p">]</span>
</pre></div>
</div>
</details><p>In this case the data from the source is not ordered chronologically, which means we can not use the “is_chronological” tag. The benefit of chronologically ordered data in the source system is that if the pipe’s pump for some reason should fail in the middle of a request, Sesam can use the chronological order of the source data to continue requesting data from the last received entity. If the data is not ordered, Sesam has to re-run the whole last request.</p>
</div>
</div>
<div class="section" id="dataset-source">
<span id="id13"></span><h3>Dataset source<a class="headerlink" href="#dataset-source" title="Permalink to this headline">¶</a></h3>
<p>The dataset source is one of the most commonly used sources in a Sesam installation. It simply presents a stream of entities from a
dataset stored in Sesam. Its configuration is very simple and looks like:</p>
<div class="section" id="id14">
<h4>Prototype<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-dataset&quot;</span><span class="p">,</span>
    <span class="s2">&quot;include_previous_versions&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;include_replaced&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;supports_signalling&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h4>Properties<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dataset</span></code></p></td>
<td><p>String</p></td>
<td><div class="line-block">
<div class="line">A dataset id</div>
</div>
</td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">subset</span></code></p></td>
<td><p>Array</p></td>
<td><div class="line-block">
<div class="line">An <code class="docutils literal notranslate"><span class="pre">eq</span></code> DTL expression where the left hand side is the index expression and the right hand side is the value that represents the subset. If the subset is specified then only entities that are in that subset will be read from the source.</div>
<div class="line"><br /></div>
<div class="line">Example: <code class="docutils literal notranslate"><span class="pre">[&quot;eq&quot;,</span> <span class="pre">&quot;_S.category&quot;,</span> <span class="pre">&quot;tank&quot;]</span></code></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure that you use indexes version 2 when you use subsets. The reason is that these support deletes. Indexes version 1 does not.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Subsets currently also return non-latest versions of entities within the subset.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>eq</cite> in subsets behaves the way it does in <a class="reference internal" href="DTLReferenceGuide.html#joins"><span class="std std-ref">joins</span></a>.</p>
</div>
</td>
<td></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">completeness</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the dataset source completeness filtering feature is enabled. This will instruct the source to only return source entities that have a <code class="docutils literal notranslate"><span class="pre">_ts</span></code> value that is older than or equal to the completeness timestamp value of the source dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">include_previous_versions</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the dataset source will only return the latest
version of any entity for any unique <code class="docutils literal notranslate"><span class="pre">_id</span></code> value in the dataset. This is the default behaviour.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">include_replaced</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the dataset source will filter out entities where the <code class="docutils literal notranslate"><span class="pre">$replaced</span></code> property is <code class="docutils literal notranslate"><span class="pre">true</span></code>. This typically used when reading from datasets that have been produced by the <a class="reference internal" href="#merge-source"><span class="std std-ref">merge</span></a> source.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to enable or disable signalling support between internal pipes (dataset to dataset pipes). If enabled, a pipe
run is scheduled as soon as the input dataset(s) changes. It does not interrupt any already running pipes.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">global_defaults.use_signalling_internally</span></code> in the <a class="reference internal" href="#service-metadata-section"><span class="std std-ref">service metadata</span></a> section for more details.</p>
<p>If signalling is turned on globally, you will have to explicitly set <code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> to
disable it on individual pipes where you don’t want to automatically schedule runs on changes. Note that it is
automatically disabled (if not explicitly enabled on the source) if the schedule interval is less than 2 minutes or a cron
expression has been used.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id16">
<h4>Continuation support<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id17">
<h4>Example configuration<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;northwind:customers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;include_previous_versions&quot;</span><span class="p">:</span> <span class="n">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="merge-source">
<span id="id18"></span><h3>Merge source<a class="headerlink" href="#merge-source" title="Permalink to this headline">¶</a></h3>
<p>The merge source is a source that is able to infer the sameness of
entities across multiple datasets. The source uses a set of equality
rules to figure out which entities are the same. Equality is resolved
transitively, so if A is the same as B and B is the same as C then A,
B and C are all considered the same.</p>
<p>Deletes will be output for entity ids that are no longer
applicable. This typically happens when an entity is first merged with
one entity and then later merged with some other entities, and the id
of the resulting entity changes. Those entities will also have the
<code class="docutils literal notranslate"><span class="pre">$replaced</span></code> property set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>If an entity is deleted in its source dataset then the entity will not
be merged, but instead output as a standalone entity with <code class="docutils literal notranslate"><span class="pre">_deleted</span></code>
set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<div class="section" id="id19">
<h4>Prototype<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<div class="section" id="variant-1-explicit-equality-rules-with-the-equality-property">
<h5>Variant 1: Explicit equality-rules with the <code class="docutils literal notranslate"><span class="pre">equality</span></code> property<a class="headerlink" href="#variant-1-explicit-equality-rules-with-the-equality-property" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;merge&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A a&quot;</span><span class="p">,</span> <span class="s2">&quot;B b&quot;</span><span class="p">,</span> <span class="s2">&quot;C c&quot;</span><span class="p">,</span> <span class="s2">&quot;D d&quot;</span><span class="p">],</span>
    <span class="s2">&quot;equality&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;a.x&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;c.z&quot;</span><span class="p">,</span> <span class="s2">&quot;d.z&quot;</span><span class="p">],</span>
    <span class="p">],</span>
    <span class="s2">&quot;supports_signalling&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="variant-2-implicit-equality-rules-with-the-equality-sets-property">
<h5>Variant 2: Implicit equality-rules with the <code class="docutils literal notranslate"><span class="pre">equality_sets</span></code> property<a class="headerlink" href="#variant-2-implicit-equality-rules-with-the-equality-sets-property" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;merge&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A a&quot;</span><span class="p">,</span> <span class="s2">&quot;B b&quot;</span><span class="p">,</span> <span class="s2">&quot;C c&quot;</span><span class="p">,</span> <span class="s2">&quot;D d&quot;</span><span class="p">],</span>
    <span class="s2">&quot;equality_sets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;a.x&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;c.z&quot;</span><span class="p">,</span> <span class="s2">&quot;d.z&quot;</span><span class="p">],</span>
    <span class="p">],</span>
    <span class="s2">&quot;supports_signalling&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id20">
<h4>Properties<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td><p>Number</p></td>
<td><p>There are two different versions of the merge source. Note that the default value is <code class="docutils literal notranslate"><span class="pre">1</span></code> for compatibility reasons. Version <code class="docutils literal notranslate"><span class="pre">1</span></code> is deprecated. Use version <code class="docutils literal notranslate"><span class="pre">2</span></code> if this is a new pipe.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">datasets</span></code></p></td>
<td><p>List&lt;String{&gt;=1}&gt;</p></td>
<td><p>A list of one or more datasets that are to be merged. Each item in this list is a pair of dataset id and dataset alias. A given dataset can only appear once in this list. The syntax is the same as in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> property in <a class="reference internal" href="DTLReferenceGuide.html#hops-dtl-function"><span class="std std-ref">hops</span></a>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">initial_datasets</span></code></p></td>
<td><p>List&lt;String{&gt;=0}&gt;</p></td>
<td><p>By default the source will be considered populated if all the datasets in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code>  property have been populated. If some of these datasets will never be populated then this property can be used to list the datasets that must be populated before the source is considered populated. You should normally not have to use this property.</p>
<p>See also the <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> property <code class="docutils literal notranslate"><span class="pre">set_initial_offset</span></code>.</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">equality</span></code></p></td>
<td><p>List&lt;EqFunctions{&gt;=0}&gt;</p></td>
<td><p>A list of zero or more <code class="docutils literal notranslate"><span class="pre">eq</span></code> functions that are to be used to decide which entities are the same. The functions must follow the rules for <a class="reference internal" href="DTLReferenceGuide.html#joins"><span class="std std-ref">joins</span></a> in DTL.
Note: Consider using the newer <code class="docutils literal notranslate"><span class="pre">equality_sets</span></code> property instead.</p></td>
<td></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">equality_sets</span></code></p></td>
<td><p>List&lt;List&lt;ValueExpressions&gt;{&gt;0}&gt;</p></td>
<td><p>A list of lists with one or more value expressions. This is the preferred alternative to using the old
<code class="docutils literal notranslate"><span class="pre">equality</span></code> property to specify the equality-rules. See below for a detailed explanation of the difference between <code class="docutils literal notranslate"><span class="pre">equality</span></code> and <code class="docutils literal notranslate"><span class="pre">equality_sets</span></code>.</p></td>
<td></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">identity</span></code></p></td>
<td><p>String</p></td>
<td><p>Specifies the strategy for how to create the <code class="docutils literal notranslate"><span class="pre">_id</span></code> of the resulting entities.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;composite&quot;</span></code> - The default, which is to create an id
composed of all the ids of the entities involved and the
offset of the dataset from which they originates.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;0|one1|1|two1|1|two2|2|three3&quot;</span></code>. This particular
id consists of four entity ids from three datasets. If it is
the result of the prototypical merge source shown above, then
<code class="docutils literal notranslate"><span class="pre">one1</span></code> is the id of an entity from the <code class="docutils literal notranslate"><span class="pre">d1</span></code> dataset,
<code class="docutils literal notranslate"><span class="pre">two1</span></code> and <code class="docutils literal notranslate"><span class="pre">two2</span></code> are ids of entities from the <code class="docutils literal notranslate"><span class="pre">d2</span></code>
dataset, and <code class="docutils literal notranslate"><span class="pre">three3</span></code> is the id of an entity from the
<code class="docutils literal notranslate"><span class="pre">d3</span></code> dataset.</p>
<p>The parts of the composite id are first ordered by the offset
of the dataset in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> property, then by the
entities’ <code class="docutils literal notranslate"><span class="pre">_id</span></code> property. This results in a deterministic
entity id.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;first&quot;</span></code> - Similar to the <code class="docutils literal notranslate"><span class="pre">composite</span></code> strategy, but uses
the entity id of the first entity given the same ordering
rules as above.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">&quot;one1&quot;</span></code>.</p>
</li>
</ul>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;composite&quot;</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">strategy</span></code></p></td>
<td><p>String</p></td>
<td><p>The strategy to use to combine the properties of the merged
entities. This affects how the resulting entities look.</p>
<p>The examples below illustrate the results of merging the
following three entities in this particular order (ids omitted for brevity):
<code class="docutils literal notranslate"><span class="pre">{&quot;x&quot;:1}</span></code>, <code class="docutils literal notranslate"><span class="pre">{&quot;y&quot;:</span> <span class="pre">[2,</span> <span class="pre">1]}</span></code>, <code class="docutils literal notranslate"><span class="pre">{&quot;y&quot;:</span> <span class="pre">2,</span> <span class="pre">&quot;z&quot;:</span> <span class="pre">[3,</span> <span class="pre">3]}</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code> - The default is to union all the values. This is similar to how the
<a class="reference internal" href="DTLReferenceGuide.html#dtl-transform-merge-union"><span class="std std-ref">merge-union</span></a> DTL function
works. Duplicates are not removed.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">{&quot;x&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;y&quot;:</span> <span class="pre">[2,</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">&quot;z&quot;:</span> <span class="pre">[3,</span> <span class="pre">3]}</span></code></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;compact&quot;</span></code> - Similar to the default strategy, but tries to
compact the property values; duplicate values are removed,
properties with empty lists are dropped, and list properties
with a single value are turned into single valued properties.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">{&quot;x&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;y&quot;:</span> <span class="pre">[2,</span> <span class="pre">1],</span> <span class="pre">&quot;z&quot;:</span> <span class="pre">3}</span></code></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;list&quot;</span></code> - Returns an entity with a <code class="docutils literal notranslate"><span class="pre">$merged</span></code> property
which contains a list of the merged entities. This strategy
can be used to implement custom strategies.</p>
<div class="line-block">
<div class="line">Example:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{&quot;$merged&quot;:</span> <span class="pre">[</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{&quot;x&quot;:</span> <span class="pre">1},</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{&quot;y&quot;:</span> <span class="pre">[2,</span> <span class="pre">1]},</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{&quot;y&quot;:</span> <span class="pre">2,</span> <span class="pre">&quot;z&quot;:</span> <span class="pre">[3,</span> <span class="pre">3]}]}</span></code></div>
</div>
</div>
</li>
</ul>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to enable or disable signalling support between internal pipes (dataset to dataset pipes). If enabled, a pipe
run is scheduled as soon as the input dataset(s) changes. It does not interrupt any already running pipes.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">global_defaults.use_signalling_internally</span></code> in the <a class="reference internal" href="#service-metadata-section"><span class="std std-ref">service metadata</span></a> section for more details.</p>
<p>If signalling is turned on globally, you will have to explicitly set <code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> to
disable it on individual pipes where you don’t want to automatically schedule runs on changes. Note that it is
automatically disabled (if not explicitly enabled on the source) if the schedule interval is less than 2 minutes or a cron
expression has been used.</p>
</td>
<td><p>false</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="equality-vs-equality-sets">
<h4>“equality” vs “equality_sets”<a class="headerlink" href="#equality-vs-equality-sets" title="Permalink to this headline">¶</a></h4>
<p>Equality is resolved transitively, so if A is the same as B and B is the same as C then A,
B and C are all considered the same. With the <code class="docutils literal notranslate"><span class="pre">equality</span></code> property, these rules must be specified
one at a time, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;equality&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;a.x&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;c.z&quot;</span><span class="p">,</span> <span class="s2">&quot;d.z&quot;</span><span class="p">],</span>
<span class="p">],</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">equality_sets</span></code> property was added as a way to makes it clearer which equality-rules belong together.
The equality-rules above could be expressed like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;equality_sets&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;a.x&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;c.z&quot;</span><span class="p">,</span> <span class="s2">&quot;d.z&quot;</span><span class="p">],</span>
<span class="p">],</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">equality_sets</span></code> property is just a bit of syntactic sugar; behind the scenes the implicit
equality-rules are added to the rules in the <code class="docutils literal notranslate"><span class="pre">equality</span></code> property. This means that you can use both the
<code class="docutils literal notranslate"><span class="pre">equality_sets</span></code> and the <code class="docutils literal notranslate"><span class="pre">equality</span></code> property at the same time if you want (although this is not recommended, since
it makes it harder to figure out the equality-rules). It also means that you will not get a configuration warning if
if you accidentally specify two equality-sets that are actually overlapping. If you for example specify this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;equality_sets&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;a.x&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;c.y&quot;</span><span class="p">,</span> <span class="s2">&quot;d.y&quot;</span><span class="p">],</span>
<span class="p">],</span>
</pre></div>
</div>
<p>you won’t actually get two equality-sets, since behind the scenes you end up with these equality-rules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;equality&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;a.x&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">,</span> <span class="s2">&quot;d.y&quot;</span><span class="p">]</span>
<span class="p">],</span>
</pre></div>
</div>
<p>, which is equivalent to specifying a single equality-set, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;equality_sets&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;a.x&quot;</span><span class="p">,</span> <span class="s2">&quot;b.x&quot;</span><span class="p">,</span> <span class="s2">&quot;c.y&quot;</span><span class="p">,</span> <span class="s2">&quot;d.y&quot;</span><span class="p">],</span>
<span class="p">],</span>
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h4>Continuation support<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id22">
<h4>Example configuration<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>Below you’ll find three datasets <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code> and a pipe configuration
that uses the <code class="docutils literal notranslate"><span class="pre">merge</span></code> source.</p>
<p>Dataset <code class="docutils literal notranslate"><span class="pre">A</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;a1&quot;</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;a2&quot;</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Dataset <code class="docutils literal notranslate"><span class="pre">B</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;b1&quot;</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;f2&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;b2&quot;</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Dataset <code class="docutils literal notranslate"><span class="pre">C</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;f3&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;_deleted&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="s2">&quot;f3&quot;</span><span class="p">:</span> <span class="s2">&quot;Y&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;c3&quot;</span><span class="p">,</span> <span class="s2">&quot;_deleted&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="s2">&quot;f3&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Pipe configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;merge&quot;</span><span class="p">,</span>
        <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A a&quot;</span><span class="p">,</span> <span class="s2">&quot;B b&quot;</span><span class="p">,</span> <span class="s2">&quot;C c&quot;</span><span class="p">],</span>
        <span class="s2">&quot;equality&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;a.f1&quot;</span><span class="p">,</span> <span class="s2">&quot;b.f1&quot;</span><span class="p">],</span>
            <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;b.f2&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span> <span class="s2">&quot;c.f3&quot;</span><span class="p">]],</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Given the above we should expect an output that looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;$ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a1&quot;</span><span class="p">,</span> <span class="s2">&quot;b1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">],</span> <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0|a1|1|b1|2|c1&quot;</span><span class="p">,</span> <span class="s2">&quot;_updated&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="s2">&quot;f1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;f2&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;f3&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;$ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a2&quot;</span><span class="p">],</span> <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0|a2&quot;</span><span class="p">,</span> <span class="s2">&quot;_updated&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;$ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;b2&quot;</span><span class="p">],</span> <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1|b2&quot;</span><span class="p">,</span> <span class="s2">&quot;_updated&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;$ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c2&quot;</span><span class="p">],</span> <span class="s2">&quot;_deleted&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2|c2&quot;</span><span class="p">,</span> <span class="s2">&quot;_updated&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;f3&quot;</span><span class="p">:</span> <span class="s2">&quot;Y&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;$ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;c3&quot;</span><span class="p">],</span> <span class="s2">&quot;_deleted&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2|c3&quot;</span><span class="p">,</span> <span class="s2">&quot;_updated&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;f3&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Entities <code class="docutils literal notranslate"><span class="pre">a1</span></code>, <code class="docutils literal notranslate"><span class="pre">b1</span></code> and <code class="docutils literal notranslate"><span class="pre">c1</span></code> have been merged. Entities <code class="docutils literal notranslate"><span class="pre">a2</span></code>
and <code class="docutils literal notranslate"><span class="pre">b2</span></code> did not match any other entities. Deleted entities, like
<code class="docutils literal notranslate"><span class="pre">c2</span></code> and <code class="docutils literal notranslate"><span class="pre">c3</span></code>, are never merged with any other entities.</p>
<p>The merged entities are combined so that the properties and their
values are merged in the resulting entity. <code class="docutils literal notranslate"><span class="pre">null</span></code> values are kept
intact. List values appear in a consistent order and may contain
duplicate values.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_updated</span></code> property is a sequence number that increases every
time a new entity is generated by the source. Entities appear in
chronological order.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_id</span></code> property is a composite id that consists of the dataset
offset and entity id joined by the <code class="docutils literal notranslate"><span class="pre">|</span></code> character. The dataset offset
is the index of the dataset in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> property in the pipe
configuration. The composite parts are ordered by dataset offset and
entity in order to get consistent ids.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">$ids</span></code> property contains all the original entity ids of the
entities merged into the entity. Note that an entity id will not be
added to this list if the original entity has the <code class="docutils literal notranslate"><span class="pre">$ids</span></code>
property. Because of how properties are merged the <code class="docutils literal notranslate"><span class="pre">$ids</span></code> will end
up being a union of all the orginal entity ids excluding the entity
ids of the merge entities themselves. This is useful when merging
already merged entities downstream.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not remove a dataset from the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> property nor change
the order of the datasets in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> property. Doing so
may lead to inconsistent results. Adding or renaming datasets is OK
though as this won’t affect the order of the datasets.</p>
<p>If config changes are required be aware of the following:
Using merge source version <code class="docutils literal notranslate"><span class="pre">1</span></code> any reordering will require a reset of the pipe and maybe deletion of the downstream dataset.
For both merge source version <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code> any removal of datasets will require a reset of the pipe.</p>
</div>
</div>
</div>
<div class="section" id="union-datasets-source">
<span id="id23"></span><h3>Union datasets source<a class="headerlink" href="#union-datasets-source" title="Permalink to this headline">¶</a></h3>
<p>The union datasets source is similar to the <code class="docutils literal notranslate"><span class="pre">dataset</span> <span class="pre">source</span></code>, except
it can process several datasets at once and keep track of each one in
its <code class="docutils literal notranslate"><span class="pre">since</span></code> marker handler. The union datasets source reads its
datasets in order, exhausting each one before moving to the next.</p>
<p>The entity <code class="docutils literal notranslate"><span class="pre">_id</span></code> property in entities is prefixed by the dataset
id separated by the <code class="docutils literal notranslate"><span class="pre">:</span></code> character. This is done to prevent unwanted
identity collisions. The entity id <code class="docutils literal notranslate"><span class="pre">dave</span></code> from the <code class="docutils literal notranslate"><span class="pre">men</span></code> dataset
will end up with the id <code class="docutils literal notranslate"><span class="pre">men:dave</span></code>, and the entity id <code class="docutils literal notranslate"><span class="pre">claire</span></code>
from the <code class="docutils literal notranslate"><span class="pre">women</span></code> dataset will end up with the id <code class="docutils literal notranslate"><span class="pre">women:claire</span></code>.</p>
<div class="section" id="id24">
<h4>Prototype<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;union_datasets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;id-of-dataset1&quot;</span><span class="p">,</span> <span class="s2">&quot;id-of-dataset2&quot;</span><span class="p">],</span>
    <span class="s2">&quot;include_previous_versions&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;supports_signalling&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h4>Properties<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<p>The configuration of this source is identical to the <code class="docutils literal notranslate"><span class="pre">dataset</span></code>
source, except <code class="docutils literal notranslate"><span class="pre">datasets</span></code> can be a list of datasets ids.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">datasets</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>A list of datasets ids.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">initial_datasets</span></code></p></td>
<td><p>List&lt;String{&gt;=0}&gt;</p></td>
<td><p>By default the source will be considered populated if all the datasets in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code>  property have been populated. If some of these datasets will never be populated then this property can be used to list the datasets that must be populated before the source is considered populated. You should normally not have to use this property.</p>
<p>See also the <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> property <code class="docutils literal notranslate"><span class="pre">set_initial_offset</span></code>.</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">include_previous_versions</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the
data source will only return the latest version of any entity for
any unique <code class="docutils literal notranslate"><span class="pre">_id</span></code> value in the dataset. This is the default behaviour.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to enable or disable signalling support between internal pipes (dataset to dataset pipes). If enabled, a pipe
run is scheduled as soon as the input dataset(s) changes. It does not interrupt any already running pipes.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">global_defaults.use_signalling_internally</span></code> in the <a class="reference internal" href="#service-metadata-section"><span class="std std-ref">service metadata</span></a> section for more details.</p>
<p>If signalling is turned on globally, you will have to explicitly set <code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> to
disable it on individual pipes where you don’t want to automatically schedule runs on changes. Note that it is
automatically disabled (if not explicitly enabled on the source) if the schedule interval is less than 2 minutes or a cron
expression has been used.</p>
</td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prefix_ids</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, then the entity ids will not be prefixed with the dataset id.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id26">
<h4>Continuation support<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id27">
<h4>Example configuration<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a>
configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;union_datasets&quot;</span><span class="p">,</span>
        <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;northwind:customers&quot;</span><span class="p">,</span> <span class="s2">&quot;northwind:orders&quot;</span><span class="p">],</span>
        <span class="s2">&quot;include_previous_versions&quot;</span><span class="p">:</span> <span class="n">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="merge-datasets-source">
<span id="id28"></span><h3>Merge datasets source<a class="headerlink" href="#merge-datasets-source" title="Permalink to this headline">¶</a></h3>
<p>The merge datasets source is similar to the <code class="docutils literal notranslate"><span class="pre">dataset</span> <span class="pre">source</span></code>, except
it can process several datasets at once and keep track of each one in
its <code class="docutils literal notranslate"><span class="pre">since</span></code> marker handler.</p>
<p>The merge datasets source reads its all of its datasets and returns
entities ordered by their <code class="docutils literal notranslate"><span class="pre">_ts</span></code> field. It knows how to deal with
identities, so that only the <em>latest</em> version of entities are returned.</p>
<p>Entity ids are not modified in any way.</p>
<div class="section" id="id29">
<h4>Prototype<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;merge_datasets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;id-of-dataset1&quot;</span><span class="p">,</span> <span class="s2">&quot;id-of-dataset2&quot;</span><span class="p">],</span>
    <span class="s2">&quot;strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;supports_signalling&quot;</span><span class="p">:</span> <span class="n">false</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id30">
<h4>Properties<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<p>The configuration has two primary properties, <code class="docutils literal notranslate"><span class="pre">datasets</span></code> which must
be a list of datasets ids and <code class="docutils literal notranslate"><span class="pre">strategy</span></code> for choosing the merge
strategy.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">datasets</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>A list of datasets ids.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">initial_datasets</span></code></p></td>
<td><p>List&lt;String{&gt;=0}&gt;</p></td>
<td><p>By default the source will be considered populated if all the datasets in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code>  property have been populated. If some of these datasets will never be populated then this property can be used to list the datasets that must be populated before the source is considered populated. You should normally not have to use this property.</p>
<p>See also the <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> property <code class="docutils literal notranslate"><span class="pre">set_initial_offset</span></code>.</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">strategy</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the strategy to use to merge entities. Valid
options are “<code class="docutils literal notranslate"><span class="pre">latest</span></code>” (the default) and “<code class="docutils literal notranslate"><span class="pre">all</span></code>”.</p>
<p>The “<code class="docutils literal notranslate"><span class="pre">latest</span></code>” strategy returns the version of the entity with
the newest timestamp (as given in the <code class="docutils literal notranslate"><span class="pre">_ts</span></code> field). It will
return the entity from the dataset that contains the latest
version. This strategy is useful when only the latest version
of an entity among the given datasets are of interest.</p>
<p>The “<code class="docutils literal notranslate"><span class="pre">all</span></code>” strategy returns a merged version of the entity that
contains all latest versions from all datasets. The individual
dataset entities are keyed under the dataset id that they came
from. The entities are ordered by the timestamp of the latest
version of that entity. The returned entity contains all latest
versions from all datasets where is appears. This strategy is
useful when all datasets provide data for the resulting
entity. In a lot of cases one may want to use it with a
transform, so that only the entity can be shaped in a way that
is more useful downstream.</p>
</td>
<td><p>“latest”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to enable or disable signalling support between internal pipes (dataset to dataset pipes). If enabled, a pipe
run is scheduled as soon as the input dataset(s) changes. It does not interrupt any already running pipes.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">global_defaults.use_signalling_internally</span></code> in the <a class="reference internal" href="#service-metadata-section"><span class="std std-ref">service metadata</span></a> section for more details.</p>
<p>If signalling is turned on globally, you will have to explicitly set <code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> to
disable it on individual pipes where you don’t want to automatically schedule runs on changes. Note that it is
automatically disabled (if not explicitly enabled on the source) if the schedule interval is less than 2 minutes or a cron
expression has been used.</p>
</td>
<td><p>false</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id31">
<h4>Continuation support<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id32">
<h4>Example configuration<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a>
configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;merge_datasets&quot;</span><span class="p">,</span>
        <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;products&quot;</span><span class="p">,</span> <span class="s2">&quot;products-metadata&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="diff-datasets-source-experimental">
<span id="diff-datasets-source"></span><h3>Diff datasets source (Experimental)<a class="headerlink" href="#diff-datasets-source-experimental" title="Permalink to this headline">¶</a></h3>
<p>The diff datasets source is similar to the <code class="docutils literal notranslate"><span class="pre">merge</span> <span class="pre">dataset</span> <span class="pre">source</span></code>, except that
it also compares the entities from the datasets. The comparison produces a diff and filters out
entities that are equal.</p>
<p>For each merged entity (same as the <code class="docutils literal notranslate"><span class="pre">all</span></code> strategy in <code class="docutils literal notranslate"><span class="pre">merge</span> <span class="pre">dataset</span> <span class="pre">source</span></code>)
an additional <code class="docutils literal notranslate"><span class="pre">$diff</span></code> property is also generated. The diff contains the datasets and values for
the properties that are not equal across all the datasets.</p>
<p>Entity ids are not modified in any way.</p>
<div class="section" id="id33">
<h4>Prototype<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;diff_datasets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;id-of-dataset1&quot;</span><span class="p">,</span> <span class="s2">&quot;id-of-dataset2&quot;</span><span class="p">]</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id34">
<h4>Properties<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<p>The configuration only requires the property <code class="docutils literal notranslate"><span class="pre">datasets</span></code> which must
be a list of datasets ids.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">datasets</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>A list of datasets ids.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">initial_datasets</span></code></p></td>
<td><p>List&lt;String{&gt;=0}&gt;</p></td>
<td><p>By default the source will be considered populated if all the datasets in the <code class="docutils literal notranslate"><span class="pre">datasets</span></code>  property have been populated. If some of these datasets will never be populated then this property can be used to list the datasets that must be populated before the source is considered populated. You should normally not have to use this property.</p>
<p>See also the <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> property <code class="docutils literal notranslate"><span class="pre">set_initial_offset</span></code>.</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">whitelist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>The names of the properties to include in the comparison. If there is a
<code class="docutils literal notranslate"><span class="pre">blacklist</span></code> also specified, the whitelist will be filtered against the contents of the
blacklist.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">blacklist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>The names of the properties to exclude from the comparison. If there is a
<code class="docutils literal notranslate"><span class="pre">whitelist</span></code> also specified, the blacklist operates on the values of the whitelist (and not
the properties present in the entities).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">treat_lists_as_sets</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag to indicate if you want to ignore duplicates and ordering of lists in the entities
you are comparing. This option also affects lists nested deeper inside the entity.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ignore_deletes</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag to indicate if you want to ignore deleted entities during the comparison. By default
there will be produced a difference if one of the datasets contains a deleted entity while
the other datasets does not contain the deleted entity.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> the deleted entities are treated as if they don’t exist.</p>
</td>
<td><p>false</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id35">
<h4>Continuation support<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id36">
<h4>Example configuration<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a>
configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;diff_datasets&quot;</span><span class="p">,</span>
        <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;product&quot;</span><span class="p">,</span> <span class="s2">&quot;other-products&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-result">
<h4>Example result<a class="headerlink" href="#example-result" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;some-product&quot;</span><span class="p">,</span>
    <span class="s2">&quot;$diff&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;products&quot;</span><span class="p">:</span> <span class="s2">&quot;price-from-products&quot;</span><span class="p">,</span>
            <span class="s2">&quot;other-products&quot;</span><span class="p">:</span> <span class="s2">&quot;price-from-other-products&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="embedded-source">
<span id="id37"></span><h3>Embedded source<a class="headerlink" href="#embedded-source" title="Permalink to this headline">¶</a></h3>
<p>This is a data source that lets you embed the data inside the configuration of the source. This is convenient when you have a small and static dataset. Do not use this source to hold a large number of entities.</p>
<div class="section" id="id38">
<h4>Properties<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 48%" />
<col style="width: 16%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">entities</span></code></p></td>
<td><p>List&lt;Entity&gt;</p></td>
<td><p>Contains the list of entities is to be served by the source.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id39">
<h4>Continuation support<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Default)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id40">
<h4>Example configuration<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;embedded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sql-source">
<span id="id41"></span><h3>SQL source<a class="headerlink" href="#sql-source" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/SQL">SQL</a> database source is one of the most commonly used data sources.
In short, it presents <a class="reference external" href="https://en.wikipedia.org/wiki/Relation_(database)">database relations</a> (i.e. <code class="docutils literal notranslate"><span class="pre">tables</span></code>,
<code class="docutils literal notranslate"><span class="pre">views</span></code> or <code class="docutils literal notranslate"><span class="pre">queries</span></code>) as a entity stream to Sesam.</p>
<p>The SQL source has several options, all of which are presented below with their default values:</p>
<div class="section" id="id42">
<h4>Prototype<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;name-of-table&quot;</span><span class="p">,</span>
    <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="p">,</span><span class="s2">&quot;names&quot;</span><span class="p">],</span>
    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;SQL query string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated_query&quot;</span><span class="p">:</span> <span class="s2">&quot;SQL query string for &#39;since&#39; support in queries&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated_column&quot;</span><span class="p">:</span> <span class="s2">&quot;column-name-for-since-support-in-tables&quot;</span><span class="p">,</span>
    <span class="s2">&quot;whitelist&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="s2">&quot;include&quot;</span><span class="p">],</span>
    <span class="s2">&quot;blacklist&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="s2">&quot;exclude&quot;</span><span class="p">],</span>
    <span class="s2">&quot;fetch_size&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s2">&quot;preserve_null_values&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;default-schema-name-if-included&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="column-types">
<h4>Column types<a class="headerlink" href="#column-types" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="source-datatype-mapping.html#sql-types"><span class="std std-ref">supported column types</span></a> list for a overview of which RDBMS column types
are supported and how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>. Note that if your <code class="docutils literal notranslate"><span class="pre">table</span></code> or
<code class="docutils literal notranslate"><span class="pre">query</span></code> property refer to relations with unsupported column types, you will either have to use the <code class="docutils literal notranslate"><span class="pre">blacklist</span></code>
configuration property to ignore them, or write a custom <code class="docutils literal notranslate"><span class="pre">query</span></code> that coerces the non-supported column to a
supported type.</p>
</div>
<div class="section" id="id43">
<h4>Properties<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 48%" />
<col style="width: 16%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>Must refer to a <a class="reference internal" href="#sql-system"><span class="std std-ref">SQL system</span></a> component by <code class="docutils literal notranslate"><span class="pre">id</span></code>. The role of this component is provide
services like connection pooling and authentication for the data sources using it</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">table</span></code></p></td>
<td><p>String</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">table</span></code> is given, it must refer to a fully qualified table name in the database system,
not including schema, which if needed must be set separately. The <code class="docutils literal notranslate"><span class="pre">table</span></code> and <code class="docutils literal notranslate"><span class="pre">query</span></code>
properties are mutually exclusive with <code class="docutils literal notranslate"><span class="pre">table</span></code> used if both are present. TODO: are table names case sensitive?</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">primary_key</span></code></p></td>
<td><p>List&lt;String&gt; or String</p></td>
<td><p>The value of this property can be a single string with the name of the column
that contains the <code class="docutils literal notranslate"><span class="pre">primary</span> <span class="pre">key</span></code> (PK) of the table or query, or a list of strings
if it is a compound primary key. If the property is not set and the <code class="docutils literal notranslate"><span class="pre">table</span></code>
property is used, the data source component will attempt to use table metadata
to deduce the PK to use. In other words, you will have to set this property if
the <code class="docutils literal notranslate"><span class="pre">query</span></code> property us used. Note that this property might be case sensitive.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">query</span></code></p></td>
<td><p>List&lt;String&gt; or String</p></td>
<td><p>Must be a valid query in the dialect of the <code class="docutils literal notranslate"><span class="pre">RDBMS</span></code> represented by the
<code class="docutils literal notranslate"><span class="pre">system</span></code> property. You will also have to configure the primary key(s)
of the query in the <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> property. Note: mutually exclusive with the
<code class="docutils literal notranslate"><span class="pre">table</span></code> property with <code class="docutils literal notranslate"><span class="pre">table</span></code> taking precedence. If a list of strings is given, they will be
converted to a single string by concatenation with the newline character.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">updated_column</span></code></p></td>
<td><p>String</p></td>
<td><p>If the underlying relation contains information about updates, the data source is
able to support <code class="docutils literal notranslate"><span class="pre">since</span></code> markers. You can provide the name of the column to use
for such queries here. This must be a valid column name in the <code class="docutils literal notranslate"><span class="pre">table</span></code> or <code class="docutils literal notranslate"><span class="pre">query</span></code>
result sets and it must be of a data type that supports larger or equal (“&gt;=”) tests
for the <code class="docutils literal notranslate"><span class="pre">table</span></code> case. Note that this property might be case sensitive.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">updated_query</span></code></p></td>
<td><p>List&lt;String&gt; or String</p></td>
<td><p>If the <code class="docutils literal notranslate"><span class="pre">query</span></code> property is set, the <code class="docutils literal notranslate"><span class="pre">since</span></code> support must be expressed by a
full query including any test needed. A single variable binding
<code class="docutils literal notranslate"><span class="pre">:since</span></code> must be included somewhere in the query string - for example
“select * from view_name v where v.updates &gt;= :since”. If a list of strings is given, they will be
converted to a single string by concatenation with the newline character.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">updated_query</span></code> must cover the exact same ids as the
<code class="docutils literal notranslate"><span class="pre">update</span></code> query. If not you run the risk of a full sync
failing and then completing in incremental mode, which would
mean that the full sync is not covering all ids and thus end
up deleting ids not seen. Consider setting
<code class="docutils literal notranslate"><span class="pre">is_chronological_full</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> on pipes to prevent
the pipe offset from being set during a full sync.</p>
</div>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">schema</span></code></p></td>
<td><p>String</p></td>
<td><p>If a specific schema within a database is needed, you must provide its name in this property.
Do <em>not</em> use schema names in the <code class="docutils literal notranslate"><span class="pre">table</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">whitelist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>The names of the columns to include in the generated entities. If there is a <code class="docutils literal notranslate"><span class="pre">blacklist</span></code> also specified, the
whitelist will be filtered against the contents of the blacklist.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">blacklist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>The names of the columns to exclude from the generated entities. If there is a <code class="docutils literal notranslate"><span class="pre">whitelist</span></code> also specified, the
blacklist operates on the values of the whitelist (and not the whole columnset).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">preserve_null_values</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code> will include null values in the entities produces by this source. By default they are omitted.</p></td>
<td><p>False</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fetch_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The fetch size of the result sets (number of rows in a cursor fetch) to get from the database</p></td>
<td><p>1000</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id44">
<h4>Continuation support<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Dynamic: <code class="docutils literal notranslate"><span class="pre">true</span></code> if <code class="docutils literal notranslate"><span class="pre">updated_column</span></code> set)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Default)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Dynamic: if <code class="docutils literal notranslate"><span class="pre">table</span></code> and <code class="docutils literal notranslate"><span class="pre">updated_column</span></code> set then defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>, if <code class="docutils literal notranslate"><span class="pre">query</span></code> then it can be set explicitly)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological_full</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Dynamic: <code class="docutils literal notranslate"><span class="pre">true</span></code> if <code class="docutils literal notranslate"><span class="pre">is_chronological</span></code> is effectively <code class="docutils literal notranslate"><span class="pre">true</span></code> and this property is not explicity set to <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p>
<p>If this property is set to <code class="docutils literal notranslate"><span class="pre">false</span></code> then a full run will not
consider the source to be chronological even though it is
chronological in incremental runs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In practice this avoids doing an order by when doing full runs,
but at the cost of not saving pipe offsets and supporting
incremental deletion tracking if it fails to complete.</p>
<p>We have seen SQL tables where only the latest rows have
an value in the updated column. In that case it is not that
useful to use order by and to save pipe offsets
incrementally.</p>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id45">
<h4>Example configuration<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<p>Example with a single table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwind&quot;</span><span class="p">,</span>
        <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;Customers&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example with a single table, where the primary key is in a column named <code class="docutils literal notranslate"><span class="pre">table_id</span></code> and the updated datestamp is
in a column called <code class="docutils literal notranslate"><span class="pre">updated</span></code>. This enables us to switch on <code class="docutils literal notranslate"><span class="pre">since</span></code> support:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;my_system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;my_table&quot;</span><span class="p">,</span>
        <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="s2">&quot;table_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;updated_column&quot;</span><span class="p">:</span> <span class="s2">&quot;updated&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example with custom query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwind&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;select * from Customers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="s2">&quot;CustomerID&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example with a custom query from a table called <code class="docutils literal notranslate"><span class="pre">my_table</span></code> where the primary key is in a column named <code class="docutils literal notranslate"><span class="pre">table_id</span></code>
and the updated datestamp is in a column called <code class="docutils literal notranslate"><span class="pre">updated</span></code>. This enables us to switch on <code class="docutils literal notranslate"><span class="pre">since</span></code> support:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;my_system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;select * from my_table&quot;</span><span class="p">,</span>
        <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="s2">&quot;table_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;updated_column&quot;</span><span class="p">:</span> <span class="s2">&quot;updated&quot;</span><span class="p">,</span>
        <span class="s2">&quot;updated_query&quot;</span><span class="p">:</span> <span class="s2">&quot;select * from my_table where updated &gt;= :since&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conditional-source">
<span id="id46"></span><h3>Conditional source<a class="headerlink" href="#conditional-source" title="Permalink to this headline">¶</a></h3>
<p>The conditional source selects an active source based on a key typically controlled by an environment variable.
It is typically used in devops to be able to use the same configuration in different type of environments (i.e. development,
staging, production). The actual source to use is resolved at runtime when the parent pipe is created.</p>
<p>The configuration options are:</p>
<div class="section" id="id47">
<h4>Prototype<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;conditional&quot;</span><span class="p">,</span>
   <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(current-environment)&quot;</span><span class="p">,</span>
   <span class="s2">&quot;alternatives&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;dev&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;embedded&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">},</span>
       <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">},</span>
       <span class="s2">&quot;prod&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id48">
<h4>Properties<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">condition</span></code></p></td>
<td><p>String</p></td>
<td><p>The key to look up in <code class="docutils literal notranslate"><span class="pre">alternatives</span></code> for the actual source to use at runtime. Typically an environment variable.
Note that all possible enumerations of this value need to exist in <code class="docutils literal notranslate"><span class="pre">alternatives</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alternatives</span></code></p></td>
<td><p>Object</p></td>
<td><p>A dictionary of actual source configurations keyed by the enumerated value of <code class="docutils literal notranslate"><span class="pre">condition</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="csv-source">
<span id="id49"></span><h3>CSV source<a class="headerlink" href="#csv-source" title="Permalink to this headline">¶</a></h3>
<p>The CSV data source translates the rows of files in <a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV format</a>
to entities.</p>
<p>The configuration options are:</p>
<div class="section" id="id50">
<h4>Prototype<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span>
   <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;a-valid-url-or-microservice-system-id&quot;</span><span class="p">,</span>
   <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;url-to-csv-file&quot;</span><span class="p">,</span>
   <span class="s2">&quot;has_header&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;field_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mappings&quot;</span><span class="p">,</span><span class="s2">&quot;from&quot;</span><span class="p">,</span><span class="s2">&quot;columns&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="s2">&quot;properties&quot;</span><span class="p">],</span>
   <span class="s2">&quot;auto_dialect&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;dialect&quot;</span><span class="p">:</span> <span class="s2">&quot;excel&quot;</span><span class="p">,</span>
   <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
   <span class="s2">&quot;decode_error_strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;strict-or-replace&quot;</span><span class="p">,</span>
   <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="s2">&quot;column&quot;</span><span class="p">,</span><span class="s2">&quot;names&quot;</span><span class="p">],</span>
   <span class="s2">&quot;whitelist&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="s2">&quot;column&quot;</span><span class="p">,</span><span class="s2">&quot;names&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="s2">&quot;include&quot;</span><span class="p">],</span>
   <span class="s2">&quot;blacklist&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="s2">&quot;column&quot;</span><span class="p">,</span><span class="s2">&quot;names&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="s2">&quot;exclude&quot;</span><span class="p">],</span>
   <span class="s2">&quot;preserve_empty_strings&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
   <span class="s2">&quot;delimiter&quot;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id51">
<h4>Properties<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>The URL of the <code class="docutils literal notranslate"><span class="pre">CVS</span></code> file to load.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The ID of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> or <a class="reference internal" href="#microservice-system"><span class="std std-ref">microservice system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">has_header</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag that indicates to the source that the first row in the <code class="docutils literal notranslate"><span class="pre">CSV</span></code> file contains the names of the columns.
If this property is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, you will have to provide a list of column names in the <code class="docutils literal notranslate"><span class="pre">field_names</span></code>
property.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">field_names</span></code></p></td>
<td><p>List</p></td>
<td><p>If set, specifies the names of the columns. It takes precedence over the header in the CSV file if present.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auto_dialect</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag that hints to the source that it should try to guess the dialect of the <code class="docutils literal notranslate"><span class="pre">CSV</span></code> file on its own. Note
that if <code class="docutils literal notranslate"><span class="pre">dialect</span></code> is explicitly set, <code class="docutils literal notranslate"><span class="pre">auto_dialect</span></code> is ignored.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dialect</span></code></p></td>
<td><p>String</p></td>
<td><p>Encodes what type of CSV file the file is. This is basically presets of the other properties.
The recognised values are <code class="docutils literal notranslate"><span class="pre">&quot;excel&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;excel_tab&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;unix_dialect&quot;</span></code>.
Note that if <code class="docutils literal notranslate"><span class="pre">dialect</span></code> is explicitly set, <code class="docutils literal notranslate"><span class="pre">auto_dialect</span></code> is ignored. If both <code class="docutils literal notranslate"><span class="pre">auto_dialect</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code> and
no <code class="docutils literal notranslate"><span class="pre">dialect</span></code> has been explicitly set, the dialect chosen will be <code class="docutils literal notranslate"><span class="pre">excel</span></code>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">encoding</span></code></p></td>
<td><p>String</p></td>
<td><p>The character set to used to encode the text in the CSV file</p></td>
<td><p>“UTF-8”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">decode_error_strategy</span></code></p></td>
<td><p>String</p></td>
<td><p>A enumeration of “strict” and “replace” that tells the character decoder how to deal with illegal characters
in the input data. The default is “strict” which raises an error and stops processing. The “replace” option
will log a warning and attempt to replace the offending character(s) with the unicode special character for
“replacement character”, see <a class="reference external" href="https://en.wikipedia.org/wiki/Specials_%28Unicode_block%29">https://en.wikipedia.org/wiki/Specials_%28Unicode_block%29</a> for more details.
Use the “replace” option with extreme care as it can lead to data loss if you’re not absolutely sure of what
you are doing. The preferred option should always be to try the fix the data at the source.</p></td>
<td><p>“strict”</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">primary_key</span></code></p></td>
<td><p>List&lt;String&gt; or String</p></td>
<td><p>The name of the column(s) to use as <code class="docutils literal notranslate"><span class="pre">_id</span></code> in the generated entities. It can be either a list of strings
(if the identity is a compound value) or a single column name (i.e. a string). The column name(s) are case
sensitive and must match the contents of either <code class="docutils literal notranslate"><span class="pre">field_names</span></code> or the header of the CSV file.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">whitelist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>The names of the columns to include in the generated entities. If there is a <code class="docutils literal notranslate"><span class="pre">blacklist</span></code> also specified, the
whitelist will be filtered against the contents of the blacklist.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">blacklist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>The names of the columns to exclude from the generated entities. If there is a <code class="docutils literal notranslate"><span class="pre">whitelist</span></code> also specified, the
blacklist operates on the values of the whitelist (and not the whole columnset).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">preserve_empty_strings</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code> will include column values that are empty strings. By default these are omitted.</p></td>
<td><p>False</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delimiter</span></code></p></td>
<td><p>String</p></td>
<td><p>The character or string to use as the <code class="docutils literal notranslate"><span class="pre">CSV</span></code> field separator (delimiter)</p></td>
<td><p>“,”</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id52">
<h4>Continuation support<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Default)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id53">
<h4>Example configuration<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://blog.plsoucy.com/wp-content/uploads/2012/04/countries-20140629.csv&quot;</span><span class="p">,</span>
        <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Code&quot;</span><span class="p">,</span>
        <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;iso-8859-1&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rdf-source">
<span id="id54"></span><h3>RDF source<a class="headerlink" href="#rdf-source" title="Permalink to this headline">¶</a></h3>
<p>The RDF data source is able to read <a class="reference external" href="https://www.w3.org/TR/2004/REC-rdf-primer-20040210/">RDF</a> data
in <a class="reference external" href="https://www.w3.org/TR/2014/REC-n-triples-20140225/">N-Triples</a>, <a class="reference external" href="https://www.w3.org/TR/turtle/">Turtle</a>, <a class="reference external" href="https://www.w3.org/TeamSubmission/n3/">N3</a> or <a class="reference external" href="https://www.w3.org/TR/rdf-syntax-grammar/">RDF/XML</a> format and turn this into entities.</p>
<p>See the <a class="reference internal" href="rdf-support.html"><span class="doc">Working with RDF</span></a> document for more detail on working with RDF in Sesam.</p>
<p>It will transform triples on the form <code class="docutils literal notranslate"><span class="pre">&lt;subject-uri&gt;</span> <span class="pre">&lt;predicate-uri&gt;</span> <span class="pre">&quot;value&quot;</span> <span class="pre">OR</span> <span class="pre">&lt;object-uri&gt;</span></code> into
entities on the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;subject-uri&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;&lt;predicate-uri&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span> <span class="n">OR</span> <span class="s2">&quot;~robject-uri&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Blank_node">RDF Blank Nodes</a> (aka BNodes) will be turned into child entities.</p>
<div class="section" id="id55">
<h4>Prototype<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rdf&quot;</span><span class="p">,</span>
   <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;url--or-microservice-system-id&quot;</span><span class="p">,</span>
   <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;url-to-rdf-file&quot;</span><span class="p">,</span>
   <span class="s2">&quot;sort_lists&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;nt-ttl-or-xml&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id56">
<h4>Properties<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The ID of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> or <a class="reference internal" href="#microservice-system"><span class="std std-ref">microservice system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>The URL of the <code class="docutils literal notranslate"><span class="pre">RDF</span></code> file to load - it can contain multiple subjects
(with <code class="docutils literal notranslate"><span class="pre">blank</span> <span class="pre">node</span></code> hierarchies) and each unique non-blank subject will
result in a single root entity.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>String</p></td>
<td><p>The type of <code class="docutils literal notranslate"><span class="pre">RDF</span></code> file referenced by the <code class="docutils literal notranslate"><span class="pre">url</span></code> property. It is
an enumeration that can take following recognized values: <code class="docutils literal notranslate"><span class="pre">&quot;nt&quot;</span></code> for
N-Triples, <code class="docutils literal notranslate"><span class="pre">&quot;ttl&quot;</span></code> for Turtle, <code class="docutils literal notranslate"><span class="pre">&quot;n3&quot;</span></code> for N3 or <code class="docutils literal notranslate"><span class="pre">&quot;xml&quot;</span></code> for <code class="docutils literal notranslate"><span class="pre">RDF/XML</span></code> files.</p></td>
<td><p>“nt”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sort_lists</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If the <code class="docutils literal notranslate"><span class="pre">sort_lists</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> any resulting entity properties containing lists of values (due to
them having the same RDF predicate) will be sorted, making the output predictable. This applies in a recursive
fashion.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_sorted</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Indicates that the input data is sorted on RDF subject. If the <code class="docutils literal notranslate"><span class="pre">is_sorted</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> and the
<code class="docutils literal notranslate"><span class="pre">format</span></code> property is <code class="docutils literal notranslate"><span class="pre">nt</span></code> (N-Triples), the RDF source will attempt to parse the input data sequentially and
emit a new entity when the RDF subject changes, without loading the entire RDF file into memory first.
Note that the input data cannot contain <a class="reference external" href="https://en.wikipedia.org/wiki/Blank_node">RDF Blank Nodes</a> (aka
BNodes) in this case. The property has no effect on formats other than <code class="docutils literal notranslate"><span class="pre">nt</span></code>.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id58">
<h4>Continuation support<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Default)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id59">
<h4>Example configuration<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rdf&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.snee.com/rdf/elvisimp.rdf&quot;</span><span class="p">,</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;xml&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sdshare-source">
<span id="id60"></span><h3>SDShare source<a class="headerlink" href="#sdshare-source" title="Permalink to this headline">¶</a></h3>
<p>The SDShare data source can read <a class="reference external" href="https://www.w3.org/TR/2004/REC-rdf-primer-20040210/">RDF</a> from <a class="reference external" href="https://tools.ietf.org/html/rfc4287">ATOM feeds</a> after the
<a class="reference external" href="http://www.sdshare.org">SDShare specification</a>. See the <a class="reference internal" href="rdf-support.html"><span class="doc">Working with RDF</span></a> document for more information about working with RDF data
in Sesam.</p>
<p>It has the following properties:</p>
<div class="section" id="id62">
<h4>Prototype<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sdshare&quot;</span><span class="p">,</span>
   <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;url-or-microservice-system-id&quot;</span><span class="p">,</span>
   <span class="s2">&quot;sort_lists&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;url-to-sdshare-fragments-feed&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id63">
<h4>Properties<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The ID of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> or <a class="reference internal" href="#microservice-system"><span class="std std-ref">microservice system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>The URL of the SDShare fragments feed to consume.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sort_lists</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If the <code class="docutils literal notranslate"><span class="pre">sort_lists</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> any resulting entity properties containing lists of values (due to
them having the same RDF predicate) will be sorted, making the output predictable. This applies in a recursive
fashion.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id64">
<h4>Continuation support<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id65">
<h4>Example configuration<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sdshare&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://open.sesam.io/sdshare/server/1/fragments/enhetsregisteret&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ldap-source">
<span id="id66"></span><h3>LDAP source<a class="headerlink" href="#ldap-source" title="Permalink to this headline">¶</a></h3>
<p>The LDAP source provides entities from a <a class="reference external" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">LDAP catalog</a>
configured by a <a class="reference internal" href="#ldap-system"><span class="std std-ref">LDAP system</span></a>.</p>
<p>It supports the following properties:</p>
<div class="section" id="id67">
<h4>Prototype<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ldap&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;ldap-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;search_base&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="s2">&quot;search_filter&quot;</span><span class="p">:</span> <span class="s2">&quot;(objectClass=organizationalPerson)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="s2">&quot;id_attribute&quot;</span><span class="p">:</span> <span class="s2">&quot;cn&quot;</span><span class="p">,</span>
    <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
    <span class="s2">&quot;attribute_blacklist&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;list&quot;</span><span class="p">,</span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="s2">&quot;attributes&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="s2">&quot;exclude&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id68">
<h4>Properties<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>ID of the LDAP system component to use</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">search_base</span></code></p></td>
<td><p>String</p></td>
<td><p>The base LDAP search expression to use when looking for records</p></td>
<td><p>“*”</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">search_filter</span></code></p></td>
<td><p>String</p></td>
<td><p>LDAP filter expression to apply to all records found by the <code class="docutils literal notranslate"><span class="pre">search_base</span></code> expression</p></td>
<td><p>“(objectClass=organizationalPerson)”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attributes</span></code></p></td>
<td><p>String</p></td>
<td><p>A wildcard expression specifying which attributes to include in the entity.</p></td>
<td><p>“*”</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id_attribute</span></code></p></td>
<td><p>String</p></td>
<td><p>Sets which of the LDAP attributes to use for the <code class="docutils literal notranslate"><span class="pre">_id</span></code> property of a entity.</p></td>
<td><p>“cn”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">page_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The default number of records to read at a time from the LDAP service.</p></td>
<td><p>500</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute_blacklist</span></code></p></td>
<td><p>List</p></td>
<td><p>A list of attribute names (as strings) to exclude from the record when constructing entities.</p></td>
<td><p>[]</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id69">
<h4>Continuation support<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id70">
<h4>Example configuration<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ldap&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;example_ldap&quot;</span><span class="p">,</span>
        <span class="s2">&quot;search_base&quot;</span><span class="p">:</span> <span class="s2">&quot;ou=Example,dc=example,dc=org&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json-source">
<span id="id71"></span><h3>JSON source<a class="headerlink" href="#json-source" title="Permalink to this headline">¶</a></h3>
<p>The JSON source can read entities from a <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> resource available over
<a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> (i.e. served by a web server).
The service must conform to the <a class="reference internal" href="json-pull.html"><span class="doc">JSON Pull Protocol</span></a>.</p>
<p>Consider using the more general <a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a> if you’re interacting with a non-Sesam JSON capable
REST api.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> property is set to <em>true</em>, then the <code class="docutils literal notranslate"><span class="pre">since</span></code> request parameter is added to the URL to
signal that we want only changes that happened after the since marker.</p>
<div class="section" id="id73">
<h4>Prototype<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;system-id&quot;</span><span class="p">,</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
   <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;url-to-json-data&quot;</span><span class="p">,</span>
   <span class="s2">&quot;supports_signalling&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
   <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;some-header&quot;</span><span class="p">:</span> <span class="s2">&quot;some-value&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id74">
<h4>Properties<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> or <a class="reference internal" href="#microservice-system"><span class="std std-ref">microservice system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>The URL of the <code class="docutils literal notranslate"><span class="pre">JSON</span></code> data to load. Note that the data must conform to the <a class="reference internal" href="json-pull.html"><span class="doc">JSON Pull Protocol</span></a>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_signalling</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Flag used to enable or disable signalling support between internal pipes (dataset to dataset pipes). If enabled, a pipe
run is scheduled as soon as the input dataset(s) changes. It does not interrupt any already running pipes.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">page_size</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>If the page size is specified then the source will download the data across multiple requests until there is no more data left to download. The <code class="docutils literal notranslate"><span class="pre">limit</span></code> request parameter is passed to the endpoint to cap the number of entities in each response.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Paging is only available if the source has <code class="docutils literal notranslate"><span class="pre">supports_since</span></code>, <code class="docutils literal notranslate"><span class="pre">is_chronological</span></code> and <code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code> all set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
</td>
<td><p>No paging</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">subset</span></code></p></td>
<td><p>Array</p></td>
<td><div class="line-block">
<div class="line">An <code class="docutils literal notranslate"><span class="pre">eq</span></code> DTL expression where the left hand side is the index expression and the right hand side is the value that represents the subset. If the subset is specified then only entities that are in that subset will be read from the source.</div>
<div class="line"><br /></div>
<div class="line">Example: <code class="docutils literal notranslate"><span class="pre">[&quot;eq&quot;,</span> <span class="pre">&quot;_S.category&quot;,</span> <span class="pre">&quot;tank&quot;]</span></code></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this to work the source must support subsets.</p>
</div>
</td>
<td></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">headers</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>A optional set of header values to set in HTTP request made using this source. Both keys and values must
evaluate to strings.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id75">
<h4>Continuation support<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Default)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id76">
<h4>Example configuration<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;some-url-or-microservice-system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;test.json&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="empty-source">
<span id="id77"></span><h3>Empty source<a class="headerlink" href="#empty-source" title="Permalink to this headline">¶</a></h3>
<p>Sometimes it is useful for debugging or development purposes to have a data source that doesn’t produce any entities:</p>
<div class="section" id="id78">
<h4>Prototype<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;empty&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id79">
<h4>Continuation support<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id80">
<h4>Example configuration<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;empty&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="http-endpoint-source">
<span id="id81"></span><h3>HTTP endpoint source<a class="headerlink" href="#http-endpoint-source" title="Permalink to this headline">¶</a></h3>
<p>This is a special data source that registers an <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>
receiver endpoint that one can post entities to. Entities posted here will be written to the pipe’s sink.</p>
<p>A pipe that references the <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">endpoint</span></code> source will not pump any
entities, in practice this means that a pump is not configured for the
pipe; the only way for entities to flow through the pipe is by posting
them to the HTTP endpoint.</p>
<p>It exposes two URLs:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>URL</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/receivers/mypipe/entities</span></code></p></td>
<td><p>JSON Push endpoint</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/receivers/mypipe/sdshare-push-receiver</span></code></p></td>
<td><p>SDShare Push receiver endpoint</p></td>
</tr>
</tbody>
</table>
<div class="section" id="json-push-protocol">
<h4>JSON Push protocol<a class="headerlink" href="#json-push-protocol" title="Permalink to this headline">¶</a></h4>
<p>The JSON Push protocol is described in additional detail in the
<a class="reference internal" href="json-push.html"><span class="doc">JSON Push Protocol</span></a> document. The serialisation of
entities as <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> is described in more detail <a class="reference internal" href="entitymodel.html"><span class="doc">here</span></a>. Both individual entities and lists of entities can be
posted. This endpoint is compatible with <a class="reference internal" href="#json-sink"><span class="std std-ref">The JSON push sink</span></a>.</p>
<p>The JSON Push endpoint supports <a class="reference external" href="https://en.wikipedia.org/wiki/POST_(HTTP)">HTTP POST</a> of
both a single JSON object and a list of JSON objects. The HTTP request’s <code class="docutils literal notranslate"><span class="pre">content-type</span></code>
<a class="reference external" href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields">header</a> element must be set to <code class="docutils literal notranslate"><span class="pre">application/json</span></code> in this case.</p>
</div>
<div class="section" id="sdshare-push-protocol">
<h4>SDShare Push protocol<a class="headerlink" href="#sdshare-push-protocol" title="Permalink to this headline">¶</a></h4>
<p>The SDShare Push protocol is described <a class="reference external" href="https://github.com/SesamResearch/sdshare-push/blob/master/spec.md">here</a>.</p>
<p>The SDShare Push endpoint supports receiving <a class="reference external" href="https://www.w3.org/TR/2004/REC-rdf-primer-20040210/">RDF</a>
in <a class="reference external" href="https://www.w3.org/TR/2014/REC-n-triples-20140225/">N-Triples</a> form. In this case the URL
parameters have to include at least one <code class="docutils literal notranslate"><span class="pre">resource</span></code> parameter describing which resources the
N-Triples payload contains statements about. If you include a <code class="docutils literal notranslate"><span class="pre">resource</span></code> parameter that there
are no statements about in the N-Triples body, an empty entity is generated with its <code class="docutils literal notranslate"><span class="pre">_deleted</span></code>
flag set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Note that the <code class="docutils literal notranslate"><span class="pre">graph</span></code> parameter of the protocol is ignored - the destination
of the entities generated from the N-Triples payload must be configured in the pipe’s <code class="docutils literal notranslate"><span class="pre">sink</span></code>
section. This type of HTTP request expects the <code class="docutils literal notranslate"><span class="pre">content-type</span></code> to be <code class="docutils literal notranslate"><span class="pre">application/n-triples</span></code> or
<code class="docutils literal notranslate"><span class="pre">text/plain</span></code>. See the <a class="reference internal" href="rdf-support.html"><span class="doc">Working with RDF</span></a> document for more detail on working with RDF in Sesam.</p>
</div>
<div class="section" id="id86">
<h4>Prototype<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http_endpoint&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id87">
<h4>Properties<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auto_populate_dataset</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If true (the default) the sink dataset will be marked as populated initially. This property can only be
specified if the sink is of type <code class="docutils literal notranslate"><span class="pre">dataset</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id88">
<h4>Completeness<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h4>
<p>When entities are posted to the HTTP endpoint source, the <a class="reference internal" href="#completeness"><span class="std std-ref">completeness</span></a> value of the sink dataset will by default be set to the current time. But it is also possible to explicitly specify the completeness value by adding a ‘X-Dataset-Completeness’ header in the POST-request. This value must be a positive integer. It is recommended to use microseconds since the epoch, since this is what Sesam does by default.  Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;X-Dataset-Completeness: 1633934725921188&quot;</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="id89">
<h4>Continuation support<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Fixed)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Fixed)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Fixed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id90">
<h4>Example configuration<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h4>
<p>The pipe configuration given below will expose the
<code class="docutils literal notranslate"><span class="pre">my-entities</span></code> receiver endpoint and write any data it receives
into the <code class="docutils literal notranslate"><span class="pre">my-entities</span></code> dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-entities&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http_endpoint&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sparql-source">
<span id="id91"></span><h3>SPARQL source<a class="headerlink" href="#sparql-source" title="Permalink to this headline">¶</a></h3>
<p>The SPARQL source fetches <a class="reference external" href="https://www.w3.org/TR/2004/REC-rdf-primer-20040210/">RDF</a> data about subjects from a
<a class="reference external" href="https://en.wikipedia.org/wiki/Triplestore">triplestore</a> exposing a <a class="reference external" href="https://www.w3.org/TR/rdf-sparql-query/">SPARQL compliant</a> endpoint.
The endpoint of the source is configured either directly or implicitly by a <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a>. The source uses
two SPARQL queries to construct entities; the fragment query is a SPARQL <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> query that gets a list of subjects
to get data for and their modification times and a fragment query, which is a SPARQL <code class="docutils literal notranslate"><span class="pre">CONSTRUCT</span></code> query that
gathers all relevant statements about a particular subject. The latter is then used to generate the stream of entities.</p>
<p>See the <a class="reference internal" href="rdf-support.html"><span class="doc">Working with RDF</span></a> document for more detail on working with RDF in Sesam.</p>
<div class="section" id="id93">
<h4>Prototype<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;url-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql-endpoint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fragments_query&quot;</span><span class="p">:</span> <span class="s2">&quot;SPARQL select query&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fragment_query&quot;</span><span class="p">:</span> <span class="s2">&quot;SPARQL construct query&quot;</span>
    <span class="s2">&quot;initial_since_value&quot;</span><span class="p">:</span> <span class="s2">&quot;0001-01-01T00:00:00Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id94">
<h4>Properties<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL System</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fragments_query</span></code></p></td>
<td><p>List&lt;String&gt; or String</p></td>
<td><p>A SPARQL <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> query that should return exactly two bound variables: <code class="docutils literal notranslate"><span class="pre">id</span></code> which should contain a unique subject
and <code class="docutils literal notranslate"><span class="pre">updated</span></code> which should contain its modification time in ISO UTC format (or “0001-01-01T00:00:00Z” if not
available in the data). If you would like the source to have continuation support, then you must include a filter based on the
<code class="docutils literal notranslate"><span class="pre">updated</span></code> content compared to the current since moniker. You must use a variable expansion <code class="docutils literal notranslate"><span class="pre">${since}</span></code> for this
purpose. The query result set should always be ordered by the “?updated” variable. If a list of strings is given,
they will be converted to a single string by concatenation with the newline character.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fragment_query</span></code></p></td>
<td><p>List&lt;String&gt; or String</p></td>
<td><p>A SPARQL <code class="docutils literal notranslate"><span class="pre">CONSTRUCT</span></code> query that should return all the relevant statements for a particular subject selected
by the <code class="docutils literal notranslate"><span class="pre">fragments_query</span></code> query. The query should use the expansion variable “${uri}” to filter or select
the correct subject to construct the statements to return.  If a list of strings is given, they will be
converted to a single string by concatenation with the newline character.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">initial_since_value</span></code></p></td>
<td><p>String</p></td>
<td><p>A string literal to use when querying the triplestore the first time.</p></td>
<td><p>“0001-01-01T00:00:00Z”</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id95">
<h4>Continuation support<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Dynamic: <code class="docutils literal notranslate"><span class="pre">true</span></code> if <code class="docutils literal notranslate"><span class="pre">${since}</span></code> in <code class="docutils literal notranslate"><span class="pre">fragments_query</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> (Default)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> (Default)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id96">
<h4>Example configuration<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a>
configuration, which is omitted here for brevity.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8890/sparql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fragments_query&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;PREFIX sdshare: &lt;http://www.sdshare.org/2012/extension/&gt;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SELECT DISTINCT ?id ?updated WHERE {&quot;</span><span class="p">,</span>
             <span class="s2">&quot;    ?id sdshare:lastmodified ?updated&quot;</span><span class="p">,</span>
             <span class="s2">&quot;} FILTER (?updated &gt;= </span><span class="se">\&quot;</span><span class="s2">$</span><span class="si">{since}</span><span class="se">\&quot;</span><span class="s2">^^xsd:dateTime) ORDER BY ?updated&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;fragment_query&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;CONSTRUCT { ?subject ?property ?value } WHERE {&quot;</span><span class="p">,</span>
            <span class="s2">&quot;  ?subject ?property ?value .&quot;</span><span class="p">,</span>
            <span class="s2">&quot;} FILTER (?subject = &lt;$</span><span class="si">{uri}</span><span class="s2">&gt;)&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rest-source-experimental">
<span id="rest-source"></span><h3>REST source (experimental)<a class="headerlink" href="#rest-source-experimental" title="Permalink to this headline">¶</a></h3>
<p>This is a data source that can communicate with a REST service that produce JSON output using HTTP requests.
The REST source supports both pagination as part of the response body or pagination in the form of header properties
after the <a class="reference external" href="https://tools.ietf.org/html/rfc5988">RFC 5988 specifcation</a> . It optionally supports continuation both as
a query parameter or as header property.</p>
<p>Note that by default the REST source will only attempt to parse responses with content-type “application/json”, if
the REST API provides other types of valid JSON, you can specify which in the <code class="docutils literal notranslate"><span class="pre">json_content_types</span></code> property of
the associated <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>.</p>
<p>Responses which aren’t recognised as JSON will make the REST source emit “empty” entities with a property containing
the raw response body and - optionally - the content-type of the response for further processing with DTL and/or
HTTP or REST transform(s).</p>
<p>Note that the REST source is still under development and might change configuration format while it’s marked
as “experimental”.</p>
<div class="section" id="id97">
<h4>Prototype<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;the-default-operation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;the-default&quot;</span><span class="p">:</span> <span class="s2">&quot;properties&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;the-default&quot;</span><span class="p">:</span> <span class="s2">&quot;payload&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;rate_limiting_retries&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;rate_limiting_delay&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;response_property&quot;</span><span class="p">:</span> <span class="s2">&quot;the-property-name-to-put-the-response-in&quot;</span><span class="p">,</span>
    <span class="s2">&quot;response_include_content_type&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;payload_property&quot;</span><span class="p">:</span> <span class="s2">&quot;the-property-the-response-resides-in&quot;</span><span class="p">,</span>
    <span class="s2">&quot;id_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ jinja_expression_for_the_id.property }}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ jinja_expression_for_the_updated_property }}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;since_property_name&quot;</span><span class="p">:</span> <span class="s2">&quot;name-of-since-property&quot;</span><span class="p">,</span>
    <span class="s2">&quot;since_property_location&quot;</span><span class="p">:</span> <span class="s2">&quot;where-to-put-since-param&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id98">
<h4>Properties<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">operation</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the operation to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">properties</span></code></p></td>
<td><p>Object</p></td>
<td><p>The properties mapping used as default values for the emitted entitites. Note that if both are present the
properties in the emitted entity takes precendence. Also note that this property can be defined in the specified
<code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The source configuration will take
precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">payload</span></code></p></td>
<td><p>Object, string or array</p></td>
<td><p>The value to use as payload for the operation. Note that this property can be defined in the specified
<code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The source configuration will take
precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">response_property</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the property to put the response in when emitting entities. Note that this property can be defined
in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The source configuration
will take precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">response_include_content_type</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This property controls if the output entity should include the Content-Type of the response in a
<code class="docutils literal notranslate"><span class="pre">content-type</span></code> property.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload_property</span></code></p></td>
<td><p>String</p></td>
<td><p>The JSON response sub-property to use as the source of the emitted entities. Note that this property can be
defined in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The source
configuration will take precendence if defined. This property can express a “path” into the response using a dot
as path separator, i.e. <code class="docutils literal notranslate"><span class="pre">foo.bar</span></code>. Note that a if a “non-path” version of the property can be found in the
response body it will take precedence over any property found by traversing the path using the dot notation.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">id_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the entities
properties available to the templating context. It can be used to add <code class="docutils literal notranslate"><span class="pre">_id</span></code> properties to the emitted entities
if missing from the source system. Note that this property can be defined
in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The source configuration
will take precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If set and the REST service returns a HTTP 429 error code, the request will be retried the number of times
indicated. The time between retries can be adjusted by setting <code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code> is set on either the source or on the REST system, and a retry is triggered
the time to wait before retrying can be set by this value. If specified on both the system and source,
the source value takes precedence.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id99">
<h4>Continuation support<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h4>
<p>See the section on <a class="reference internal" href="#continuation-support"><span class="std std-ref">continuation support</span></a> for more information.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">supports_since</span></code></p></td>
<td><p>Boolean</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is_since_comparable</span></code></p></td>
<td><p>Boolean</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">is_chronological</span></code></p></td>
<td><p>Boolean</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">updated_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the entities
properties available to the templating context. It can be used to add <code class="docutils literal notranslate"><span class="pre">_updated</span></code> properties to the emitted
entities if missing from the source system (for continuation support). This is only relevant if
<code class="docutils literal notranslate"><span class="pre">supports_since</span></code> as been set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. See the <code class="docutils literal notranslate"><span class="pre">since_property_name</span></code> and <code class="docutils literal notranslate"><span class="pre">since_property_location</span></code>
configuration properties as well. Note that this property can alternatively be defined in the specified
<code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>. The source configuration will take precendence
if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">since_property_name</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the property to relay continuation information. This is only relevant if <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> as been
set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. See <code class="docutils literal notranslate"><span class="pre">since_property_location</span></code> and <code class="docutils literal notranslate"><span class="pre">updated_property</span></code> as well. Note that this
property can alternatively be defined in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the
<a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>. The source configuration will take precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">since_property_location</span></code></p></td>
<td><p>String</p></td>
<td><p>A enumeration of “query” and “header”. The location property to relay continuation information.
This is only relevant if <code class="docutils literal notranslate"><span class="pre">supports_since</span></code> as been set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. See <code class="docutils literal notranslate"><span class="pre">since_property_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">updated_property</span></code> as well. Note that this property can alternatively be defined in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code>
section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>. The source configuration will take precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rest-source-examples">
<span id="id100"></span><h4>Example configuration<a class="headerlink" href="#rest-source-examples" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="#rest-system-example"><span class="std std-ref">REST system example</span></a> section for how to configure the operations we refer to in
these examples:</p>
<p>Example response entities:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;john&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Configuration for REST source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;get-men&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example response entities:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;john&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
            <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span>
            <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Configuration for REST source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;get-men&quot;</span><span class="p">,</span>
        <span class="s2">&quot;payload_property&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example response entities:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;john&quot;</span><span class="p">,</span>
        <span class="s2">&quot;seq&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>
        <span class="s2">&quot;seq&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Configuration for REST source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;get-men&quot;</span>
        <span class="s2">&quot;id_expression&quot;</span> <span class="p">:</span> <span class="s2">&quot;{{ id }}&quot;</span>
        <span class="s2">&quot;updated_expression&quot;</span> <span class="p">:</span> <span class="s2">&quot;{{ seq }}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;supports_since&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;is_chronological&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;is_since_comparable&quot;</span><span class="p">:</span> <span class="n">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example response entities:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;john&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
            <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span>
            <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;pagination&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;next&quot;</span><span class="p">:</span> <span class="s2">&quot;?page=3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;prev&quot;</span><span class="p">:</span> <span class="s2">&quot;?page=1&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Configuration for REST system:</p>
<p>In this case we add a Jinja template to extract the pagination link so we can parse all pages of the response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Our REST service&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;http://our.domain.com/api/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:rest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;get-men&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;men/{{ properties.collection_name }}/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;next_page_link&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ body.pagination.next }}&quot;</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Configuration for REST source is the same as previously:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;get-men&quot;</span><span class="p">,</span>
        <span class="s2">&quot;payload_property&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example response from a service that supports pagination in the header as per the <a class="reference external" href="https://tools.ietf.org/html/rfc5988">RFC 5988 specifcation</a> .</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Headers:

Content-Type: application/json
Link: &lt;?page=1&gt;; rel=&quot;prev&quot;, &lt;?page=3&gt;; rel=&quot;next&quot;

[
    {
        &quot;_id&quot;: &quot;john&quot;,
        &quot;name&quot;: &quot;John&quot;,
        &quot;age&quot;: 21,
        &quot;sex&quot;: &quot;M&quot;
    },
    {
        &quot;_id&quot;: &quot;bob&quot;,
        &quot;name&quot;: &quot;Bob&quot;,
        &quot;age&quot;: 44,
        &quot;sex&quot;: &quot;M&quot;
    }
]
</pre></div>
</div>
<p>In this case we add a Jinja template to extract the pagination link from the reponse header so we can parse
all pages of the response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Our REST service&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;http://our.domain.com/api/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:rest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;get-men&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;men/{{ properties.collection_name }}/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;next_page_link&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ headers.Link.next }}&quot;</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Configuration for REST source is unchanged:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;get-men&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="transforms">
<span id="transform-section"></span><h2>Transforms<a class="headerlink" href="#transforms" title="Permalink to this headline">¶</a></h2>
<p>Transforms sit between the source and the sink. Entities passed from a
source to a sink, can optionally be passed through a chain of
transforms before they are passed on to the sink. This makes it
possible to reshape the entities on their way to the sink. Transforms
can also be used to filter entities and construct new entities.</p>
<p>Transforms can be configured on a pipe by specifying the
“<code class="docutils literal notranslate"><span class="pre">transform</span></code>” property. The field is optional, and can contain
either a transform configuration object or a list of them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;mypipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="o">...</span>
    <span class="p">},</span>
    <span class="o">..</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name of transform (NOTE: deprecated)&quot;</span><span class="p">,</span>
       <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a comment&quot;</span><span class="p">,</span>
       <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;description of the transform (optional)&quot;</span>
        <span class="o">...</span><span class="n">the</span> <span class="n">rest</span> <span class="n">of</span> <span class="n">the</span> <span class="n">transform</span> <span class="n">configuration</span> <span class="n">goes</span> <span class="n">here</span><span class="o">...</span>
    <span class="p">}</span>
 <span class="p">}}</span>
</pre></div>
</div>
<div class="section" id="dtl-transform">
<span id="id102"></span><h3>DTL transform<a class="headerlink" href="#dtl-transform" title="Permalink to this headline">¶</a></h3>
<p>This is a transform that lets you apply <a class="reference internal" href="DTLReferenceGuide.html"><span class="doc">Data Transformation Language</span></a>
transformations on the entities stream produced by the data source.</p>
<div class="section" id="id103">
<h4>Properties<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 70%" />
<col style="width: 3%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rules</span></code></p></td>
<td><p>Object</p></td>
<td><p>The named rules of the DTL transform. The <code class="docutils literal notranslate"><span class="pre">default</span></code> named rule is required and is the rule that will be applied on the source entity. The other rules can be applied via the <a class="reference internal" href="DTLReferenceGuide.html#apply-dtl-function"><span class="std std-ref">apply</span></a> and <a class="reference internal" href="DTLReferenceGuide.html#apply-hops-dtl-function"><span class="std std-ref">apply-hops</span></a> DTL functions.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">id_required</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then the DTL transform will fail if the target entity’s <code class="docutils literal notranslate"><span class="pre">_id</span></code> property is either missing or is not a string. It will also do so if the arguments to <a class="reference internal" href="DTLReferenceGuide.html#dtl-transform-create"><span class="std std-ref">“create”</span></a> and  <a class="reference internal" href="DTLReferenceGuide.html#dtl-transform-create-child"><span class="std std-ref">“create-child”</span></a> is not a dict or is missing the <code class="docutils literal notranslate"><span class="pre">_id</span></code> property or the <code class="docutils literal notranslate"><span class="pre">_id</span></code> property is of a non-string type. If the value is <code class="docutils literal notranslate"><span class="pre">false</span></code> then it will not fail in these situation. Instead the values will be ignored.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id104">
<h4>Example configuration<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h4>
<p>Pipe configuration that reads entities from the
<code class="docutils literal notranslate"><span class="pre">Northwind:Customers</span></code> dataset and transforms them using the Data
Transformation Language before writing them to the
<code class="docutils literal notranslate"><span class="pre">customer-with-orders</span></code> dataset.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;customer-with-orders&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Customers with orders&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
       <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwind:Customers&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dtl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span><span class="s2">&quot;copy&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;_S.ContactName&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;orders&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;apply&quot;</span><span class="p">,</span> <span class="s2">&quot;order&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;hops&quot;</span><span class="p">,</span> <span class="p">{</span>
                    <span class="s2">&quot;datasets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Northwind:Orders o&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;where&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;_S._id&quot;</span><span class="p">,</span> <span class="s2">&quot;o.CustomerID&quot;</span><span class="p">]</span>
                    <span class="p">]</span>
                <span class="p">}]]]</span>
            <span class="p">],</span>
            <span class="s2">&quot;order&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;order_id&quot;</span><span class="p">,</span> <span class="s2">&quot;_S.OrderID&quot;</span><span class="p">],</span>
                <span class="p">[</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;order_date&quot;</span><span class="p">,</span> <span class="s2">&quot;_S.OrderDate&quot;</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json-schema-validation-transform">
<span id="json-schema-transform"></span><h3>JSON Schema validation transform<a class="headerlink" href="#json-schema-validation-transform" title="Permalink to this headline">¶</a></h3>
<p>A transform that validates entities against a <a class="reference external" href="http://json-schema.org/">JSON Schema</a> document.
If the document is valid then the field referenced by <code class="docutils literal notranslate"><span class="pre">key_valid</span></code> will be set to true, otherwise
false. Any validation error messages will be added to the field
referenced by <code class="docutils literal notranslate"><span class="pre">key_errors</span></code>.</p>
<div class="section" id="id105">
<h4>Properties<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 70%" />
<col style="width: 3%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">schema</span></code></p></td>
<td><p>Object</p></td>
<td><p>The JSON schema to validate entities against.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">key_valid</span></code></p></td>
<td><p>String</p></td>
<td><p>The field to store the validation result. This is a boolean value,
which is true if the entity is valid, otherwise false.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;valid&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key_errors</span></code></p></td>
<td><p>String</p></td>
<td><p>The field to store the validation error messages. The error messages
is a list of strings. The field is only added if the entity is invalid.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;errors&quot;</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id106">
<h4>Example configuration<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;men-validated&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;men&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;json_schema&quot;</span><span class="p">,</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;properties&quot;</span> <span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
                <span class="s2">&quot;born&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;born&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the following entities where pushed through the pipe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
 <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Jim&quot;</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
  <span class="s2">&quot;born&quot;</span><span class="p">:</span> <span class="s2">&quot;1972-03-12&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>then these would come out:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
 <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;valid&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
  <span class="s2">&quot;errors&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;&#39;born&#39; is a required property&quot;</span>
  <span class="p">],</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Jim&quot;</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
  <span class="s2">&quot;valid&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
  <span class="s2">&quot;born&quot;</span><span class="p">:</span> <span class="s2">&quot;1972-03-12&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conditional-transform">
<span id="id107"></span><h3>Conditional transform<a class="headerlink" href="#conditional-transform" title="Permalink to this headline">¶</a></h3>
<p>The conditional transform selects an active transform based on a key typically controlled by an environment variable.
It is typically used in devops to be able to use the same configuration in different type of environments (i.e. development,
staging, production). The actual transform to use is resolved at runtime when the parent pipe is created.</p>
<p>The configuration options are:</p>
<div class="section" id="id108">
<h4>Prototype<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;conditional&quot;</span><span class="p">,</span>
   <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(current-environment)&quot;</span><span class="p">,</span>
   <span class="s2">&quot;alternatives&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;dev&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dtl&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">},</span>
       <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dtl&quot;</span><span class="p">,</span>
           <span class="o">..</span>
          <span class="p">},</span>
       <span class="s2">&quot;prod&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dtl&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id109">
<h4>Properties<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">condition</span></code></p></td>
<td><p>String</p></td>
<td><p>The key to look up in <code class="docutils literal notranslate"><span class="pre">alternatives</span></code> for the actual transform to use at runtime. Typically an environment variable.
Note that all possible enumerations of this value need to exist in <code class="docutils literal notranslate"><span class="pre">alternatives</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alternatives</span></code></p></td>
<td><p>Object</p></td>
<td><p>A dictionary of actual transform configurations keyed by the enumerated value of <code class="docutils literal notranslate"><span class="pre">condition</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="http-transform">
<span id="id110"></span><h3>HTTP transform<a class="headerlink" href="#http-transform" title="Permalink to this headline">¶</a></h3>
<p>This transform performs <a class="reference external" href="https://en.wikipedia.org/wiki/POST_(HTTP)">HTTP POST</a> requests to a HTTP capable
endpoint. The service at the endpoint then transforms the entities contained in the request body and returns them in
the <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message">HTTP response message</a> .</p>
<p>The HTTP endpoint must accept <code class="docutils literal notranslate"><span class="pre">application/json</span></code> and the response must also be <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p>
<p>The endpoint must support lists of entities only, i.e. it should expect to receive a
<a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON array</a> and it should always return a JSON array. If the endpoint returns
anything other than a “2xx Success” <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">HTTP status code</a>,
the transform will raise an exception.</p>
<p>The endpoint is free to decide how the entities are transformed. It’ll just have to produce a list of zero or more
entities from the entities it was posted. This means that entities can be transformed, filtered out or new ones created.</p>
<div class="section" id="id112">
<h4>Properties<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 70%" />
<col style="width: 3%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> or <a class="reference internal" href="#microservice-system"><span class="std std-ref">microservice system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>Object</p></td>
<td><p>The URL to HTTP POST entities to.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of entities to POST in each request. If there are
more entities than this then they’ll be split across multiple HTTP
requests.</p></td>
<td><p>100</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">headers</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>An optional set of header values to set in the HTTP request. Both keys and values must
evaluate to strings.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id113">
<h4>Example configuration<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-http-transform-service&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;base_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8080/transforms/&quot;</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;deduplicated-men&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;men&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;my-http-transform-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8080/transforms/deduplicate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;some-header&quot;</span><span class="p">:</span> <span class="s2">&quot;some-value&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="emit-children-transform">
<span id="id114"></span><h3>Emit children transform<a class="headerlink" href="#emit-children-transform" title="Permalink to this headline">¶</a></h3>
<p>This transform will emit all child entities of its source
entities. All entities in the <code class="docutils literal notranslate"><span class="pre">$children</span></code> property that have an
<code class="docutils literal notranslate"><span class="pre">_id</span></code> property will be emitted. The parent entity will not be
emitted.</p>
<p>This transform should always be used in a separate pipe. If the <code class="docutils literal notranslate"><span class="pre">emit_children</span></code> transform is a part of a chained transform, Sesam won’t be able to perform deletion tracking on the emitted child entities, as the parent entity will be removed from the sink dataset and not marked as deleted.</p>
<div class="section" id="id115">
<h4>Properties<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h4>
<p>There are currently no properties on this transform.</p>
</div>
<div class="section" id="id116">
<h4>Example configuration<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;children&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;parents-with-children&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;emit_children&quot;</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="xml-transform">
<span id="id117"></span><h3>XML transform<a class="headerlink" href="#xml-transform" title="Permalink to this headline">¶</a></h3>
<p>This transform will render entities on the form described in the <a class="reference internal" href="#xml-endpoint-sink"><span class="std std-ref">XML endpoint sink</span></a> to a string and
embed it in the entity, which is then passed on to the transform chain.</p>
<div class="section" id="id118">
<h4>Prototype<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h4>
<p>The properties are identical to the <a class="reference internal" href="#xml-endpoint-sink"><span class="std std-ref">XML endpoint sink</span></a>, except for the additional <code class="docutils literal notranslate"><span class="pre">xml-property</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;xml&quot;</span><span class="p">,</span>
    <span class="s2">&quot;root-attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;xmlns&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns1&quot;</span><span class="p">,</span>
       <span class="s2">&quot;xmlsn:foo&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns2&quot;</span><span class="p">,</span>
       <span class="s2">&quot;xmlns:bar&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns3&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;xml-property&quot;</span><span class="p">:</span> <span class="s2">&quot;xml-property-to-use&quot;</span><span class="p">,</span>
    <span class="s2">&quot;include-xml-decl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;skip-deleted-entities&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id119">
<h4>Properties<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">root-attributes</span></code></p></td>
<td><p>Object</p></td>
<td><p>An object containing the attributes to include on the root element. This is where you typically declare
your namespaces, schema and so on.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">include-xml-decl</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code> includes a default XML header: <code class="docutils literal notranslate"><span class="pre">&lt;?xml</span> <span class="pre">version=&quot;1.0&quot;</span> <span class="pre">encoding=&quot;UTF-8&quot;</span> <span class="pre">standalone=&quot;yes&quot;?&gt;</span></code></p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">xml-property</span></code></p></td>
<td><p>String</p></td>
<td><p>The property that will hold any XML generated</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">skip-deleted-entities</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This can be set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to make deleted entities appear in the XML output. The default is that
deleted entities does not appear.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id120">
<h4>Example configuration<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h4>
<p>This is how a XML transform would look like in the context of a pipe (source and sink configs omitted for brevity):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;xml&quot;</span><span class="p">,</span>
         <span class="s2">&quot;root-attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;xmlns&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;xmlns:foo&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns2&quot;</span>
         <span class="p">},</span>
         <span class="s2">&quot;xml-property&quot;</span><span class="p">:</span> <span class="s2">&quot;xml&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Given the input entity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Entity 1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;entity-1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&lt;foo:tag&gt;&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;child&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Child entity&quot;</span><span class="p">,</span>
      <span class="s2">&quot;&lt;section&gt;&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;&lt;from&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;&lt;to&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;999&quot;</span><span class="p">}</span>
      <span class="p">]</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>it will produce the transformed entity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Entity 1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;entity-1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&lt;foo:tag&gt;&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;child&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Child entity&quot;</span><span class="p">,</span>
      <span class="s2">&quot;&lt;section&gt;&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;&lt;from&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;&lt;to&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;999&quot;</span><span class="p">}</span>
      <span class="p">]</span>
  <span class="p">}],</span>
  <span class="s2">&quot;xml&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;foo:tag xmlns=</span><span class="se">\&quot;</span><span class="s2">http://www.example.org/ns1</span><span class="se">\&quot;</span><span class="s2"> xmlns:foo=</span><span class="se">\&quot;</span><span class="s2"> .. &lt;/foo:tag&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rdf-transform">
<span id="id121"></span><h3>RDF transform<a class="headerlink" href="#rdf-transform" title="Permalink to this headline">¶</a></h3>
<p>This transform will render entities to a N-Triples string and embed it in the entity, which is then passed on
to the transform chain.</p>
<div class="section" id="id122">
<h4>Prototype<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rdf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rdf-property&quot;</span><span class="p">:</span> <span class="s2">&quot;rdf-property-to-use&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id123">
<h4>Properties<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rdf-property</span></code></p></td>
<td><p>String</p></td>
<td><p>The property that will hold any RDF generated</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id124">
<h4>Example configuration<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h4>
<p>This is how a RDF transform would look like in the context of a pipe (source and sink configs omitted for brevity):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transform&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rdf&quot;</span><span class="p">,</span>
         <span class="s2">&quot;rdf-property&quot;</span><span class="p">:</span> <span class="s2">&quot;rdf&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Given the input entity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;x:1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;x:name&quot;</span><span class="p">:</span> <span class="s2">&quot;Entity 1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;x:id&quot;</span><span class="p">:</span> <span class="s2">&quot;entity-1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;foo:prop&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">&quot;x:id&quot;</span><span class="p">:</span> <span class="s2">&quot;child&quot;</span><span class="p">,</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And these namespaces in the metadata configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;namespaces&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="s2">&quot;http://x.org/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;http://foo.org/&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>it will produce the transformed entity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;x:1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;x:name&quot;</span><span class="p">:</span> <span class="s2">&quot;Entity 1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;x:id&quot;</span><span class="p">:</span> <span class="s2">&quot;entity-1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;foo:child&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">&quot;x:id&quot;</span><span class="p">:</span> <span class="s2">&quot;child&quot;</span><span class="p">,</span>
  <span class="p">}]</span>
  <span class="s2">&quot;rdf&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://x.org/1&gt; &lt;http://x.org/name&gt; </span><span class="se">\&quot;</span><span class="s2">Entity 1</span><span class="se">\&quot;</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&lt;http://x.org/1&gt; &lt;http://x.org/id&gt; </span><span class="se">\&quot;</span><span class="s2">entity-1</span><span class="se">\&quot;</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&lt;http://x.org/1&gt; &lt;http://foo.org/child&gt; _:x1.</span><span class="se">\n</span><span class="s2">_:x1 &lt;http://x.org/id&gt; </span><span class="se">\&quot;</span><span class="s2">child</span><span class="se">\&quot;</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rest-transform">
<span id="id125"></span><h3>REST transform<a class="headerlink" href="#rest-transform" title="Permalink to this headline">¶</a></h3>
<p>This transform can communicate with a REST service using HTTP requests.</p>
<p>Note that by default the REST transform will only attempt to parse responses with content-type “application/json”, if
the REST API provides other types of valid JSON, you can specify which in the <code class="docutils literal notranslate"><span class="pre">json_content_types</span></code> property of
the associated <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>.</p>
<p>Responses which aren’t recognised as JSON will make the REST transform emit entities with a property containing
the raw response body and - optionally - the content-type of the response for further processing with DTL and/or
HTTP or REST transform(s).</p>
<p>Note that the shape of the entities piped to this transform must conform to certain criteria, see the
<a class="reference internal" href="#rest-transform-expected-rest-entity-shape"><span class="std std-ref">notes</span></a> later in the section.</p>
<p>Also note that, in contrast to the REST sink, the REST transform also supports the GET operation.</p>
<div class="section" id="id126">
<h4>Prototype<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;the-default-operation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;the-default&quot;</span><span class="p">:</span> <span class="s2">&quot;properties&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;the-default&quot;</span><span class="p">:</span> <span class="s2">&quot;payload&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;rate_limiting_retries&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;rate_limiting_delay&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;response_property&quot;</span><span class="p">:</span> <span class="s2">&quot;the-property-name-to-put-the-response-in&quot;</span><span class="p">,</span>
    <span class="s2">&quot;response_include_content_type&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;payload_property&quot;</span><span class="p">:</span> <span class="s2">&quot;the-property-the-response-resides-in&quot;</span><span class="p">,</span>
    <span class="s2">&quot;id_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ jinja_expression_for_the_id.property }}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ jinja_expression_for_the_updated_property }}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ignored_status_codes&quot;</span><span class="p">:</span> <span class="s2">&quot;404,444-450,501-599&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id127">
<h4>Properties<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">response_property</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the property to store the result returned from the REST service. Note that if the <code class="docutils literal notranslate"><span class="pre">replace_entity</span></code>
property is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> and the service returns JSON data, this JSON data will be returned as entities. If
the data type is not JSON, the result will be an empty entity with the same <code class="docutils literal notranslate"><span class="pre">_id</span></code> as the original with
the <code class="docutils literal notranslate"><span class="pre">response_property</span></code> set to the contents of the request reponse body as a string. If <code class="docutils literal notranslate"><span class="pre">replace-entity</span></code> is
set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the <code class="docutils literal notranslate"><span class="pre">response-property</span></code> will be added to the original entity and set to the contents of the
request reponse body as a string or a parsed JSON structure if that is the returned content type.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;response&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">replace_entity</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This property controls if the entity should be replaced with the JSON contents of the response or if the
original entity should be kept. See the <code class="docutils literal notranslate"><span class="pre">response_property</span></code> for more detail on how this works. The default
is to keep the original entity and add a <code class="docutils literal notranslate"><span class="pre">reponse</span></code> property holding the result of the REST operation.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">response_include_content_type</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This property controls if the output entity should include the Content-Type of the response in a
<code class="docutils literal notranslate"><span class="pre">content-type</span></code> property. Note that this property is ignored if <code class="docutils literal notranslate"><span class="pre">replace_entity</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> and
the response is JSON.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">operation</span></code></p></td>
<td><p>String</p></td>
<td><p>The default id of the operation to use if not present in the entity.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">properties</span></code></p></td>
<td><p>Object</p></td>
<td><p>The properties mapping to use if not present in the entity. Note that if both are present the properties in
the entity takes precendence.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload</span></code></p></td>
<td><p>Object, string or array</p></td>
<td><p>The default value to use as payload if not present in the entity.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">response_property</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the property to put the response in when emitting entities. Note that this property can be defined
in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The source configuration
will take precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload_property</span></code></p></td>
<td><p>String</p></td>
<td><p>The JSON response sub-property to use as the source of the emitted entities. Note that this property can be
defined in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The transform
configuration will take precendence if defined. This property can express a “path” into the response using a dot
as path separator, i.e. <code class="docutils literal notranslate"><span class="pre">foo.bar</span></code>. Note that a if a “non-path” version of the property can be found in the
response body it will take precedence over any property found by traversing the path using the dot notation.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">id_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the entities
properties available to the templating context. It can be used to add <code class="docutils literal notranslate"><span class="pre">_id</span></code> properties to the emitted entities
if missing from the transform response. Note that this property can be defined
in the specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> as well. The transform configuration
will take precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">updated_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the entities
properties available to the templating context. It can be used to add <code class="docutils literal notranslate"><span class="pre">_updated</span></code> properties to the emitted
entities if missing from the transform response. Note that this property can alternatively be defined in the
specified <code class="docutils literal notranslate"><span class="pre">operation</span></code> section of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>. The transform configuration will take
precendence if defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ignored_status_codes</span></code></p></td>
<td><p>String</p></td>
<td><p>An expression in the form of single values or value ranges of HTTP status codes that will be ignored by the
transform. HTTP responses with status codes matching this list will result in the response being omitted from
the result. The values are either comma separated integer values or a range of values with a hyphen separator
(i.e. a single <code class="docutils literal notranslate"><span class="pre">-</span></code> character). The start and end of a range are inclusive, i.e. 400-403 includes both 400 and
403. Whitespaces are not allowed in the expression. Note that status codes in the range 200-299 are always
allowed and the default is to fail for any status code outside of this range.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If set and the REST service returns a HTTP 429 error code, the request will be retried the number of times
indicated. The time between retries can be adjusted by setting <code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code> is set on either the transform or on the REST system, and a retry is triggered
the time to wait before retrying can be set by this value. If specified on both the system and transform,
the transform value takes precedence.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="expected-entity-shape">
<span id="rest-transform-expected-rest-entity-shape"></span><h4>Expected entity shape<a class="headerlink" href="#expected-entity-shape" title="Permalink to this headline">¶</a></h4>
<p>The entities must be transformed into a particular form before being piped to the REST transform. The general form
expected is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-named-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;some&gt;string-value&lt;/some&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">properties</span></code></p></td>
<td><p>Object</p></td>
<td><p>Any non-payload properties you need should go into the toplevel child entity <code class="docutils literal notranslate"><span class="pre">properties</span></code>. You can then address
these properties in the Jinja templates for operation <code class="docutils literal notranslate"><span class="pre">url</span></code> properties using the “{{ properties.key_name }}” syntax.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">operation</span></code></p></td>
<td><p>String</p></td>
<td><p>The contents of this property must refer to one of the named <code class="docutils literal notranslate"><span class="pre">operations</span></code> registered with the transform’s <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>.
Note that if no default value is defined in the transform configuration, this property is required.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload</span></code></p></td>
<td><p>String or Object</p></td>
<td><p>The payload for the operation specified. It can be a string or an object. You can also omit it, in which case
the empty string will be used instead (for example for “DELETE” methods). All string payloads will be encoded
as UTF-8.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Example entities:</p>
<p>String as payload:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-named-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;some&gt;string-value&lt;/some&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Object as payload (set operation <code class="docutils literal notranslate"><span class="pre">payload-type</span></code> to “json”, “json-transit” or “form”  in the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> the transform uses):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-other-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;property&quot;</span><span class="p">,</span>
      <span class="s2">&quot;child&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Multi-part form request if <code class="docutils literal notranslate"><span class="pre">payload-type</span></code> is “form”, otherwise use “json” or “json-transit” for this type of entity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-third-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id128">
<h4>Example configuration<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="#rest-system-example"><span class="std std-ref">REST system example</span></a> section for how to configure the operations we refer to in
these examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transform&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;post-man&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
             <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="s2">&quot;study-group-2&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example input entities:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
      <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>
      <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;get-man&quot;</span><span class="p">,</span>
      <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="s2">&quot;study-group-1&quot;</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Example output entities:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
      <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>
      <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;get-man&quot;</span><span class="p">,</span>
      <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="s2">&quot;study-group-1&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob Maker&quot;</span>
          <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;bob.maker@example.com&quot;</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="pagination-support">
<h4>Pagination support<a class="headerlink" href="#pagination-support" title="Permalink to this headline">¶</a></h4>
<p>See the the <a class="reference internal" href="#rest-source-examples"><span class="std std-ref">REST source examples</span></a> for how to use pagination with the REST transform -
the configuration set up is the same as with the REST source.</p>
</div>
</div>
</div>
<div class="section" id="sinks">
<span id="sink-section"></span><h2>Sinks<a class="headerlink" href="#sinks" title="Permalink to this headline">¶</a></h2>
<p>Sinks are at the receiving end of pipes and are responsible for
writing entities into an internal dataset or a target system.</p>
<p>Sinks can support batching by implementing specific methods and
accumulating entities in a buffer before writing the batch. The size of
each batch can be specified using the <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> property on the
pipe. See the section on <a class="reference internal" href="#pipe-batching"><span class="std std-ref">batching</span></a> for more
information.</p>
<div class="section" id="id129">
<h3>Prototype<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h3>
<p>The following <em>JSON</em> snippet shows the general form of a sink definition.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;a-sink-type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a comment&quot;</span><span class="p">,</span>
    <span class="o">..</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The only universally required property is <code class="docutils literal notranslate"><span class="pre">type</span></code>.</p>
</div>
<div class="section" id="id130">
<h3>Properties<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>String</p></td>
<td><p>The type of the sink, the allowed types are described below</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable comment on the sink (optional).</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="conditional-sink">
<span id="id131"></span><h3>Conditional sink<a class="headerlink" href="#conditional-sink" title="Permalink to this headline">¶</a></h3>
<p>The conditional sink selects an active sink based on a key typically controlled by an environment variable.
It is typically used in devops to be able to use the same configuration in different type of environments (i.e. development,
staging, production). The actual sink to use is resolved at runtime when the parent pipe is created.</p>
<p>The configuration options are:</p>
<div class="section" id="id132">
<h4>Prototype<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;conditional&quot;</span><span class="p">,</span>
   <span class="s2">&quot;condition&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(current-environment)&quot;</span><span class="p">,</span>
   <span class="s2">&quot;alternatives&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;dev&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;null&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">},</span>
       <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">},</span>
       <span class="s2">&quot;prod&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
           <span class="o">..</span>
       <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id133">
<h4>Properties<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">condition</span></code></p></td>
<td><p>String</p></td>
<td><p>The key to look up in <code class="docutils literal notranslate"><span class="pre">alternatives</span></code> for the actual sink to use at runtime. Typically an environment variable.
Note that all possible enumerations of this value need to exist in <code class="docutils literal notranslate"><span class="pre">alternatives</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alternatives</span></code></p></td>
<td><p>Object</p></td>
<td><p>A dictionary of actual sink configurations keyed by the enumerated value of <code class="docutils literal notranslate"><span class="pre">condition</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="dataset-sink">
<span id="id134"></span><h3>Dataset sink<a class="headerlink" href="#dataset-sink" title="Permalink to this headline">¶</a></h3>
<p>The dataset sink writes the entities it is given to an identified dataset. The configuration looks like:</p>
<div class="section" id="id135">
<h4>Prototype<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-dataset&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id136">
<h4>Properties<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dataset</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the dataset to write entities into. Note: if it doesn’t exist before
entities are written to the sink, it will be created on the fly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The dataset id cannot contain forward slash characters (<code class="docutils literal notranslate"><span class="pre">/</span></code>) nor can it
reference a <code class="docutils literal notranslate"><span class="pre">system:</span></code> dataset.</p>
</div>
</td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set_initial_offset</span></code></p></td>
<td><p>Enum&lt;String&gt;</p></td>
<td><p>This property specifies when the sink should set the initial offset on its dataset.</p>
<p>When the initial offset is set then the dataset is considered to be <em>populated</em>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">if-source-populated</span></code> (the default) means that the pipe will set the initial offset
when the source is populated and the pipe has consumed all the source entities. This
is a very useful default as the populated flag will propagate automatically downstream once
datasets get populated upstream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">never</span></code> means that the pipe will never set the initial offset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">always</span></code> means that the pipe will always set the initial offset when the pipe completed
successfully.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initially</span></code> means that the pipe will set the initial offset at the start of the pump run.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onload</span></code> means that the initial offset will be set when the pipe is loaded / configured.</p></li>
</ul>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">if-source-populated</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">indexes</span></code></p></td>
<td><p>String or Array</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">&quot;$ids&quot;</span></code> then an index on the <code class="docutils literal notranslate"><span class="pre">$ids</span></code> property will be automatically
maintained. This index will then be used by the dataset browser to look up
entities both by <code class="docutils literal notranslate"><span class="pre">_id</span></code> and <code class="docutils literal notranslate"><span class="pre">$ids</span></code>.</p>
<p>If the value is an array then it can contain index expressions that should be
maintained on the sink dataset. This is typically used for declaring subset indexes.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">track_children</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then the <code class="docutils literal notranslate"><span class="pre">$children</span></code> property will be compared against the previous
version of the entity and a delta produced. This will cause the <code class="docutils literal notranslate"><span class="pre">$children</span></code>
property to be updated on entities just before they are written to the dataset.</p>
<p>This is a special feature that can be used in combination with the
<code class="docutils literal notranslate"><span class="pre">[&quot;create-child&quot;,</span> <span class="pre">...]</span></code> DTL function and the <code class="docutils literal notranslate"><span class="pre">emit_children</span></code> pipe transform.
The purpose is to be able to detect deleted children entities when doing
incremental syncs.</p>
<p>The effective value of this property is inferred to be <code class="docutils literal notranslate"><span class="pre">true</span></code>
if any of the pipe’s transforms use the <code class="docutils literal notranslate"><span class="pre">create-child</span></code> DTL
function. It is possible to override this by setting the
property’s value to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</td>
<td><p>Inferred</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">enable_optimistic_locking</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then the <code class="docutils literal notranslate"><span class="pre">_updated</span></code> property in each entity will be compared against the previous
version of the entity. If the <code class="docutils literal notranslate"><span class="pre">_updated</span></code> property of at least one entity doesn’t match, an error
will raised and no entities will be written to the target dataset.</p>
<p>The purpose is to be guard against two agents trying to update the same entity at the same time; in some
cases one doesn’t want the last edit to “win” automatically. The typical usecase is a pipe with a
<code class="docutils literal notranslate"><span class="pre">http_endpoint</span></code> source where the http endpoint can be accessed by several independant processes
that use the sesam instance as a storage service. In this case the pipe should <em>not</em> have any transforms,
since the http_endpoint will send the resulting entity back to the calling process; if the entity has been
transformed by DTL or some other transform, the result might make little sense to the calling process.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">circuit_breaker_threshold_factor</span></code></p></td>
<td><p>Decimal</p></td>
<td><p>Specifying this property will enable a <a class="reference internal" href="#circuit-breakers-section"><span class="std std-ref">circuit breaker</span></a> on
the pipe. It specifies a factor that is used to calculate the circuit breaker limit. Note
that this is a factor and not a percentage, e.g. <code class="docutils literal notranslate"><span class="pre">0.32</span></code> means 32% and <code class="docutils literal notranslate"><span class="pre">1.5</span></code> means 150%.
If the factor is <code class="docutils literal notranslate"><span class="pre">0.5</span></code> and the dataset already contains 100 entities, then the circuit
breaker will trip if it sees more than 50 new entities.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">circuit_breaker_threshold_count</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Specifying this property will enable a <a class="reference internal" href="#circuit-breakers-section"><span class="std std-ref">circuit breaker</span></a> on
the pipe. The count specifies the circuit breaker limit directly. The limit defines how many
new entities can be written to the dataset before the circuit breaker trips. If this property
is set to <code class="docutils literal notranslate"><span class="pre">100</span></code>, then 100 entities can be written before it trips.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If both <code class="docutils literal notranslate"><span class="pre">circuit_breaker_threshold_factor</span></code> and <code class="docutils literal notranslate"><span class="pre">circuit_breaker_threshold_count</span></code> are
specified then the maximum value of those two are used as the circuit breaker limit. The
count is in this case typically used to specify the lower limit.</p>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">deletion_tracking</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> (the default), then after a full run any entities that existed in the dataset before
the run but that weren’t seen during the run will be deleted.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">false</span></code>, then any existing entities in the dataset will not be touched. This is only
useful in very special circumstances.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bitset_commit_interval</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Specifies how often dataset bitsets and dataset compaction changes are written to disk. The higher the number the fewer writes, but at the cost of having to redo the work if the pipe fails before completion. The changes are always written to disk once the pipe completes.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1000000</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">prevent_multiple_versions</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> then the pipe will fail if a new version of an existing entity is attempted written to the sink dataset. This is useful if one wants to prevent multiple versions of the same entity to be written to the sink dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">suppress_filtered</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>The default value is <code class="docutils literal notranslate"><span class="pre">false</span></code> unless it is a full sync and the source is of type <code class="docutils literal notranslate"><span class="pre">dataset</span></code> and <code class="docutils literal notranslate"><span class="pre">include_previous_versions</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code> [*]. The purpose of this property is to make it possible to opt-in or opt-out of a specific optimization in the pipe. The optimization is to suppress entities that are filtered out in a transform early so that they are not passed to the sink. This optimization should only be used when the pipe produces exactly one version per <code class="docutils literal notranslate"><span class="pre">_id</span></code> in the output. The optimization is useful when the pipe filters out a lot of entities.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> [*]</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_entity_bytes_size</span></code></p></td>
<td><p>Enum&lt;String&gt;</p></td>
<td><p>Defines the maximum size in bytes of an individual entity as it is stored in a dataset.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">104857600</span></code> (100MB)</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id137">
<h4>Example configuration<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;Northwind:Customer&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sesam-databrowser-sink">
<span id="databrowser-sink"></span><h3>Sesam Databrowser sink<a class="headerlink" href="#sesam-databrowser-sink" title="Permalink to this headline">¶</a></h3>
<p>The databrowser sink writes the entities it is given to a Solr index
to be displayed by the Sesam Databrowser application. The input
entities are transformed to special Databrowser JSON documents before
being sent off for indexing.</p>
<p>This sink supports <a class="reference internal" href="#pipe-batching"><span class="std std-ref">batching</span></a>.</p>
<p>The configuration looks like:</p>
<div class="section" id="id138">
<h4>Prototype<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;databrowser&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;solr-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">&quot;commit_within&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;commit_at_end&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;keep_existing_solr_ids&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;maintain_id_links&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id139">
<h4>Properties<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#solr-system"><span class="std std-ref">Solr system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of documents to post to solr in one http request</p></td>
<td><p>100</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">commit_within</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of seconds to wait until committing, i.e. invalidating the Solr
caches. This is used to set up commit batching. The default is null
(i.e. not set) which means that a commit will be issued at the end of the
sync if <code class="docutils literal notranslate"><span class="pre">commit_at_end</span></code> is true. Do not set this too low as it will cause
a lot of overhead on the Solr server.</p></td>
<td><p>null</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">commit_at_end</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If true, then the sink will issue a commit at the end of the sync. In general
it is best to rely on <code class="docutils literal notranslate"><span class="pre">commit_within</span></code> instead or just let the Solr server
itself decide the commit interval.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keep_existing_solr_ids</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This can be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in order to try to reuse the existing solr-id of an entity, even if
the solr-ids of the entity no longer contains the solr-id that exists on the solr server.
The cons of doing this is that it requires a http-request to solr for <em>each and every</em>
entity, so it is <em>very</em> expensive. This option should therefore be set to false in
cases where the id-problem is not likely to occur.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">maintain_id_links</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This can be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in order to maintain links to documents in the Solr index. If the current
document doesn’t exist in the solr index (via its <code class="docutils literal notranslate"><span class="pre">id</span></code> property), but there is a match in the <code class="docutils literal notranslate"><span class="pre">ids</span></code> property
of some other document(s), this setting will force the new document to use ab existing id from the index.
This makes sure any links to an existing document in the Solr index is kept (for example bookmarked documents).
The option only has an effect if the <code class="docutils literal notranslate"><span class="pre">keep_existing_solr_ids</span></code> option is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id140">
<h4>Example configuration<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;databrowser&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8893/solr/my_index&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json-push-sink">
<span id="json-sink"></span><h3>JSON push sink<a class="headerlink" href="#json-push-sink" title="Permalink to this headline">¶</a></h3>
<p>The JSON push sink implements a simple HTTP based protocol where
individual entities or lists of entities are <code class="docutils literal notranslate"><span class="pre">POSTed</span></code> as JSON data
to an <a class="reference internal" href="#url-system"><span class="std std-ref">HTTP endpoint</span></a>.</p>
<p>The protocol is described in additional detail in the <a class="reference internal" href="json-push.html"><span class="doc">JSON Push
Protocol</span></a> document. The serialisation of entities as JSON
is described in more detail <a class="reference internal" href="entitymodel.html"><span class="doc">here</span></a>.</p>
<p>Consider using the more general <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a> if you’re interacting with a non-Sesam JSON
capable REST api.</p>
<p>This sink is compatible with <a class="reference internal" href="#http-endpoint-source"><span class="std std-ref">The HTTP endpoint source</span></a>.</p>
<p>This sink supports <a class="reference internal" href="#pipe-batching"><span class="std std-ref">batching</span></a>.</p>
<div class="section" id="id141">
<h4>Prototype<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;url-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;url-to-http-endpoint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;some-header&quot;</span><span class="p">:</span> <span class="s2">&quot;some-value&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id142">
<h4>Properties<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>The full URL to HTTP service implementing the <code class="docutils literal notranslate"><span class="pre">JSON</span> <span class="pre">push</span> <span class="pre">protocol</span></code> described.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of entities to POST in each request. If there are
more entities than this then they’ll be split across multiple HTTP
requests.</p></td>
<td><p>100</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">headers</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>An optional set of header values to set in HTTP request made using this sink. Both keys and values must
evaluate to strings.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id143">
<h4>Example configuration<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:9042/api/receivers/foo/entities&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An example using a custom “application/json” content-type header needed by some non-standard compliant servers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:9042/api/receivers/foo/entities&quot;</span><span class="p">,</span>
        <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json; charset=UTF-8&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sdshare-push-sink">
<span id="sdshare-sink"></span><h3>SDShare push sink<a class="headerlink" href="#sdshare-push-sink" title="Permalink to this headline">¶</a></h3>
<p>The SDShare push sink is similar to the <a class="reference internal" href="#json-sink"><span class="std std-ref">JSON push sink</span></a>, but instead of posting JSON it
translates the inbound entities to <code class="docutils literal notranslate"><span class="pre">RDF</span></code> and <code class="docutils literal notranslate"><span class="pre">POSTs</span></code> them in N-Triples form to a <a class="reference internal" href="#url-system"><span class="std std-ref">HTTP endpoint</span></a>
implementing the <code class="docutils literal notranslate"><span class="pre">SDShare</span> <span class="pre">push</span> <span class="pre">protocol</span></code>.</p>
<div class="section" id="id144">
<h4>Prototype<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sdshare&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span><span class="s2">&quot;url-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;url-to-http-endpoint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;graph&quot;</span><span class="p">:</span> <span class="s2">&quot;uri-of-graph-to-post-to&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id145">
<h4>Properties<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>The full URL to HTTP service implementing the <code class="docutils literal notranslate"><span class="pre">SDShare</span> <span class="pre">push</span> <span class="pre">protocol</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">graph</span></code></p></td>
<td><p>String</p></td>
<td><p>A URI representing a graph to post the <code class="docutils literal notranslate"><span class="pre">RDF</span> <span class="pre">ntriples</span></code> to</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id146">
<h4>Example configuration<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sdshare&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8001/sdshare_push_service&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sms-message-sink">
<span id="sms-sink"></span><h3>SMS message sink<a class="headerlink" href="#sms-message-sink" title="Permalink to this headline">¶</a></h3>
<p>The SMS message sink is capable of sending <code class="docutils literal notranslate"><span class="pre">SMS</span></code> messages based on the entities it receives. The message to send can be
constructed either by inline templates or from templates read from disk. These templates are assumed to be <code class="docutils literal notranslate"><span class="pre">Jinja</span></code>
templates (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) with the entities properties available to the templating context. The template file
name can either be inlined in the configuration or embedded in the input entity. The SMS service to use must be
configured separately as a <a class="reference internal" href="#system-section"><span class="std std-ref">system</span></a> and its <code class="docutils literal notranslate"><span class="pre">_id</span></code> property given in the <code class="docutils literal notranslate"><span class="pre">system</span></code> property.
Currently, only the <a class="reference internal" href="#twilio-system"><span class="std std-ref">Twilio provider</span></a> is supported.</p>
<div class="section" id="id147">
<h4>Prototype<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sms&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;sms-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body_template&quot;</span><span class="p">:</span> <span class="s2">&quot;static jinja template as a string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body_template_property&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-property-for-body-template&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recipients&quot;</span><span class="p">:</span> <span class="s2">&quot;static,comma,separated,list,of,international,phonenumbers&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recipients_property&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-property-to-get-recipients-from&quot;</span><span class="p">,</span>
    <span class="s2">&quot;from_number&quot;</span><span class="p">:</span> <span class="s2">&quot;static-international-phone-number-to-use-as-from-number&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id148">
<h4>Properties<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h4>
<p>The configuration must contain at most one of <code class="docutils literal notranslate"><span class="pre">body_template</span></code> or <code class="docutils literal notranslate"><span class="pre">body_template_property</span></code>:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#twilio-system"><span class="std std-ref">Twilio provider</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">body_template</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code> to use for constructing messages. The template will have access to all entity properties by name.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">body_template_property</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">id</span></code> of a property of the incoming entity to use for looking up the <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code>
(i.e for inlining the templates in the entities). It should not be used at the same time as <code class="docutils literal notranslate"><span class="pre">body_template</span></code>
or <code class="docutils literal notranslate"><span class="pre">body_template_file*</span></code></p></td>
<td><p>“body_template”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recipients</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a comma-separated list of internationalised phone-numbers to send the message constructed to.
If this is not inlined in the entities via <code class="docutils literal notranslate"><span class="pre">recipients_property</span></code> (see below) the property is required.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recipients_property</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain the id of the property to look up the recipients from the entity itself (i.e for inlining the
recpients). If <code class="docutils literal notranslate"><span class="pre">recipients</span></code> (see abowe) is not specified, this property is mandatory and the propery
referenced by it must exists and be valid for all entities.</p></td>
<td><p>“recipients”</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">from_number</span></code></p></td>
<td><p>String</p></td>
<td><p>An international phone number to use as the sender of all messages</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id149">
<h4>Example configuration<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity. The
examples assume a <a class="reference internal" href="#system-section"><span class="std std-ref">system component</span></a> (i.e. a <a class="reference internal" href="#twilio-system"><span class="std std-ref">Twilio service</span></a>) has been
configured earlier:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sms&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;twilio_service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;body_template&quot;</span><span class="p">:</span> <span class="s2">&quot;SMS message: {{ message_prop_id }}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;recipients&quot;</span><span class="p">:</span> <span class="s2">&quot;+4799887766,+4788776655&quot;</span><span class="p">,</span>
        <span class="s2">&quot;from_number&quot;</span><span class="p">:</span> <span class="s2">&quot;+4766554433&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the above example the entities sent to the sink should have at least a single property <code class="docutils literal notranslate"><span class="pre">message_prop_id</span></code>, i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;message_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message_prop_id&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the message to send&quot;</span><span class="p">,</span>
    <span class="s2">&quot;some_other_property&quot;</span><span class="p">:</span> <span class="s2">&quot;Some other value&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An example where the template to use is included in the entity written to the sink:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sms&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;twilio_service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;body_template_property&quot;</span><span class="p">:</span> <span class="s2">&quot;body_template_property_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;recipients&quot;</span><span class="p">:</span> <span class="s2">&quot;+4799887766,+4788776655&quot;</span><span class="p">,</span>
        <span class="s2">&quot;from_number&quot;</span><span class="p">:</span> <span class="s2">&quot;+4766554433&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For the example above the entities sent to the sink should have at least a single property <code class="docutils literal notranslate"><span class="pre">body_template_property_id</span></code>
and it also needs to have the properties references in the embedded template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;message_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body_template_property_id&quot;</span><span class="p">:</span> <span class="s2">&quot;SMS message: {{ message_prop_id }}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message_prop_id&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the message to send&quot;</span><span class="p">,</span>
    <span class="s2">&quot;some_other_property&quot;</span><span class="p">:</span> <span class="s2">&quot;Some other value&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also store the Jinja templates on disk and reference them in the same way via filenames instead of embedding
the templates in config or the entities themselves.</p>
</div>
</div>
<div class="section" id="solr-sink">
<span id="id150"></span><h3>Solr sink<a class="headerlink" href="#solr-sink" title="Permalink to this headline">¶</a></h3>
<p>The Solr sink writes the entities it is given to a Solr index.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_id</span></code> property is used as the document id. All other properties,
except the ones at the root level matching <code class="docutils literal notranslate"><span class="pre">_*</span></code> or <code class="docutils literal notranslate"><span class="pre">$*</span></code> are added
to the document. Notice the limitations described in the next section.</p>
<p>This sink supports <a class="reference internal" href="#pipe-batching"><span class="std std-ref">batching</span></a>.</p>
<div class="section" id="limitations">
<h4>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h4>
<p>Due to the limited document structure allowed by Solr, there are some
restrictions on the form of the entities accepted by the sink:</p>
<ul class="simple">
<li><p>Only “flat” entities are allowed - any child entities must be removed or merged into the root entity before being sent to the sink.</p></li>
<li><p>Lists properties are supported, but they can only contain a single type of property.</p></li>
<li><p>Lists cannot contain other lists or entities.</p></li>
</ul>
<p>If the document does not adhere to these rules, then an error is raised.</p>
</div>
<div class="section" id="id151">
<h4>Prototype<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;solr&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;solr-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;commit_within&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;commit_at_end&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id152">
<h4>Properties<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#solr-system"><span class="std std-ref">Solr system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">commit_within</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of seconds to wait until committing, i.e. invalidating the Solr
caches. This is used to set up commit batching. The default is null
(i.e. not set) which means that a commit will be issued at the end of the
sync if <code class="docutils literal notranslate"><span class="pre">commit_at_end</span></code> is true. Do not set this too low as it will cause
a lot of overhead on the Solr server.</p></td>
<td><p>null</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">commit_at_end</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If true, then the sink will issue a commit at the end of the sync. In general
it is best to rely on <code class="docutils literal notranslate"><span class="pre">commit_within</span></code> instead or just let the Solr server
itself decide the commit interval.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="elasticsearch-sink">
<span id="id153"></span><h3>Elasticsearch sink<a class="headerlink" href="#elasticsearch-sink" title="Permalink to this headline">¶</a></h3>
<p>The Elasticsearch sink writes the entities it is given to an
Elasticsearch server/cluster.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_id</span></code> property is used as the document id. All other properties,
except the ones at the root level matching <code class="docutils literal notranslate"><span class="pre">_*</span></code> or <code class="docutils literal notranslate"><span class="pre">$*</span></code> are added
to the document.</p>
<p>If the input entity has the property <code class="docutils literal notranslate"><span class="pre">$index</span></code> then this is the index
into which the document is written. The <code class="docutils literal notranslate"><span class="pre">$type</span></code> property is used as
the document type. Note that default values for <code class="docutils literal notranslate"><span class="pre">$index</span></code> and
<code class="docutils literal notranslate"><span class="pre">$type</span></code> can be specified on the <a class="reference internal" href="#elasticsearch-system"><span class="std std-ref">Elasticsearch system</span></a>.</p>
<p>This sink supports <a class="reference internal" href="#pipe-batching"><span class="std std-ref">batching</span></a>.</p>
<div class="section" id="id154">
<h4>Prototype<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;elasticsearch&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;elasticsearch-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;default_index&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;default_type&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id155">
<h4>Properties<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#elasticsearch-system"><span class="std std-ref">Elasticsearch system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">default_index</span></code></p></td>
<td><p>String</p></td>
<td><p>The index to insert the documents into. This the default value for
the <code class="docutils literal notranslate"><span class="pre">$index</span></code> property on the indexable entities. Note that this is
overridable on each entity.</p></td>
<td><p>null</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">default_type</span></code></p></td>
<td><p>String</p></td>
<td><p>The document type to use for the entities. This the default value for
the <code class="docutils literal notranslate"><span class="pre">$type</span></code> property on the indexable entities. Note that this is
overridable on each entity.</p></td>
<td><p>null</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="sparql-sink">
<span id="id156"></span><h3>SPARQL sink<a class="headerlink" href="#sparql-sink" title="Permalink to this headline">¶</a></h3>
<p>The SPARQL sink converts entities to RDF statements and writes them to a graph in a triplestore via a SPARQL compatible
endpoint.</p>
<div class="section" id="id157">
<h4>Prototype<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-url-system&quot;</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;update_url&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql-update&quot;</span><span class="p">,</span>
    <span class="s2">&quot;graph&quot;</span><span class="p">:</span> <span class="s2">&quot;http://uri.of/graph&quot;</span><span class="p">,</span>
    <span class="s2">&quot;do_diff&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;write_sdshare_updated&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id158">
<h4>Properties<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>The URL part of the SPARQL endpoint to use, see the <code class="docutils literal notranslate"><span class="pre">url_pattern</span></code> property of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a>
for how this is substituted into the System URL.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">update_url</span></code></p></td>
<td><p>String</p></td>
<td><p>The URL part of the SPARQL endpoint to use for updates if it is different from <code class="docutils literal notranslate"><span class="pre">url</span></code>. See the <code class="docutils literal notranslate"><span class="pre">url_pattern</span></code>
property of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> for how this is substituted into the System URL.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of a <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a> component to use. Note that only <code class="docutils literal notranslate"><span class="pre">basic</span></code> and <code class="docutils literal notranslate"><span class="pre">digest</span></code>
<code class="docutils literal notranslate"><span class="pre">authentication</span></code> schemes are supported by the SPARQL sink.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">graph</span></code></p></td>
<td><p>String</p></td>
<td><p>A full URI for the graph to write the entities into.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">do_diff</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Tell the sink to compute the difference between the target graph RDF statements and the RDF statements generated
by converting the input entity to RDF. This ensures the minimum number of write operations to the endpoint.
This does however come with the cost of (many) more read operations. Use this option if your entities are large
and/or there is large amounts of changes flowing through the sink on average.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">write_sdshare_updated</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Tell the sink to automatically insert SDShare updated predicates with the generated RDF statements written to
the endpoint. Note that the local UTC time is currently used for this timestamp.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id159">
<h4>Example configuration<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://virtuoso.example.com:8890/sparql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;graph&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.com/fylketest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;do_diff&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s2">&quot;write_sdshare_updated&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sql-sink">
<span id="id160"></span><h3>SQL sink<a class="headerlink" href="#sql-sink" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/SQL">SQL</a>  sink writes entities to a
<a class="reference external" href="https://en.wikipedia.org/wiki/Relational_database">relational database</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Table_(database)">table</a>.
You will have to configure and provide a <a class="reference internal" href="#sql-system"><span class="std std-ref">SQL system</span></a> id in the <code class="docutils literal notranslate"><span class="pre">system</span></code> property.</p>
<p>The expected form of an entity to be written to the sink is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;columnname1&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
    <span class="s2">&quot;columnname2&quot;</span><span class="p">:</span> <span class="n">another_value</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This sink supports <a class="reference internal" href="#pipe-batching"><span class="std std-ref">batching</span></a>.</p>
<div class="section" id="id162">
<h4>Prototype<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-sql-system&quot;</span>
    <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="s2">&quot;key&quot;</span><span class="p">,</span><span class="s2">&quot;names&quot;</span><span class="p">],</span>
    <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;name-of-table&quot;</span><span class="p">,</span>
    <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;default-schema-name-if-included&quot;</span><span class="p">,</span>
    <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">&quot;use_bulk_operations&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;keep_failed_bulk_operation_files&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;bulk_operation_timeout&quot;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="s2">&quot;bulk_operation_queue_size&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;schema_definition&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;skip_identity_columns&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;create_table_if_missing&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;name-of-collumn-to-add-timestamp-into&quot;</span><span class="p">,</span>
    <span class="s2">&quot;truncate_table_on_first_run&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id163">
<h4>Properties<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#sql-system"><span class="std std-ref">SQL system</span></a> component to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">table</span></code></p></td>
<td><p>String</p></td>
<td><p>Refers to a fully qualified table name in the database system, not including schema, which if needed must be
set separately.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">primary_key</span></code></p></td>
<td><p>List&lt;String&gt; or String</p></td>
<td><p>The value of this property can be a single string with the name of the column
that contains the <code class="docutils literal notranslate"><span class="pre">primary</span> <span class="pre">key</span></code> (PK) of the table, or a list of strings
if it is a compound primary key. If the property is not set the component will
attempt to use table metadata reflection to deduce the PK to use.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schema</span></code></p></td>
<td><p>String</p></td>
<td><p>If a specific schema within a database is needed, you must provide its name in this property.
Do <em>not</em> use schema names in the <code class="docutils literal notranslate"><span class="pre">table</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></p></td>
<td><p>String</p></td>
<td><p>Defines a name of a property (column) that is added to each entity, containg a timestamp in UTC.
If the corresponding column exist in the target table, the value will be written to that column.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sesam-timestamp</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">use_bulk_operations</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Some database types supports bulk upload of data. Bulk uploading is typically much faster than doing
updates with <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> and <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> SQL statements, but may not be feasible in all cases (some bulk
operations requires Sesam to have extra permissions in the database, for instance). Only some
sql systems supports bulk operations, see <a class="reference internal" href="#sql-system"><span class="std std-ref">the documentation of the SQL systems</span></a> for
details.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code> for now; will be changed to <code class="docutils literal notranslate"><span class="pre">true</span></code> at some future date.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keep_failed_bulk_operation_files</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Bulk operations typically involve writing some temporary files to disk. These files are normally
deleted when the bulk operation is finished, but while debugging a problem it can be useful to
keep the files when the bulk operation failes. This option can be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to keep all the
files that are relevant for the failing bulk operation. You have to have access to the server’s
harddisk in order to see the files (the location of the bulk-files is written in the node’s log-file).
Note: The files are written to a temporary folder, and are deleted the next time the node restarts.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bulk_operation_timeout</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of seconds to wait for a bulk operation to finish. This is only applicable if both
<code class="docutils literal notranslate"><span class="pre">truncate_table_on_first_run</span></code> and <code class="docutils literal notranslate"><span class="pre">use_bulk_operations</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> (and the SQL system supports
bulk operations). This value should be set to the maximum number of seconds a bulk operation is expected to
use for a single batch. It will typically depend on both the size of the batches, the size of the data and the
performance of the receiving RDBM system.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">600</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bulk_operation_queue_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of bulk operation batches to queue for upload at any given time. This shouldn’t normally
be changed from the default. Higher numbers will consume more disk space.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bulk_operation_buffer_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of bytes of the temporary bulk file to be held in memory before flushing it to disk.
You should not normally change this value. A higher value will consume more memory. If it set too high, it might
result in the system running out of memory. If it is set too low, it might slow down the writing of the temporary bulk
file resulting in poor performance. The default is 50 Mb.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50000000</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of rows to insert into the database table in one operation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1000</span></code> or <code class="docutils literal notranslate"><span class="pre">use_bulk_operations</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">100</span></code> otherwise.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">truncate_table_on_first_run</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that indicates that the target table should be truncated/emptied the first time a pump runs
(for example on the first run, or when its offset has been set to zero manually). Please note that
the truncating operation is executed in a separate transaction, so if any subsequent inserts should fail
the truncating operation will not be rolled back.</p>
<p>Note: combining this option with <code class="docutils literal notranslate"><span class="pre">use_bulk_operations</span></code> enables the sink to do a direct bulk copy operation to the
target table on first run, which is much faster than using a temporary table which is the default method.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">create_table_if_missing</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that indicates that the target table should be created if it is missing the first time a pump runs
(for example on the first run, or when its offset has been set to zero manually). If this property is <code class="docutils literal notranslate"><span class="pre">true</span></code>
then a proper schema definition must be supplied in the <code class="docutils literal notranslate"><span class="pre">schema_definition</span></code> property. Note that this property
requires that the user defined in the <a class="reference internal" href="#sql-system"><span class="std std-ref">SQL system</span></a> have the necessary privileges to create and drop
tables in the target database/schema.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recreate_table_on_first_run</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If combined with <code class="docutils literal notranslate"><span class="pre">create_table_if_missing</span></code> this property will make the sink drop and then recreate the table
on the first run, or if the pipe is reset (based on the information in <code class="docutils literal notranslate"><span class="pre">schema_definition</span></code> which must also be
provided).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">schema_definition</span></code></p></td>
<td><p>List&lt;Object&gt;</p></td>
<td><p>A list of column definitions that guides the sink when creating a new table when the <code class="docutils literal notranslate"><span class="pre">create_table_if_missing</span></code>
is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. See <a class="reference internal" href="#id165"><span class="std std-ref">SQL sink schema definition format</span></a> for more
details on how this element works.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">skip_identity_columns</span></code> (experimental)</p></td>
<td><p>Boolean</p></td>
<td><p>If this flag is set, the sink will skip any identity columns it can detect via table metadata reflection. Note
that you still need to define one or more non-identity unique column(s) in the <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> property (sesam
does not support automatically generated primary keys if there are no other unique combination of column values
for a row).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even" id="remove-pk-char-sql"><td><p><code class="docutils literal notranslate"><span class="pre">remove_pk_char_trailing_spaces</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set, removes trailing spaces from primary key values if they are of type <code class="docutils literal notranslate"><span class="pre">char</span></code> or <code class="docutils literal notranslate"><span class="pre">nchar</span></code>. SQL automatically pads strings with whitespace if the string is shorter than the predetermined length, but trailing spaces are disregarded when comparing values. This setting, when <code class="docutils literal notranslate"><span class="pre">true</span></code>, ensures that the sink also disregards trailing spaces. If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, you can run into issues with updating existing rows.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">whitelist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>Deprecated. The names of the properties (columns) to include when inserting rows into the target table. If there is a
<code class="docutils literal notranslate"><span class="pre">blacklist</span></code> also specified, the whitelist will be filtered against the contents of the blacklist.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">blacklist</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>Deprecated. The names of the properties (columns) to exclude from inserts into the target table. If you are looking
for a way to filter out identity columns, see the <code class="docutils literal notranslate"><span class="pre">skip_identity_columns</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id164">
<h4>Example configuration<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;my-sql-system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;customers&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sql-sink-schema-definition-format">
<h4>SQL sink schema definition format<a class="headerlink" href="#sql-sink-schema-definition-format" title="Permalink to this headline">¶</a></h4>
<p id="id165">The schema definition format consists of a list of objects for each property that exists in the input entities. These
objects are in essence column definitions and correspond directly to columns in the target table. The initial schema
definition can be generated from analysing the entities produced by the pipe the sink belongs to by using the API or
in the management studio. After being generated it can then be manually edited or augmented.</p>
<p>If the entities in the source dataset changes shape, or you change the shape of the entities produced by the pipe
by adding (or editing existing) DTL transforms attached to it, you may need to regenerate (or manually update) the
schema definition accordingly.</p>
<p>If the schema definition does not match the shape or value ranges of the entities that the sink is attempting to
insert (or update) in the resulting table, the sink will generate run time errors in the pump execution log.</p>
<p>Each object is on the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source_property&quot;</span><span class="p">:</span> <span class="s2">&quot;name_of_property&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name_of_column&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string|integer|decimal|float|binary|datetime|date|time|uuid|boolean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max_size|max_value&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="s2">&quot;min_size|min_value&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="s2">&quot;precision&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;allow_null&quot;</span><span class="p">:</span> <span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;primary_key&quot;</span><span class="p">:</span> <span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;default-value&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> property must correspond to a column in the target table and the <code class="docutils literal notranslate"><span class="pre">source_property</span></code> is the corresponding
property in the entity. In the case of the <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code> and/or <code class="docutils literal notranslate"><span class="pre">allow_null</span></code> set to <code class="docutils literal notranslate"><span class="pre">false</span></code>,
the property must exist in all entities. Note that at least one column definition in the schema definition list must
have <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. If you edit the <code class="docutils literal notranslate"><span class="pre">name</span></code> property, you must take care that it is an exact,
case-sentitive match with the definiton in the schema for the table.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> property is automatically mapped to the appropriate target RDBMS column type, based on the information
in the <code class="docutils literal notranslate"><span class="pre">max_size</span></code>/<code class="docutils literal notranslate"><span class="pre">max_value</span></code> and <code class="docutils literal notranslate"><span class="pre">min_size</span></code>/<code class="docutils literal notranslate"><span class="pre">min_value</span></code> properties. For example, an <code class="docutils literal notranslate"><span class="pre">integer</span></code> type may
translate to a <code class="docutils literal notranslate"><span class="pre">bigint</span></code> if the value range is outside +-2^31 (i.e larger than 32 bits) or a <code class="docutils literal notranslate"><span class="pre">tinyint</span></code> if it fits within
a unsigned byte range (0..255). The translation table for the currently supported systems is listed below.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">index</span></code> property for a column definition is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the table creation will add a default type
of index to the column for the particular target RDBMS system.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">precision</span></code> and <code class="docutils literal notranslate"><span class="pre">scale</span></code> properties are valid only for <code class="docutils literal notranslate"><span class="pre">decimal</span></code> type columns and define the total number
of digits and the fractional digits respectively. I.e. the decimal number “10.3” would have a <code class="docutils literal notranslate"><span class="pre">precision</span></code> of “3”
and an <code class="docutils literal notranslate"><span class="pre">scale</span></code> of “1”.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">default</span></code> property contains what value to use if the property is not present in the entity. If a
default value for a particular column has been set in the table schema, this value should match the schema value.</p>
<p>Translation table for the <a class="reference internal" href="#mssql-sqlserver-system"><span class="std std-ref">Microsoft SQL Server</span></a> and <a class="reference internal" href="#mssql-system"><span class="std std-ref">Legacy Microsoft SQL server</span></a>:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Range/size</p></th>
<th class="head"><p>Column type</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>&lt;= 8000</p></td>
<td><p>nvarchar(size)</p></td>
<td><p>Unicode</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>&gt; 8000</p></td>
<td><p>nvarchar(MAX)</p></td>
<td><p>Unicode</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">binary</span></code></p></td>
<td><p>&lt;= 8000</p></td>
<td><p>varbinary(size)</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">binary</span></code></p></td>
<td><p>&gt; 8000</p></td>
<td><p>varbinary(MAX)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>-9223372036854775808 - 9223372036854775808</p></td>
<td><p>integer</p></td>
<td><p>64 bit/8 bytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>-2147483648 - 2147483647</p></td>
<td><p>int</p></td>
<td><p>32 bit/4 bytes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>-32768 - 32768</p></td>
<td><p>smallint</p></td>
<td><p>16 bit/1 word/2 bytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>0 - 255</p></td>
<td><p>tinyint</p></td>
<td><p>8 bit/1 byte</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">decimal</span></code></p></td>
<td><p>Any</p></td>
<td><p>decimal(precision,scale)</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>53 bit precision</p></td>
<td><p>float</p></td>
<td><p>Double precision IEEE-754 number</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">datetime</span></code></p></td>
<td><p>0001-01-01T00:00:00.000000Z - 9999-12-31T23:59:59.999999Z</p></td>
<td><p>datetime2</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">date</span></code></p></td>
<td><p>0001-01-01 - 9999-12-31</p></td>
<td><p>date</p></td>
<td><p>Coerced from <code class="docutils literal notranslate"><span class="pre">datetime</span></code> values or pre-formatted strings</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p></td>
<td><p>00:00:00.000000 - 23:59:59.999999</p></td>
<td><p>time</p></td>
<td><p>Coerced from <code class="docutils literal notranslate"><span class="pre">datetime</span></code> values or pre-formatted strings</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p>true | false</p></td>
<td><p>bit</p></td>
<td><p>Coerced to <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uuid</span></code></p></td>
<td><p>Any valid UUID</p></td>
<td><p>uniqueidentifier</p></td>
<td><p>Preformatted strings on the format <code class="docutils literal notranslate"><span class="pre">xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</span></code> can also be used</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="email-message-sink">
<span id="mail-sink"></span><h3>Email Message sink<a class="headerlink" href="#email-message-sink" title="Permalink to this headline">¶</a></h3>
<p>The mail message sink is capable of sending mail messages based on the entities it receives. The message to send can be
constructed either by inline templates or from templates read from disk. These templates are assumed to be <code class="docutils literal notranslate"><span class="pre">Jinja</span>
<span class="pre">templates</span></code> (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) with the entities properties available to the templating context. The template file
name can either be embedded in the configuration or in the input entity. The mail server settings have to
be registered in a <a class="reference internal" href="#smtp-system"><span class="std std-ref">SMTP system</span></a> component in advance and its <code class="docutils literal notranslate"><span class="pre">_id</span></code> put in the <code class="docutils literal notranslate"><span class="pre">system</span></code>
property of the sink.</p>
<div class="section" id="id166">
<h4>Prototype<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mail&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;smtp-system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body_template&quot;</span><span class="p">:</span> <span class="s2">&quot;static jinja template as a string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body_template_property&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-property-to-get-as-a-body-template&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text_body_template&quot;</span><span class="p">:</span> <span class="s2">&quot;static text only jinja template as a string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text_body_template_property&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-property-to-get-as-a-text-body-template&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subject_template&quot;</span><span class="p">:</span> <span class="s2">&quot;static jinja template as a string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subject_template_property&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-property-to-get-as-a-subject-template&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recipients&quot;</span><span class="p">:</span> <span class="s2">&quot;static,comma,separated,list,of,email,addresses&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recipients_property&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-property-to-get-recipients-from&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mail_from&quot;</span><span class="p">:</span> <span class="s2">&quot;static@email.address&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id167">
<h4>Properties<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h4>
<p>The configuration must contain at most one of <code class="docutils literal notranslate"><span class="pre">body_template</span></code> or <code class="docutils literal notranslate"><span class="pre">body_template_property</span></code>. The same applies to
<code class="docutils literal notranslate"><span class="pre">subject_template</span></code> and <code class="docutils literal notranslate"><span class="pre">subject_template_property</span></code>.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#smtp-system"><span class="std std-ref">SMTP system</span></a> to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">body_template</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code> to use for constructing messages. The template will have access to all entity properties by name.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">body_template_property</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">id</span></code> of a property of the incoming entity to use for looking up the <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code>
(i.e for inlining the templates in the entities). It should not be used at the same time as <code class="docutils literal notranslate"><span class="pre">body_template</span></code>.</p></td>
<td><p>“body_template”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">subject_template</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code> to use for constructing subjects for the email messages. The template
will have access to all entity properties by name</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">subject_template_property</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">id</span></code> of a property of the incoming entity to use for looking up the <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code>
(i.e for inlining the templates in the entities). It should not be used at the same time as <code class="docutils literal notranslate"><span class="pre">subject_template</span></code>.</p></td>
<td><p>“subject_template”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">text_body_template</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code> to use for constructing plain-text messages. The template will have access to all entity properties by name.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text_body_template_property</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a <code class="docutils literal notranslate"><span class="pre">id</span></code> of a property of the incoming entity to use for looking up the <code class="docutils literal notranslate"><span class="pre">Jinja</span> <span class="pre">template</span></code>
(i.e for inlining the templates in the entities) used to construct plain text messages. It should not be used at the same time as <code class="docutils literal notranslate"><span class="pre">text_body_template</span></code></p></td>
<td><p>“text_body_template”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recipients</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain a comma-separated list of email addresses to send the message constructed to. If this is not
inlined in the entities via <code class="docutils literal notranslate"><span class="pre">recipients_property</span></code> (see below) this property is mandatory.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recipients_property</span></code></p></td>
<td><p>String</p></td>
<td><p>Should contain the id of the property to look up the recpients from the entity itself (i.e for inlining the
recpients). If <code class="docutils literal notranslate"><span class="pre">recipients</span></code> (see abowe) is not specified, this property is mandatory and the propery
referenced by it must exists and be valid for all entities.</p></td>
<td><p>“recipients”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mail_from</span></code></p></td>
<td><p>String</p></td>
<td><p>An email address to use as the sender of all messages</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unhandled_template_variable_replacement</span></code></p></td>
<td><p>String</p></td>
<td><p>Specifies how unhandled variables in the templates are handled. debug: the ‘{{variable_name}}’-string is kept.
empty_string: {{variable_name}} is replaced with an empty string. strict: an error is raised.
The default is ‘debug’.</p></td>
<td><p>“debug”</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id168">
<h4>Example configuration<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mail&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;our-smtp-server&quot;</span><span class="p">,</span>
        <span class="s2">&quot;body_template&quot;</span><span class="p">:</span> <span class="s2">&quot;Mail message body: {{ message_prop_id }}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject_template&quot;</span><span class="p">:</span> <span class="s2">&quot;Subject: {{ subject_prop_id }}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;recipients&quot;</span><span class="p">:</span> <span class="s2">&quot;foo@bar.com,info@example.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mail_from&quot;</span><span class="p">:</span> <span class="s2">&quot;all@of.us&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the above example the entities sent to the sink should have at least the properties <code class="docutils literal notranslate"><span class="pre">subject_prop_id</span></code> and <code class="docutils literal notranslate"><span class="pre">message_prop_id</span></code>, i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;message_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message_prop_id&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the message to send&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subject_prop_id&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the subject of the message to send&quot;</span><span class="p">,</span>
    <span class="s2">&quot;some_other_property&quot;</span><span class="p">:</span> <span class="s2">&quot;Some other value&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="a-note-on-multi-part-messages">
<h4>A note on multi-part messages<a class="headerlink" href="#a-note-on-multi-part-messages" title="Permalink to this headline">¶</a></h4>
<p>To send multi-part email messages containing both a HTML and a plain-text version, you should provide templates for both
<code class="docutils literal notranslate"><span class="pre">body_template</span></code> (or <code class="docutils literal notranslate"><span class="pre">body_template_property</span></code>) and <code class="docutils literal notranslate"><span class="pre">text_body_template</span></code> (or <code class="docutils literal notranslate"><span class="pre">text_body_template_property</span></code>).
The former should then contain your HTML message and the latter your plain-text version. If you omit the <code class="docutils literal notranslate"><span class="pre">text_*</span></code>
properties and the body template contains HTML, the sink will attempt to extract a text-only version of the HTML
on a best-effort basis; i.e. this might not preserve the information contained in the HTML in the desired way.</p>
</div>
</div>
<div class="section" id="null-sink">
<span id="id169"></span><h3>Null sink<a class="headerlink" href="#null-sink" title="Permalink to this headline">¶</a></h3>
<p>The null sink is the equivalent of the empty data source; it will discard any entities written to it and do nothing (it
never raises an error):</p>
<div class="section" id="id170">
<h4>Prototype<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;null&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id171">
<h4>Example configuration<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h4>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;null&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="http-endpoint-sink">
<span id="id172"></span><h3>HTTP endpoint sink<a class="headerlink" href="#http-endpoint-sink" title="Permalink to this headline">¶</a></h3>
<p>This is a special data sink that registers an HTTP publisher endpoint
that one can get entities from.</p>
<p>A pipe that references the <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">endpoint</span></code> sink will not pump any
entities, in practice this means that a pump is not configured for the
pipe; the only way for entities to flow through the pipe is by
retrieving them from the HTTP endpoint.</p>
<p>It exposes these URLs:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>URL</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/entities</span></code></p></td>
<td><p>JSON entities endpoint</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/entities/some_filename.json</span></code></p></td>
<td><p>JSON entities endpoint - filename in URL variant</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/sdshare-collection</span></code></p></td>
<td><p>SDShare collections feed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/sdshare-fragments</span></code></p></td>
<td><p>SDShare fragments feed</p></td>
</tr>
</tbody>
</table>
<p>The serialisation of entities as JSON is described in more detail
<a class="reference internal" href="entitymodel.html"><span class="doc">here</span></a>. This endpoint is compatible with <a class="reference internal" href="#json-source"><span class="std std-ref">The
JSON source</span></a>.</p>
<p>Note that any URL parameters given to these endpoints are bound to a DTL variable named <code class="docutils literal notranslate"><span class="pre">_B</span></code>
and is available to any DTL transform on the pipe in which the endpoint sink is a part, see
<a class="reference internal" href="DTLReferenceGuide.html#variables"><span class="std std-ref">DTL Variables</span></a> for more details.</p>
<p>The SDShare protocol is described <a class="reference external" href="http://www.sdshare.org/spec/sdshare-v1.0.html">here</a>.</p>
<p>The exposed URLs may support additional parameters such as <code class="docutils literal notranslate"><span class="pre">since</span></code> and <code class="docutils literal notranslate"><span class="pre">limit</span></code> - see
the <a class="reference external" href="./api.html#get--publishers-pipe_id-sdshare-collection">API reference</a> for the full details.</p>
<div class="section" id="id173">
<h4>Prototype<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http_endpoint&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id174">
<h4>Properties<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>String</p></td>
<td><p>This property provides a hint to HTTP clients on what filename to use when downloading data (via the
<code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header property). Note that this property is not entirely standardized yet, so to be
compatible with most HTTP clients, the filename should be ASCII characters only. For the same reason, quotes or
backward or forward slashes should be avoided. If this property is not set, the contents will be served inline.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">content_disposition</span></code></p></td>
<td><p>String</p></td>
<td><p>This property provides a hint to HTTP clients how to render the file data. The valid values are <code class="docutils literal notranslate"><span class="pre">attachment</span></code>
and <code class="docutils literal notranslate"><span class="pre">inline</span></code>. It is used in the <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header and the behaviour is client specific.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">attachment</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id175">
<h4>Example configuration<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h4>
<p>The pipe configuration given below will expose the <code class="docutils literal notranslate"><span class="pre">my-entities</span></code>
publisher endpoint and read the entities from the <code class="docutils literal notranslate"><span class="pre">my-entities</span></code>
dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-entities&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My published entities endpoint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http_endpoint&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="csv-endpoint-sink">
<span id="id176"></span><h3>CSV endpoint sink<a class="headerlink" href="#csv-endpoint-sink" title="Permalink to this headline">¶</a></h3>
<p>This is a data sink that registers an HTTP publisher endpoint that one can get entities in
<a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV format</a> from.</p>
<p>A pipe that references the <code class="docutils literal notranslate"><span class="pre">CSV</span> <span class="pre">endpoint</span></code> sink will not pump any
entities. In practice this means that a pump is not configured for the
pipe; the only way for entities to flow through the pipe is by
retrieving them from the CSV endpoint using a client that supports the HTTP protocol.</p>
<p>It exposes the URLs:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>URL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/csv</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/csv/some_filename.csv</span></code></p></td>
</tr>
</tbody>
</table>
<p>The exposed URL may support additional parameters such as <code class="docutils literal notranslate"><span class="pre">since</span></code> and <code class="docutils literal notranslate"><span class="pre">limit</span></code> - see
the <a class="reference external" href="./api.html#get--publishers-pipe_id-csv">API reference</a> for the full details.</p>
<p>Note that you can optionally specify the filename to use in the <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header of the HTTP response as
the last path element of the URL.</p>
<div class="section" id="id178">
<h4>Prototype<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csv_endpoint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="s2">&quot;use&quot;</span><span class="p">,</span><span class="s2">&quot;as&quot;</span><span class="p">,</span><span class="s2">&quot;columns&quot;</span><span class="p">],</span>
    <span class="s2">&quot;quoting&quot;</span><span class="p">:</span> <span class="s2">&quot;all|minimal|non-numeric|none&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delimiter&quot;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span>
    <span class="s2">&quot;doublequote&quot;</span><span class="p">:</span> <span class="n">true</span>
    <span class="s2">&quot;include_header&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;escapechar&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;lineterminator&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;quotechar&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="s2">&quot;encode_error_strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;replacement-strategy-to-use&quot;</span><span class="p">,</span>
    <span class="s2">&quot;skip-deleted-entities&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;my_data.csv&quot;</span><span class="p">,</span>
    <span class="s2">&quot;content_disposition&quot;</span><span class="p">:</span> <span class="s2">&quot;attachment&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id179">
<h4>Properties<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>A list of string keys to look up in the entity to construct the CSV columns. If <code class="docutils literal notranslate"><span class="pre">include_header</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">true</span></code> (which is the default), this list will also be included as the first line of the CSV file.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">quoting</span></code></p></td>
<td><p>Enum&lt;String&gt;</p></td>
<td><p>A string from the set of “all”, “minimal”, “non-numeric” and “none” that describes how the fields of the CSV
file will be quoted. A value of “all” means all fields will be quoted, even if they don’t contain the <code class="docutils literal notranslate"><span class="pre">quotechar</span></code>
or <code class="docutils literal notranslate"><span class="pre">delimiter</span></code> characters. A value of “non-numeric” means all non-numeric values will be quoted. The “minimal”
setting (the default) means only fields with contents that need to be quoted will be quoted. Finally, the <code class="docutils literal notranslate"><span class="pre">none</span></code>
value means do not quote (note this can produce broken CSV files if there are values that have to be quoted).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;minimal&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delimiter</span></code></p></td>
<td><p>String</p></td>
<td><p>The character to use as field separator. It will also affect which fields will be quoted if the <code class="docutils literal notranslate"><span class="pre">quoting</span></code> setting
is set to <code class="docutils literal notranslate"><span class="pre">minimal&quot;</span></code> (which is the default). The default value is to use the comma (<code class="docutils literal notranslate"><span class="pre">&quot;,&quot;</span></code>) character.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;,&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">doublequote</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Controls how instances of <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> appearing inside a field should themselves be quoted. When set to
<code class="docutils literal notranslate"><span class="pre">true</span></code> (the default), the character is doubled (repeated). When set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the <code class="docutils literal notranslate"><span class="pre">escapechar</span></code> property
setting is used as a prefix to the <code class="docutils literal notranslate"><span class="pre">quotechar</span></code>. If <code class="docutils literal notranslate"><span class="pre">doublequoting</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> but <code class="docutils literal notranslate"><span class="pre">escapechar</span></code> is
not set, the backward slash character (<code class="docutils literal notranslate"><span class="pre">\</span></code>) is used as prefix.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">include_header</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Controls if the <code class="docutils literal notranslate"><span class="pre">columns</span></code> property should be included as the header of the CSV file produced.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">escapechar</span></code></p></td>
<td><p>String</p></td>
<td><p>A one-character string used by the sink to escape <code class="docutils literal notranslate"><span class="pre">delimiter</span></code> characters in fields if <code class="docutils literal notranslate"><span class="pre">quoting</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">none</span></code> and the <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> if <code class="docutils literal notranslate"><span class="pre">doublequote</span></code> is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>. The default is <code class="docutils literal notranslate"><span class="pre">null</span></code> which disables
escaping (except if <code class="docutils literal notranslate"><span class="pre">doublequote</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, in which case the default is <code class="docutils literal notranslate"><span class="pre">\</span></code>).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lineterminator</span></code></p></td>
<td><p>String</p></td>
<td><p>A character sequence to use as the EOL marker in the CSV output. The default is carriage return plus linefeed
(<code class="docutils literal notranslate"><span class="pre">&quot;\r\n&quot;</span></code>).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;\r\n&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">quotechar</span></code></p></td>
<td><p>String</p></td>
<td><p>A one-character string that controls how to quote field values. The default is the double quote character. See
<code class="docutils literal notranslate"><span class="pre">doublequote</span></code> and <code class="docutils literal notranslate"><span class="pre">escapechar</span></code> for related settings.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;\&quot;&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">byte_order_mark</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> the sink will emit a UTF-8 byte order mark (BOM) to the start of the file/stream. I should only be
used in conjunction with a UTF-8 encoding.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">encoding</span></code></p></td>
<td><p>String</p></td>
<td><p>Which encoding to use when converting the output to string values. The default is <code class="docutils literal notranslate"><span class="pre">utf-8</span></code>. See
<a class="reference external" href="https://docs.python.org/3/library/codecs.html#codec-base-classes">section 7.2.3 on this page</a> for a list of
valid values.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;utf-8&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">encode_error_strategy</span></code></p></td>
<td><p>String enum</p></td>
<td><p>An enumeration of “ignore”, “replace”, “xmlcharrefreplace” and “backslashreplace” that tells the sink how to deal
with illegal characters in the output data when the <code class="docutils literal notranslate"><span class="pre">encoding</span></code> property is different than <code class="docutils literal notranslate"><span class="pre">utf-8</span></code>.
The default “backslashreplace” replaces the offending character(s) with backslash escaped unicode values
(i.e. the <code class="docutils literal notranslate"><span class="pre">&quot;ę&quot;</span></code> character would be replaced with <code class="docutils literal notranslate"><span class="pre">&quot;\u0119&quot;</span></code> if it’s illegal for the chosen encoding). The
“replace” strategy will use a special unicode “replacement character” for unicode encodings,
see <a class="reference external" href="https://en.wikipedia.org/wiki/Specials_%28Unicode_block%29">https://en.wikipedia.org/wiki/Specials_%28Unicode_block%29</a> for more details or simply the <code class="docutils literal notranslate"><span class="pre">&quot;?&quot;</span></code> character
if a non-unicode encoding. The “xmlcharrefreplace” replacement strategy uses numerical xml character values on
the form <code class="docutils literal notranslate"><span class="pre">&quot;&amp;#NNN;&quot;</span></code>. The “ignore” strategy is the simplest and just skips any illegal characters entirely.</p></td>
<td><p>“backslashreplace”</p></td>
<td></td>
</tr>
<tr class="row-odd" id="csv-endpoint-sink-param-skip-deleted-entities"><td><p><code class="docutils literal notranslate"><span class="pre">skip-deleted-entities</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This can be set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to make deleted entities appear in the CSV output. The default is that
deleted entities does not appear. If you set this to <code class="docutils literal notranslate"><span class="pre">true</span></code> you will also most likely want to include
the “_deleted” attribute in the <code class="docutils literal notranslate"><span class="pre">columns</span></code> list, so that rows that represents deleted entities can be
recognized. (If you need to rename or reformat the “_deleted” attribute you can do that by adding a
<a class="reference internal" href="#dtl-transform"><span class="std std-ref">DTL transform</span></a> to the pipe.)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>String</p></td>
<td><p>This property provides a hint to HTTP clients on what filename to use when downloading data (via the
<code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header property). Note that this property is not entirely standardized yet, so to be
compatible with most HTTP clients, the filename should be ASCII characters only. For the same reason, quotes or
backward or forward slashes should be avoided. If this property is not set, the contents will be served inline.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">content_disposition</span></code></p></td>
<td><p>String</p></td>
<td><p>This property provides a hint to HTTP clients how to render the file data. The valid values are <code class="docutils literal notranslate"><span class="pre">attachment</span></code>
and <code class="docutils literal notranslate"><span class="pre">inline</span></code>. It is used in the <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header and the behaviour is client specific.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;attachment&quot;</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id180">
<h4>Example configuration<a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h4>
<p>The pipe configuration given below will expose the <code class="docutils literal notranslate"><span class="pre">my-entities</span></code>
publisher endpoint and read the entities from the <code class="docutils literal notranslate"><span class="pre">my-entities</span></code>
dataset, picking the <code class="docutils literal notranslate"><span class="pre">_id</span></code>, <code class="docutils literal notranslate"><span class="pre">foo</span></code> and <code class="docutils literal notranslate"><span class="pre">bar</span></code> properties as columns in the CSV file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-entities&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My published csv endpoint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;csv_endpoint&quot;</span>
        <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;zoo&quot;</span><span class="p">],</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;my_data.csv&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The data will be available at <code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/my-entities/csv</span></code> (or alternatively
<code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/my-entities/csv/some_other_filename.csv</span></code>)</p>
</div>
</div>
<div class="section" id="xml-endpoint-sink">
<span id="id181"></span><h3>XML endpoint sink<a class="headerlink" href="#xml-endpoint-sink" title="Permalink to this headline">¶</a></h3>
<p>This is a data sink that registers an HTTP publisher endpoint
that one can get the entities in XML format from.</p>
<p>A pipe that references the <code class="docutils literal notranslate"><span class="pre">XML</span> <span class="pre">endpoint</span></code> sink will not pump any
entities; the only way for entities to flow through the pipe is by retrieving them from the endpoint using the HTTP protocol.</p>
<p>It exposes the URL:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>URL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/xml</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/mypipe/xml/some_filename.xml</span></code></p></td>
</tr>
</tbody>
</table>
<p>Note that the shape of the entities must conform to certain criteria, see the <a class="reference internal" href="#expected-xml-entity-shape"><span class="std std-ref">notes</span></a>
later in the section.</p>
<p>The exposed URL may support additional parameters such as <code class="docutils literal notranslate"><span class="pre">since</span></code> and <code class="docutils literal notranslate"><span class="pre">limit</span></code> - see
the <a class="reference external" href="./api.html#get--publishers-pipe_id-xml">API reference</a> for the full details.</p>
<p>Note that you can optionally specify the filename to use in the <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header of the HTTP response as
the last path element of the URL.</p>
<div class="section" id="id182">
<h4>Prototype<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;xml_endpoint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;wrapper&quot;</span><span class="p">:</span> <span class="s2">&quot;wrapper-tag&quot;</span><span class="p">,</span>
    <span class="s2">&quot;root-attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;xmlns&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns1&quot;</span><span class="p">,</span>
       <span class="s2">&quot;xmlsn:foo&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns2&quot;</span><span class="p">,</span>
       <span class="s2">&quot;xmlns:bar&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns3&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;include-xml-decl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;skip-deleted-entities&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;my_data.xml&quot;</span>
    <span class="s2">&quot;content_disposition&quot;</span><span class="p">:</span> <span class="s2">&quot;attachment&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id183">
<h4>Properties<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">wrapper</span></code></p></td>
<td><p>String</p></td>
<td><p>If included, the XML produced from all entities will wrapped in a single top level tag with the value
of this property (<code class="docutils literal notranslate"><span class="pre">&lt;wrapper-value&gt;..entity-tags..&lt;/wrapper-value&gt;</span></code>)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">root-attributes</span></code></p></td>
<td><p>Object</p></td>
<td><p>An object containing the attributes to include on the root element (i.e. on the <code class="docutils literal notranslate"><span class="pre">wrapper</span></code> tag if it is defined,
or on the tag defined on the first entity level). This is where you typically declare your namespaces, schema
and so on.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">include-xml-decl</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code> includes a default XML header: <code class="docutils literal notranslate"><span class="pre">&lt;?xml</span> <span class="pre">version=&quot;1.0&quot;</span> <span class="pre">encoding=&quot;UTF-8&quot;</span> <span class="pre">standalone=&quot;yes&quot;?&gt;</span></code></p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">skip-deleted-entities</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>This can be set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to make deleted entities appear in the XML output. The default is that
deleted entities does not appear.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">byte_order_mark</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> the sink will emit a UTF-8 byte order mark (BOM) to the start of the file/stream. I should only be
used in conjunction with a UTF-8 encoding.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>String</p></td>
<td><p>This property provides a hint to HTTP clients on what filename to use when downloading data (via the
<code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header property). Note that this property is not entirely standardized yet, so to be
compatible with most HTTP clients, the filename should be ASCII characters only. For the same reason, quotes or
backward or forward slashes should be avoided. If this property is not set, the contents will be served inline.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">content_disposition</span></code></p></td>
<td><p>String</p></td>
<td><p>This property provides a hint to HTTP clients how to render the file data. The valid values are <code class="docutils literal notranslate"><span class="pre">attachment</span></code>
and <code class="docutils literal notranslate"><span class="pre">inline</span></code>. It is used in the <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> header and the behaviour is client specific.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">attachment</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="expected-xml-entity-shape">
<span id="id184"></span><h4>Expected entity shape<a class="headerlink" href="#expected-xml-entity-shape" title="Permalink to this headline">¶</a></h4>
<p>The entities must be transformed into a particular form before being piped to the XML endpoint sink. The general form
expected is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Entity 1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;entity-1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&lt;foo:tag&gt;&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;child&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Child entity&quot;</span><span class="p">,</span>
      <span class="s2">&quot;&lt;section&gt;&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;&lt;from&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;&lt;to&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;999&quot;</span><span class="p">}</span>
      <span class="p">]</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There must be exactly one property starting with ‘&lt;’ and ending with ‘&gt;’ in an entity, although it can contain
child entities in as many levels as you want (also in lists).</p>
<p>All non-tag properties, except those beginning with a <code class="docutils literal notranslate"><span class="pre">_</span></code> letter will be included as attribute values on the tag
specified. A “tag”-property value can either be a single literal, a single object or a list of objects. Note that
any non-object items in lists are ignored (i.e. lists, literals and null values).</p>
<p>The property names must be valid XML attribute or tag names (<a class="reference external" href="https://en.wikipedia.org/wiki/QName">QNames</a>).
All literal values in tags or attributes will be <a class="reference external" href="https://www.liquid-technologies.com/XML/EscapingData.aspx">XML escaped</a>.</p>
</div>
<div class="section" id="id185">
<h4>Example configuration<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h4>
<p>The pipe configuration given below will expose the <code class="docutils literal notranslate"><span class="pre">my-entities</span></code> publisher endpoint and read the entities from the <code class="docutils literal notranslate"><span class="pre">my-entities</span></code>
dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;xml_endpoint&quot;</span><span class="p">,</span>
       <span class="s2">&quot;wrapper&quot;</span><span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span>
       <span class="s2">&quot;root-attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;xmlns&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/ns1&quot;</span><span class="p">,</span>
          <span class="s2">&quot;xmlsn:foo&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.example.org/foo&quot;</span><span class="p">,</span>
          <span class="s2">&quot;xmlns:xsi&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2000/10/XMLSchema-instance&quot;</span><span class="p">,</span>
          <span class="s2">&quot;xsi:schemaLocation&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.com/myschema.dtd&quot;</span><span class="p">,</span>
          <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
       <span class="p">},</span>
       <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;example.xml&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following output will be produced (here reformatted/pretty-printed):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">baz</span> <span class="n">xmlns</span><span class="o">=</span><span class="s2">&quot;http://www.example.org/ns1&quot;</span>
     <span class="n">xmlns</span><span class="p">:</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;http://www.example.org/foo&quot;</span>
     <span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="s2">&quot;http://www.w3.org/2000/10/XMLSchema-instance&quot;</span>
     <span class="n">xsi</span><span class="p">:</span><span class="n">schemaLocation</span><span class="o">=</span><span class="s2">&quot;http://example.com/myschema.dtd&quot;</span>
     <span class="n">zoo</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">foo</span><span class="p">:</span><span class="n">tag</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Entity 1&quot;</span>
           <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;entity-1&quot;</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">section</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;child&quot;</span>
              <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Child entity&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">from</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&lt;/</span><span class="n">from</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">to</span><span class="o">&gt;</span><span class="mi">999</span><span class="o">&lt;/</span><span class="n">to</span><span class="o">&gt;</span>
     <span class="o">&lt;/</span><span class="n">section</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">foo</span><span class="p">:</span><span class="n">tag</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">baz</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The XML document will be available at <code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/my-entities/xml</span></code>  (or alternatively
<code class="docutils literal notranslate"><span class="pre">http://localhost:9042/api/publishers/my-entities/xml/some_other_filename.xml</span></code>)</p>
</div>
</div>
<div class="section" id="rest-sink">
<span id="id186"></span><h3>REST sink<a class="headerlink" href="#rest-sink" title="Permalink to this headline">¶</a></h3>
<p>This is a data sink that can communicate with a REST service using HTTP requests.</p>
<p>Note that the shape of the entities piped to this sink must conform to certain criteria, see the
<a class="reference internal" href="#rest-expected-rest-entity-shape"><span class="std std-ref">notes</span></a> later in the section.</p>
<p>The pipe’s <a class="reference internal" href="#pipe-batching"><span class="std std-ref">batch_size</span></a> defaults to 1 when this sink-type is being used.</p>
<div class="section" id="id187">
<h4>Prototype<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;the-default-operation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rate_limiting_retries&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;rate_limiting_delay&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;the-default&quot;</span><span class="p">:</span> <span class="s2">&quot;properties&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;the-default&quot;</span><span class="p">:</span> <span class="s2">&quot;payload&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id188">
<h4>Properties<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">system</span></code></p></td>
<td><p>String</p></td>
<td><p>The id of the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> to use.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">operation</span></code></p></td>
<td><p>String</p></td>
<td><p>The default id of the operation to use if not present in the entity.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">properties</span></code></p></td>
<td><p>Object</p></td>
<td><p>The properties mapping to use if not present in the entity. Note that if both are present the properties in
the entity takes precendence.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">payload</span></code></p></td>
<td><p>Object, string or array</p></td>
<td><p>The default value to use as payload if not present in the entity.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rest-expected-rest-entity-shape">
<span id="id189"></span><h4>Expected entity shape<a class="headerlink" href="#rest-expected-rest-entity-shape" title="Permalink to this headline">¶</a></h4>
<p>The entities must be transformed into a particular form before being piped to the RESTsink. The general form
expected is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-named-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;some&gt;string-value&lt;/some&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">properties</span></code></p></td>
<td><p>Object</p></td>
<td><p>Any non-payload properties you need should go into the toplevel child entity <code class="docutils literal notranslate"><span class="pre">properties</span></code>. You can then address
these properties in the Jinja templates for operation <code class="docutils literal notranslate"><span class="pre">url</span></code> properties using the “{{ properties.key_name }}” syntax.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">operation</span></code></p></td>
<td><p>String</p></td>
<td><p>The contents of this property must refer to one of the named <code class="docutils literal notranslate"><span class="pre">operations</span></code> registered with the sink’s <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a>.
Note that if no default value is defined in the sink configuration, this property is required.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload</span></code></p></td>
<td><p>String or Object</p></td>
<td><p>The payload for the operation specified. It can be a string or an object. You can also omit it, in which case
the empty string will be used instead (for example for “DELETE” methods). All string payloads will be encoded
as UTF-8.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If set and the REST service returns a HTTP 429 error code, the request will be retried the number of times
indicated. The time between retries can be adjusted by setting <code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code> is set on either the sink or on the REST system, and a retry is triggered
the time to wait before retrying can be set by this value. If specified on both the system and sink,
the sink value takes precedence.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Example entities:</p>
<p>String as payload:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-named-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;some&gt;string-value&lt;/some&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Object as payload (set operation <code class="docutils literal notranslate"><span class="pre">payload-type</span></code> to “json”, “json-transit” or “form”  in the <a class="reference internal" href="#rest-system"><span class="std std-ref">REST system</span></a> the sink uses):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-other-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;property&quot;</span><span class="p">,</span>
      <span class="s2">&quot;child&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Multi-part form request if <code class="docutils literal notranslate"><span class="pre">payload-type</span></code> is “form”, otherwise use “json” or “json-transit” for this type of entity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;some-third-operation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;zoo&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id190">
<h4>Example configuration<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="#rest-system-example"><span class="std std-ref">REST system example</span></a> section for how to configure the operations we refer to in
these examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sink&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;rest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span> <span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;update-woman&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;F&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
          <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="s2">&quot;study-group-1&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example input entities:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;john&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;update-man&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;john&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
            <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;man id=</span><span class="se">\&quot;</span><span class="s2">john</span><span class="se">\&quot;</span><span class="s2">&gt;john&lt;/man&gt;&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;mary&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;mary&quot;</span><span class="p">,</span>
            <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
            <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="s2">&quot;study-group-2&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;mary&quot;</span><span class="p">,</span>
          <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">23</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;delete-man&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="s2">&quot;study-group-1&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="systems">
<span id="system-section"></span><h2>Systems<a class="headerlink" href="#systems" title="Permalink to this headline">¶</a></h2>
<p>A system component represents a computer system that can provide data entities. Its task is to provide common properties
and services that can be used by several data sources, such as connection pooling, authentication settings,
communication protocol settings and so on.</p>
<p>You can manage any secret property values you do not want to be exposed in the API (or in log files) by using the <a class="reference internal" href="security.html#secrets-manager"><span class="std std-ref">Secrets manager API</span></a>.</p>
<p>Note: as with pipe components, you are not allowed to use the forward slash character (“<code class="docutils literal notranslate"><span class="pre">/</span></code>”) in system id’s.</p>
<p>All systems share a number of common properties:</p>
<div class="section" id="id191">
<h3>Prototype<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;a_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:some-type-of-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;The Foo System&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a description of the system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a comment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;worker_threads&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;some_key&quot;</span><span class="p">:</span> <span class="s2">&quot;some_value&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id192">
<h3>Properties<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_id</span></code></p></td>
<td><p>String</p></td>
<td><p>A unique ID identifying the system. Any pipe sink or source that uses the system must have a corresponding
<code class="docutils literal notranslate"><span class="pre">system</span></code> property matching this value.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>String</p></td>
<td><p>A human readable name for this system</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable description of the component (optional).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable comment on the component (optional).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code></p></td>
<td><p>Object&lt;string, Object&gt;</p></td>
<td><p>A object providing metadata for the system. The keys are strings while the values can be any valid JSON object
(literals, lists or other objects).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">worker_threads</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of concurrent pipes running using this system</p></td>
<td><p>10</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sql-systems">
<span id="sql-system"></span><h3>SQL systems<a class="headerlink" href="#sql-systems" title="Permalink to this headline">¶</a></h3>
<p>The SQL system components represents a <a class="reference external" href="https://en.wikipedia.org/wiki/Relational_database_management_system">RDBMS</a>
and contains the necessary information to establish a connection to the RDBMS and manage these connections among the
sources that read from it. It can also provide source configurations for reading from all tables it can introspect
from the RDBMS <a class="reference external" href="https://en.wikipedia.org/wiki/Database_schema">schema</a>.</p>
<p>The common properties for all SQL systems are:</p>
<div class="section" id="id193">
<h4>Prototype<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sql_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:oracle|oracle_tns|mssql|mysql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;The Foo Database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;db-type-specific-property&quot;</span><span class="p">:</span><span class="s2">&quot;some-value&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;UTC&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;pool_timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s2">&quot;pool_max_overflow&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;pool_recycle&quot;</span><span class="p">:</span> <span class="mi">1800</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="column-type-mapping">
<h4>Column type mapping<a class="headerlink" href="#column-type-mapping" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="source-datatype-mapping.html#sql-types"><span class="std std-ref">supported column types</span></a> section for a overview of which column types are supported
for each RDBMS system and how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>.</p>
</div>
<div class="section" id="id194">
<h4>Properties<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timezone</span></code></p></td>
<td><p>String</p></td>
<td><p>The local timezone for the database server. It is used for any date(time) objects returned that doesn’t have any
timezone information. The default is the UTC timezone. All the official timezone names are supported,
i.e. “UTC”, “GMT”, “EST” etc. You can also use the indirect “Continent/City” format, for example “Europe/Oslo”
(see <a class="reference external" href="https://twiki.org/cgi-bin/xtra/tzdatepick.html">the complete list</a> for which cities are supported).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Non-timezone datetime values that are read from  a <code class="docutils literal notranslate"><span class="pre">sql</span></code>
source that uses the system will be shifted from the specified
timezone to UTC. Note that the <code class="docutils literal notranslate"><span class="pre">_updated</span></code> property will
not be shifted.</p>
<p>Also note that Sesam relies on tabulated historical data for daylight
saving information for the various timezones. This data gets corrected or
supplemented from time to time which means that the result of a timezone
conversion operation can change over time.</p>
</div>
</td>
<td><p>“UTC”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pool_size</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The target maximum number of concurrent connections to the database</p></td>
<td><p>10</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pool_timeout</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of seconds to wait before giving up on getting a connection from the connection pool.</p></td>
<td><p>30</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pool_max_overflow</span></code></p></td>
<td><p>Integer</p></td>
<td><p>How many connections over the <code class="docutils literal notranslate"><span class="pre">pool_size</span></code> are allowed before refusing to establish a incoming connection. This
means that the absolute hard limit of connections in a connection pool is <code class="docutils literal notranslate"><span class="pre">pool_size</span></code> + <code class="docutils literal notranslate"><span class="pre">pool_max_overflow</span></code>.</p></td>
<td><p>10</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pool_recycle</span></code></p></td>
<td><p>Integer</p></td>
<td><p>This configuration option prevents the pool from using a particular connection that has passed a certain age,
and is appropriate for database backends such as MySQL that automatically close connections that have been stale
after a particular period of time. Note that this doesn’t affect any open/active connections.</p></td>
<td><p>1800</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>The specific SQL systems available are:</p>
</div>
</div>
<div class="section" id="oracle-system">
<span id="id195"></span><h3>Oracle system<a class="headerlink" href="#oracle-system" title="Permalink to this headline">¶</a></h3>
<p>The Oracle SQL system represents a <a class="reference external" href="https://en.wikipedia.org/wiki/Oracle_Database">Oracle RDBMS</a> available on the network.
See the <a class="reference internal" href="source-datatype-mapping.html#oracle-types"><span class="std std-ref">supported column types</span></a> list for a overview of which Oracle column types are supported
and how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>.</p>
<div class="section" id="id196">
<h4>Prototype<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sql_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:oracle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;The Oracle Database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;fqdn-or-ip-address-here&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">1521</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;database-name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coerce_to_decimal&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id197">
<h4>Properties<a class="headerlink" href="#id197" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>Username to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>Password to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>String</p></td>
<td><p>Host name or IP address to the database server. Must be DNS resolvable if non-numeric.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Database IP port.</p></td>
<td><p>1521</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>String</p></td>
<td><p>Name/id of database to connect to.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">coerce_to_decimal</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <cite>true</cite>, it will force the use of the decimal type for all “numeric” types (i.e. numbers with precision
and scale information). What type the column data ends up as is not clearly defined by the current oracle
backend driver so in some cases it may yield a float value instead of a decimal value. This property should
always be set to <cite>true</cite> if your flows care if numeric values are floats or decimals. The default value is <cite>false</cite>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id198">
<h4>Example configuration<a class="headerlink" href="#id198" title="Permalink to this headline">¶</a></h4>
<p>Example Oracle configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;oracle_db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Oracle test database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:oracle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-secret)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;oracle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;XE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coerce_to_decimal&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oracle-tns-system">
<span id="id199"></span><h3>Oracle TNS system<a class="headerlink" href="#oracle-tns-system" title="Permalink to this headline">¶</a></h3>
<p>The Oracle SQL system represents a Oracle RDBMS configured using a <a class="reference external" href="http://www.orafaq.com/wiki/Tnsnames.ora">TNS name</a>
See the <a class="reference internal" href="source-datatype-mapping.html#oracle-types"><span class="std std-ref">supported column types</span></a> list for a overview of which Oracle column types are supported
and how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>.</p>
<div class="section" id="id200">
<h4>Prototype<a class="headerlink" href="#id200" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sql_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:oracle_tns&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;The Oracle Database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tns_name&quot;</span><span class="p">:</span> <span class="s2">&quot;tns-name-here&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coerce_to_decimal&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id201">
<h4>Properties<a class="headerlink" href="#id201" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>Username to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>Password to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tns_name</span></code></p></td>
<td><p>String</p></td>
<td><p>A fully qualified <a class="reference external" href="http://www.orafaq.com/wiki/Tnsnames.ora">Oracle TNS name</a></p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">coerce_to_decimal</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to <cite>true</cite>, it will force the use of the decimal type for all “numeric” types (i.e. numbers with precision
and scale information). What type the column data ends up as is not clearly defined by the current oracle
backend driver so in some cases it may yield a float value instead of a decimal value. This property should
always be set to <cite>true</cite> if your flows care if numeric values are floats or decimals. The default value is <cite>false</cite>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id202">
<h4>Example configuration<a class="headerlink" href="#id202" title="Permalink to this headline">¶</a></h4>
<p>Example Oracle TNS configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;oracle_db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Oracle test database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:oracle_tns&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tns_name&quot;</span><span class="p">:</span> <span class="s2">&quot;(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = foo)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = BAR)))&quot;&quot;,</span>
    <span class="s2">&quot;coerce_to_decimal&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="legacy-microsoft-sql-system">
<span id="mssql-system"></span><h3>Legacy Microsoft SQL system<a class="headerlink" href="#legacy-microsoft-sql-system" title="Permalink to this headline">¶</a></h3>
<p>The Legacy Microsoft SQL system represents a <a class="reference external" href="https://en.wikipedia.org/wiki/Microsoft_SQL_Server">Microsoft SQL Server</a> available over the network.</p>
<p>Note that this system is a legacy system that’s based on open source drivers and has been superceded by the
<a class="reference internal" href="#mssql-sqlserver-system"><span class="std std-ref">Microsoft SQL Server</span></a> which uses official microsoft drivers.</p>
<p>See the <a class="reference internal" href="source-datatype-mapping.html#sql-server-types"><span class="std std-ref">supported column types</span></a> list for a overview of which SQL Server column types
are supported and how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>.</p>
<div class="section" id="id203">
<h4>Prototype<a class="headerlink" href="#id203" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sql_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:mssql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Legacy Microsoft SQL Server Database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;fqdn-or-ip-address-here&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tds_version&quot;</span><span class="p">:</span><span class="s2">&quot;7.4&quot;</span><span class="p">,</span>
    <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="s2">&quot;named-instance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">1433</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;database-name&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id204">
<h4>Properties<a class="headerlink" href="#id204" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>Username to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>Password to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>String</p></td>
<td><p>Host name or IP address to the database server. Must be DNS resolvable if non-numeric.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">instance</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the SQL Server “named instance”, if applicable. Note that if <code class="docutils literal notranslate"><span class="pre">instance</span></code> is set, <code class="docutils literal notranslate"><span class="pre">port</span></code> will be
ignored as SQL Server will assign a “named instance” a random port by default. Be aware that using such
“port-less” named instances potentially has consequences for the configuration of firewall rules as well
(i.e. for both TCP and UDP port ranges, please consult the SQL Server DBA or SQL Server manual for details).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Database IP port. Note: ignored if <code class="docutils literal notranslate"><span class="pre">instance</span></code> is set, see the previous section.</p></td>
<td><p>1433</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>String</p></td>
<td><p>Name/id of database to connect to.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tds_version</span></code></p></td>
<td><p>String</p></td>
<td><p>Version of the <a class="reference external" href="https://en.wikipedia.org/wiki/Tabular_Data_Stream">TDS protocol</a> to use for the driver.
Note that the default is <code class="docutils literal notranslate"><span class="pre">null</span></code> which means it’s not set. This will tell the database driver to attempt to
auto-detect the protocol version, which should work in most cases. However, if you experience unknown or general
connection errors, you can try to specify the TDS protocol version string manually (typically on the
form “7.0”, “7.4” etc).</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id205">
<h4>Example configuration<a class="headerlink" href="#id205" title="Permalink to this headline">¶</a></h4>
<p>Example MS SQL Server configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlserver_db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Legacy MS SQL Server test database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:mssql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">1433</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;testdb&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="microsoft-sql-server-system">
<span id="mssql-azure-dw-system"></span><span id="mssql-sqlserver-system"></span><h3>Microsoft SQL Server system<a class="headerlink" href="#microsoft-sql-server-system" title="Permalink to this headline">¶</a></h3>
<p>This system type represents a Microsoft SQL Server running on premise or in the cloud (Azure). It can also be used to
connect to a <a class="reference external" href="https://azure.microsoft.com/en-us/services/synapse-analytics/#overview">Microsoft Azure Synapse Analytics</a> service.
For the latter, you will need to set the <code class="docutils literal notranslate"><span class="pre">dialect</span></code> property to <code class="docutils literal notranslate"><span class="pre">synapse</span></code>.</p>
<p>This system uses the official Microsoft (ODBC) drivers.</p>
<p>See the <a class="reference internal" href="source-datatype-mapping.html#sql-server-types"><span class="std std-ref">supported column types</span></a> list for a overview of which SQL Server column types
are supported and how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>.</p>
<div class="section" id="id206">
<h4>Prototype<a class="headerlink" href="#id206" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sql_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:sqlserver&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;A Microsoft SQL server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;fqdn-or-ip-address-here&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dialect&quot;</span><span class="p">:</span> <span class="s2">&quot;sql-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">1433</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;database-name&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id207">
<h4>Properties<a class="headerlink" href="#id207" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>Username to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>Password to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>String</p></td>
<td><p>Host name or IP address to the database server. Must be DNS resolvable if non-numeric.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Database IP port.</p></td>
<td><p>1433</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>String</p></td>
<td><p>Name/id of database to connect to.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dialect</span></code></p></td>
<td><p>String</p></td>
<td><p>Indicates if the server is a normal SQL server or a Synapse server. The allowed values are <code class="docutils literal notranslate"><span class="pre">sql-server</span></code> or <code class="docutils literal notranslate"><span class="pre">synapse</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sql-server</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id208">
<h4>Example configuration<a class="headerlink" href="#id208" title="Permalink to this headline">¶</a></h4>
<p>Example MS SQL Server configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlserver_db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;MS SQL Server test database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:sqlserver&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;myserver.database.windows.net&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">1433</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;testdb&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that for backwards compatibility reasons the type “system:mssql-azure-dw” is still accepted as an alternative alias.</p>
</div>
</div>
<div class="section" id="bulk-operations-in-microsoft-sql-server-and-azure-synapse-systems">
<span id="mssql-bulk-operations"></span><h3>Bulk operations in Microsoft SQL server and Azure Synapse systems<a class="headerlink" href="#bulk-operations-in-microsoft-sql-server-and-azure-synapse-systems" title="Permalink to this headline">¶</a></h3>
<p>Both Microsoft SQL Server and Azure Synapse support bulk operations
for uploading data. Sesam uses the
<a class="reference external" href="https://docs.microsoft.com/en-us/sql/tools/bcp-utility">bcp utility</a> for bulk uploading.</p>
<p>When a pipe has been configured with a <a class="reference internal" href="#sql-sink"><span class="std std-ref">SQL sink</span></a> that has the <code class="docutils literal notranslate"><span class="pre">use_bulk_operations</span></code>
parameter set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, this happens when the pipe runs:</p>
<ol class="arabic simple">
<li><p>Sesam creates a temporary database table named “SESAM_BULK_TMP_&lt;table&gt;” (where <code class="docutils literal notranslate"><span class="pre">&lt;table&gt;</span></code> is the
name of the table the sink writes to).</p></li>
<li><p>Sesam writes a temporary file to the local disk that is formatted in a way that the
bcp utility  understands.</p></li>
<li><p>Sesam runs the bcp utility, which will upload the content of the file to the temporary table.</p></li>
<li><p>Sesam runs a <code class="docutils literal notranslate"><span class="pre">MERGE</span></code> sql statement that updates the target table with the contents of the temporary table
(inserting and updating rows as required).</p></li>
<li><p>Sesam drops the temporary database table.</p></li>
</ol>
<p>For this method to work, Sesam must have permissions to create and drop tables in the database. If
for some reason that is not possible, the <code class="docutils literal notranslate"><span class="pre">use_bulk_operations</span></code> parameter in the sql sink can be
set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to make the sink use the (slower) <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> and <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> sql statements to upload data.</p>
</div>
<div class="section" id="a-note-on-writable-views-in-ms-sql-server">
<span id="mssql-identity-columns"></span><h3>A note on writable views in MS SQL server<a class="headerlink" href="#a-note-on-writable-views-in-ms-sql-server" title="Permalink to this headline">¶</a></h3>
<p>If you need to filter out identity columns or skip certain columns in a table you can try to use the <code class="docutils literal notranslate"><span class="pre">skip_identity_columns</span></code>
property on the SQL sink. However, for MS SQL based servers there is another
option/workaround for this usecase: instead of writing to the table directly, you can define a “writable view” of the table
that omits the identity columns (or other columns you want to skip) and write to that instead.
See more information here: <a class="reference external" href="https://docs.microsoft.com/en-us/sql/relational-databases/views/modify-data-through-a-view">https://docs.microsoft.com/en-us/sql/relational-databases/views/modify-data-through-a-view</a></p>
<p>Note that this does not work for primary key columns - i.e. you still need to have one or more unique columns for each row defined
in the <code class="docutils literal notranslate"><span class="pre">primary_key</span></code> property. Autogenerated primary keys are not supported since Sesam then have no way to uniquely identify
which rows to update or delete.</p>
</div>
<div class="section" id="mysql-system">
<span id="id209"></span><h3>MySQL system<a class="headerlink" href="#mysql-system" title="Permalink to this headline">¶</a></h3>
<p>The MySQL system represents a <a class="reference external" href="https://en.wikipedia.org/wiki/MySQL">MySQL database</a> available over the network:
See the <a class="reference internal" href="source-datatype-mapping.html#mysql-types"><span class="std std-ref">supported column types</span></a> list for a overview of which MySQL column types are supported and
how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>.</p>
<div class="section" id="id210">
<h4>Prototype<a class="headerlink" href="#id210" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sql_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:mysql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;The MySQL Database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;fqdn-or-ip-address-here&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;database-name&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id211">
<h4>Properties<a class="headerlink" href="#id211" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>Username to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>Password to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>String</p></td>
<td><p>Host name or IP address to the database server. Must be DNS resolvable if non-numeric.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Database IP port.</p></td>
<td><p>3306</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>String</p></td>
<td><p>Name/id of database to connect to.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id212">
<h4>Example configuration<a class="headerlink" href="#id212" title="Permalink to this headline">¶</a></h4>
<p>Example MySQL configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlserver_db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;MySQL test database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:mysql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;testdb&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="postgresql-system">
<span id="id213"></span><h3>PostgreSQL system<a class="headerlink" href="#postgresql-system" title="Permalink to this headline">¶</a></h3>
<p>The PostgreSQL system represents a <a class="reference external" href="https://en.wikipedia.org/wiki/PostgreSQL">PostgreSQL RDBMS</a> available on the network.
See the <a class="reference internal" href="source-datatype-mapping.html#postgresql-types"><span class="std std-ref">supported column types</span></a> list for a overview of which PostgreSQL column types are supported
and how they are mapped to <a class="reference internal" href="entitymodel.html#entity-data-types"><span class="std std-ref">Sesam types</span></a>.</p>
<div class="section" id="id214">
<h4>Prototype<a class="headerlink" href="#id214" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sql_system_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:postgresql,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;The PostgreSQL Database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;fqdn-or-ip-address-here&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">5432</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;database-name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sslmode&quot;</span><span class="p">:</span> <span class="s2">&quot;prefer&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id215">
<h4>Properties<a class="headerlink" href="#id215" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>Username to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>Password to use when connecting to the database.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>String</p></td>
<td><p>Host name or IP address to the database server. Must be DNS resolvable if non-numeric.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Database IP port.</p></td>
<td><p>5432</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>String</p></td>
<td><p>Name/id of database to connect to.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sslmode</span></code></p></td>
<td><p>String</p></td>
<td><p>The ssl mode to use. The value has to be one of “disable”, “allow”, “prefer”, “require”, “verify-ca” or “verify-full”.
Please consult the <a class="reference external" href="https://www.postgresql.org/docs/10/libpq-ssl.html">PostgreSQL documentation</a>  for
the full details of what these modes entail.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;prefer&quot;</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id216">
<h4>Example configuration<a class="headerlink" href="#id216" title="Permalink to this headline">¶</a></h4>
<p>Example PostgreSQL configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;postgresql_db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PostgreSQL test database&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:postgresql&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;test.postgresql.mydomain.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ldap-system">
<span id="id217"></span><h3>LDAP system<a class="headerlink" href="#ldap-system" title="Permalink to this headline">¶</a></h3>
<p>The LDAP system contains the configuration needed to communicate with a
<a class="reference external" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">LDAP</a> system. It is used by
<a class="reference internal" href="#ldap-source"><span class="std std-ref">LDAP sources</span></a> to stream entities from LDAP catalogs.
Note that <a class="reference external" href="https://en.wikipedia.org/wiki/Active_Directory">Microsoft ActiveDirectory</a> is also supported
through its LDAP-compatible interface/API.</p>
<p>It supports the following properties:</p>
<div class="section" id="id218">
<h4>Prototype<a class="headerlink" href="#id218" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;FQDN of LDAP host&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">389</span><span class="p">,</span>
    <span class="s2">&quot;use_ssl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;charset&quot;</span><span class="p">:</span> <span class="s2">&quot;latin-1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id219">
<h4>Properties<a class="headerlink" href="#id219" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>String</p></td>
<td><p>The fully qualified domain name (<code class="docutils literal notranslate"><span class="pre">FQDN</span></code>) of the LDAP host server</p></td>
<td><p>“localhost”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The TCP port of the LDAP service.</p></td>
<td><p>389</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">use_ssl</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Indicates to the client whether to use a secure socket layer (<code class="docutils literal notranslate"><span class="pre">SSL</span></code>) or not when communicating with the LDAP service</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>The user to authenticate as against the LDAP service. If not set, no authentication will be attempted.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>The password to use for authenticating with the LDAP service. Required if <code class="docutils literal notranslate"><span class="pre">username</span></code> is set.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">charset</span></code></p></td>
<td><p>String</p></td>
<td><p>The charset used to encode strings in the LDAP database. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;latin-1&quot;</span></code> aka <code class="docutils literal notranslate"><span class="pre">&quot;ISO-8859-1&quot;</span></code>,
as <code class="docutils literal notranslate"><span class="pre">&quot;UTF-8&quot;</span></code> is usually not the default encoding in LDAP catalogs at the time of writing.</p></td>
<td><p>“latin-1”</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id220">
<h4>Example configuration<a class="headerlink" href="#id220" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;example_ldap&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Example LDAP server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:ldap&quot;</span><span class="p">,</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;ldap.example.org&quot;</span><span class="p">,</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">389</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="smtp-system">
<span id="id221"></span><h3>SMTP system<a class="headerlink" href="#smtp-system" title="Permalink to this headline">¶</a></h3>
<p>The SMTP system represents the information needed to connect to a <a class="reference external" href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">SMTP</a>
server for sending emails. It is used in conjunction with the <a class="reference internal" href="#mail-sink"><span class="std std-ref">mail message sink</span></a> to construct
and send emails based on the entities it receives.</p>
<div class="section" id="id222">
<h4>Prototype<a class="headerlink" href="#id222" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:smtp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;smtp_server&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;smtp_port&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
    <span class="s2">&quot;smtp_username&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;smtp_password&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;use_tls&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;max_per_hour&quot;</span><span class="p">:</span> <span class="mi">1000</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id223">
<h4>Properties<a class="headerlink" href="#id223" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">smtp_server</span></code></p></td>
<td><p>String</p></td>
<td><p>Contains a <code class="docutils literal notranslate"><span class="pre">FQDN</span></code> of the <code class="docutils literal notranslate"><span class="pre">SMTP</span> <span class="pre">service</span></code> to use</p></td>
<td><p>“localhost”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">smtp_port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The TCP port to use when talking to the <code class="docutils literal notranslate"><span class="pre">SMTP</span> <span class="pre">service</span></code></p></td>
<td><p>25</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">smtp_username</span></code></p></td>
<td><p>String</p></td>
<td><p>The username to use when authenticating with the <code class="docutils literal notranslate"><span class="pre">SMTP</span> <span class="pre">service</span></code>. If not set, no authentication is attempted.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">smtp_password</span></code></p></td>
<td><p>String</p></td>
<td><p>The password to use if <code class="docutils literal notranslate"><span class="pre">smtp_username</span></code> is set. It is mandatory if the <code class="docutils literal notranslate"><span class="pre">smtp_username</span></code> is provided.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">use_tls</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Indicating to the client to use <code class="docutils literal notranslate"><span class="pre">TLS</span> <span class="pre">encryption</span></code> when communicating with the <code class="docutils literal notranslate"><span class="pre">SMTP</span> <span class="pre">service</span></code>.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_per_hour</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of messages to send for any hour. It is used for stopping run-away message sending in
development or testing. Note that any message not sent will be logged but discarded.</p></td>
<td><p>1000</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id224">
<h4>Example configuration<a class="headerlink" href="#id224" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    &quot;_id&quot;: &quot;our-smtp-server&quot;,
    &quot;name&quot;: &quot;Our SMTP Server&quot;,
    &quot;type&quot;: &quot;system:smtp&quot;,
    &quot;smtp_server&quot;: &quot;localhost&quot;,
    &quot;smtp_port&quot;: 25,
    &quot;smtp_username&quot;: &quot;$ENV(username-variable)&quot;,
    &quot;smtp_password&quot;: $SECRET(password-variable)
    &quot;max_per_hour&quot;: 100000
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="solr-system">
<span id="id225"></span><h3>Solr system<a class="headerlink" href="#solr-system" title="Permalink to this headline">¶</a></h3>
<p>The Solr system represents the information needed to connect to a <a class="reference external" href="https://en.wikipedia.org/wiki/Apache_Solr">Apache Solr</a>
server for indexing JSON documents. It is used in conjunction with the <a class="reference internal" href="#solr-sink"><span class="std std-ref">Solr sink</span></a> or the <a class="reference internal" href="#databrowser-sink"><span class="std std-ref">Sesam Databrowser sink</span></a> sinks.</p>
<div class="section" id="id226">
<h4>Prototype<a class="headerlink" href="#id226" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:solr&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8983/solr/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id227">
<h4>Properties<a class="headerlink" href="#id227" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>Contains a full URL to the Solr dataset to read/write documents from</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">http://localhost:8983/solr/</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of seconds to wait for a response from the Solr server.</p></td>
<td><p>30</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id228">
<h4>Example configuration<a class="headerlink" href="#id228" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-solr-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Our Solr Server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:solr&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8983/solr/&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="elasticsearch-system">
<span id="id229"></span><h3>Elasticsearch system<a class="headerlink" href="#elasticsearch-system" title="Permalink to this headline">¶</a></h3>
<p>The Elasticsearch system represents the information needed to connect
to an <a class="reference external" href="https://en.wikipedia.org/wiki/Elasticsearch">Elasticsearch</a> server/cluster for indexing JSON documents. It is
used in conjunction with the <a class="reference internal" href="#elasticsearch-sink"><span class="std std-ref">Elasticsearch sink</span></a>.</p>
<div class="section" id="id230">
<h4>Prototype<a class="headerlink" href="#id230" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:elasticsearch&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hosts&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;localhost:9200&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id231">
<h4>Properties<a class="headerlink" href="#id231" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hosts</span></code></p></td>
<td><p>List&lt;String&gt;</p></td>
<td><p>Contains a list of host+port pairs, or full URL to the Elasticsearch server(s)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[&quot;localhost:9200&quot;]</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id232">
<h4>Example configuration<a class="headerlink" href="#id232" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-elasticsearch-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Our Elasticsearch Server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:elasticsearch&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hosts&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;localhost:9200&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="twilio-system">
<span id="id233"></span><h3>Twilio system<a class="headerlink" href="#twilio-system" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/Twilio">Twilio</a> system is a <code class="docutils literal notranslate"><span class="pre">SMS</span> <span class="pre">system</span></code> used with
<a class="reference internal" href="#sms-sink"><span class="std std-ref">SMS message sinks</span></a> to construct and send SMS messages from entities.</p>
<p>It has the following properties:</p>
<div class="section" id="id234">
<h4>Prototype<a class="headerlink" href="#id234" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;system-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Service name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:twilio&quot;</span><span class="p">,</span>
    <span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(account-number-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(twilio-api-token-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max_per_hour&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s2">&quot;proxy&quot;</span><span class="p">:</span>  <span class="s2">&quot;socks5://user:password@socksproxy:1234&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id235">
<h4>Properties<a class="headerlink" href="#id235" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">account</span></code></p></td>
<td><p>String</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Twilio</span></code> account number</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">token</span></code></p></td>
<td><p>String</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Twilio</span></code> API token</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_per_hour</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The maximum number of messages to send for any hour. It is used for stopping run-away message sending in
development or testing. Note that any message not sent will be logged but discarded.</p></td>
<td><p>1000</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">proxy</span></code></p></td>
<td><p>String</p></td>
<td><p>A optional property that specifies a SOCKS5 proxy for the system. If authentication is used, the embedded
username and passord should be put into system secrets, i.e. <code class="docutils literal notranslate"><span class="pre">$SECRET(username):$SECRET(password)&#64;..</span></code>.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id236">
<h4>Example configuration<a class="headerlink" href="#id236" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;twilio_service&quot;</span><span class="p">,</span>
     <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Twilio Service&quot;</span><span class="p">,</span>
     <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:twilio&quot;</span><span class="p">,</span>
     <span class="s2">&quot;account&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(account-number-variable)&quot;</span><span class="p">,</span>
     <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(twilio-api-token-variable)&quot;</span><span class="p">,</span>
     <span class="s2">&quot;max_per_hour&quot;</span><span class="p">:</span> <span class="mi">100000</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="url-system">
<span id="id237"></span><h3>URL system<a class="headerlink" href="#url-system" title="Permalink to this headline">¶</a></h3>
<p>The URL system represents a <a class="reference external" href="https://en.wikipedia.org/wiki/Web_server">HTTP server</a> (i.e. a web server)
serving <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP requests</a> from a base url.
It supports the <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> protocols. It provides session handling, connection pooling and authentication
services to sources and sinks which need to communicate with a HTTP server.</p>
<div class="section" id="id238">
<h4>Prototype<a class="headerlink" href="#id238" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;http://host:port/path/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;verify_ssl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;custom_ca_pem_chain&quot;</span><span class="p">:</span> <span class="s2">&quot;-----BEGIN CERTIFICATE-----</span><span class="se">\n</span><span class="s2">MIIGYTCCB[...]</span><span class="se">\n</span><span class="s2">-----END CERTIFICATE-----</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;jwt_token&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;MY_HEADER&quot;</span><span class="p">:</span> <span class="s2">&quot;some-value&quot;</span><span class="p">,</span>
        <span class="s2">&quot;MY_OTHER_HEADER&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(key-for-other-value)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;MY_SECRET_HEADER&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(secret-key)&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;oauth2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my-client-id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;client_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(client-secret)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;token_url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://oath2-enabled-server:port/path/to/service/for/access/token&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;scope1&quot;</span><span class="p">,</span> <span class="s2">&quot;scope2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;extra&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="s2">&quot;extra-params&quot;</span><span class="p">,</span>
           <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="s2">&quot;include-in-token-request&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;proxies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;http&quot;</span><span class="p">:</span> <span class="s2">&quot;socks5://mysocksproxy:1234&quot;</span><span class="p">,</span>
        <span class="s2">&quot;https&quot;</span><span class="p">:</span> <span class="s2">&quot;socks5://user:password@mysslsocksproxy:1234&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;authentication&quot;</span><span class="p">:</span> <span class="s2">&quot;basic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;connect_timeout&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;read_timeout&quot;</span><span class="p">:</span> <span class="mi">1800</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id239">
<h4>Properties<a class="headerlink" href="#id239" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url_pattern</span></code></p></td>
<td><p>String</p></td>
<td><p>Similar to <code class="docutils literal notranslate"><span class="pre">base_url</span></code> except one can use the <code class="docutils literal notranslate"><span class="pre">%s</span></code> token to tell where relative URLs are to be inserted into the <code class="docutils literal notranslate"><span class="pre">url_pattern</span></code> to produce absolute URLs. If <code class="docutils literal notranslate"><span class="pre">%s</span></code> is omitted then the relative URL is appended to the <code class="docutils literal notranslate"><span class="pre">url_pattern</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">base_url</span></code></p></td>
<td><p>String</p></td>
<td><p>Deprecated. Use the <code class="docutils literal notranslate"><span class="pre">url_pattern</span></code> property instead. The full URL of the base url of the HTTP server. Relative URLs are URL joined against this base URL to produce absolute URLs. Note that you may want a <code class="docutils literal notranslate"><span class="pre">/</span></code> at the end of the value.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">verify_ssl</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Indicate to the client if it should attempt to verify the SSL certificate when communicating with the
HTTP server over SSL/TLS.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">custom_ca_pem_chain</span></code></p></td>
<td><p>String</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">verify_ssl</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> this property can hold a chain of certificates (in PEM format) that
should be used to verify the SSL connection.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>The username to use when authenticating with the HTTP server. Note that you also have to specify
authentication protocol in <code class="docutils literal notranslate"><span class="pre">authentication</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> for this property to have any effect.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>The password to use if <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">authentication</span></code> is set. It is mandatory if <code class="docutils literal notranslate"><span class="pre">username</span></code> is provided.</p></td>
<td></td>
<td><p>Yes*</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">jwt_token</span></code></p></td>
<td><p>String</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">authentication</span></code> is set to <code class="docutils literal notranslate"><span class="pre">jwt</span></code>, this property must hold the <a class="reference external" href="https://jwt.io/">JWT</a> token to use
towards the remote server.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">headers</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>A optional set of header values to set as defaults in request made using the URL system. Both keys and values must
evaluate to strings. Note that any “Authorization” header provided in this object is automatically overwritten
when using the <code class="docutils literal notranslate"><span class="pre">jwt_token</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">authentication</span></code></p></td>
<td><p>String</p></td>
<td><p>What kind of authentication protocol to use. Note that authentication is opt-in only and the default is no
authentication. Allowed values is either “basic”, “digest”, “ntlm” or “jwt”. Note that <code class="docutils literal notranslate"><span class="pre">username</span></code>, <code class="docutils literal notranslate"><span class="pre">password</span></code> or <code class="docutils literal notranslate"><span class="pre">jwt_token</span></code>
might be also required depending on the authentication scheme selected.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">oauth2</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>A optional set of properties that specifies support for automatic fetching of JWT access tokens from a oauth2
enabled provider. The profile supported is “client credentials”, which means you will need a <code class="docutils literal notranslate"><span class="pre">client_id</span></code> and
<code class="docutils literal notranslate"><span class="pre">client_secret</span></code> from your oauth2 provider. Additionally, you must provide a <code class="docutils literal notranslate"><span class="pre">token_url</span></code> URL to a service which
generates JWT access tokens. Optionally you can define a list of scopes (in <code class="docutils literal notranslate"><span class="pre">scope</span></code>) for your client. Note that
this option cannot be combined with <code class="docutils literal notranslate"><span class="pre">JWT</span></code> authentication or the <code class="docutils literal notranslate"><span class="pre">jwt_token</span></code> property. Also note that the
oauth2 specification mandates TLS secured transport for both the token endpoint and the target defined in
<code class="docutils literal notranslate"><span class="pre">url_pattern</span></code>. You can add optional extra parameters to the token request in the <code class="docutils literal notranslate"><span class="pre">extra</span></code> subattribute.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">proxies</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>A optional set of properties that specifies a set of SOCKS5 proxies for the URL system. The keys represents url-
prefixes (for example ‘http’ and ‘https’) and the values of the HTTP(S) or SOCKS5 servers that the requests matching the
prefixes should be passed through. The values should be on the form <code class="docutils literal notranslate"><span class="pre">socks5://username:password&#64;domain_or_ip:port</span></code>
or .``http(s)://username:password&#64;domain_or_ip:port``
The <code class="docutils literal notranslate"><span class="pre">username:password&#64;..</span></code> syntax is optional. If used, the embedded username and passord should be put into system
secrets, i.e. <code class="docutils literal notranslate"><span class="pre">$SECRET(username):$SECRET(password)&#64;..</span></code>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">connect_timeout</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of seconds to wait for connecting to the HTTP server before timing out.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">60</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">read_timeout</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of seconds to wait for the HTTP server to respond to a request before timing out.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1800</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ignore_invalid_content_length_response_header</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Normally, the URL system will throw an error if the <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> header is present and
contains an invalid value. The <code class="docutils literal notranslate"><span class="pre">ignore_invalid_content_length_response_header</span></code> property can be set to
<code class="docutils literal notranslate"><span class="pre">true</span></code> in order to attempt to ignore such errors.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>[1] Exactly one of <code class="docutils literal notranslate"><span class="pre">base_url</span></code> and <code class="docutils literal notranslate"><span class="pre">url_pattern</span></code> must be specified.</p>
</div>
<div class="section" id="id240">
<h4>Example configuration<a class="headerlink" href="#id240" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-http-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Our HTTP Server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;base_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://our.domain.com/files&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example with ntlm configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-http-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Our HTTP Server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;authentication&quot;</span><span class="p">:</span> <span class="s2">&quot;ntlm&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$ENV(username-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$SECRET(password-variable)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;base_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://our.domain.com/files&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rest-system">
<span id="id241"></span><h3>REST system<a class="headerlink" href="#rest-system" title="Permalink to this headline">¶</a></h3>
<p>The REST system represents a REST service (i.e. a web server) serving
<a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP requests</a> from a base url using the REST
vocabulary of GET, PUT, POST and PATCH.</p>
<p>It is used by the <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>.</p>
<p>It supports the <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> protocols. It provides session handling, connection pooling and authentication
services to sources and sinks which need to communicate with a HTTP server.</p>
<p>The REST system is an extension of the URL system, so all configuration properties of the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a>
apply. We’ll only cover the REST system specific properties in this section.</p>
<div class="section" id="id243">
<h4>Prototype<a class="headerlink" href="#id243" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of system&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:rest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;http://host:port/path/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;verify_ssl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;custom_ca_pem_chain&quot;</span><span class="p">:</span> <span class="s2">&quot;-----BEGIN CERTIFICATE-----</span><span class="se">\n</span><span class="s2">MIIGYTCCB[...]</span><span class="se">\n</span><span class="s2">-----END CERTIFICATE-----</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;authentication&quot;</span><span class="p">:</span> <span class="s2">&quot;basic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;jwt_token&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;connect_timeout&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;read_timeout&quot;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span>
    <span class="s2">&quot;rate_limiting_retries&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;rate_limiting_delay&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;json_content_types&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;application/jsonish&quot;</span><span class="p">]</span>
    <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;get-operation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;/a/service/that/supports/get/{{ _id }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
            <span class="s2">&quot;next_page_link&quot;</span><span class="p">:</span> <span class="p">{{</span> <span class="n">body</span><span class="o">.</span><span class="n">pagination</span><span class="o">.</span><span class="n">next</span> <span class="p">}},</span>
            <span class="s2">&quot;id_expression&quot;</span><span class="p">:</span> <span class="p">{{</span> <span class="nb">id</span> <span class="p">}},</span>
            <span class="s2">&quot;updated_expression&quot;</span><span class="p">:</span> <span class="p">{{</span> <span class="n">updated</span> <span class="p">}},</span>
            <span class="s2">&quot;payload_property&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span>
            <span class="s2">&quot;response_property&quot;</span><span class="p">:</span> <span class="s2">&quot;response&quot;</span><span class="p">,</span>
            <span class="s2">&quot;since_property_name&quot;</span><span class="p">:</span> <span class="s2">&quot;updated&quot;</span><span class="p">,</span>
            <span class="s2">&quot;since_property_location&quot;</span><span class="p">:</span> <span class="s2">&quot;query|header&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;delete-operation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;/a/service/that/supports/delete/{{ _id }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rate_limiting_retries&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;rate_limiting_delay&quot;</span><span class="p">:</span> <span class="mi">60</span>
        <span class="p">},</span>
        <span class="s2">&quot;put-operation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;/some/service/that/supports/put&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;PUT&quot;</span><span class="p">,</span>
            <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;payload-type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;post-operation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;/some/service/that/supports/post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="s2">&quot;payload-type&quot;</span><span class="p">:</span> <span class="s2">&quot;form&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;patch-operation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;/some/service/that/supports/patch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/xml&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;PATCH&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id244">
<h4>Properties<a class="headerlink" href="#id244" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;any</span> <span class="pre">url</span> <span class="pre">system</span> <span class="pre">property&gt;</span></code></p></td>
<td></td>
<td><p>The REST system extends the URL system, so any property from the URL system can be applied.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">operations</span></code></p></td>
<td><p>Object</p></td>
<td><p>An object containing the registered operations allowed for the REST service. See the next section for details.
At least one operation need to be registered for the system.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If set and the REST service returns a HTTP 429 error code, the request will be retried the number of times
indicated. The time between retries can be adjusted by setting <code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code> is set on either the transform or on the REST system, and a retry is triggered
the time to wait before retrying can be set by this value. If specified on both the toplevel system and in the,
the operation definition, the operation value takes precedence.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">json_content_types</span></code></p></td>
<td><p>Array of strings</p></td>
<td><p>This property can be used to supply the REST source and transform a list of response “content-type” strings
that represent valid JSON content that should be parsed as such. The content-type “application/json” is always
included.</p></td>
<td><p>[“application/json”]</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="operation-properties">
<h4>Operation properties<a class="headerlink" href="#operation-properties" title="Permalink to this headline">¶</a></h4>
<p>You can register as many named “operations” as you like with the system (even using the same type of “method”).
A operation configuration looks like:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>String</p></td>
<td><p>A URL or URL part. The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the entities properties
available to the templating context. The expanded string is then substituted into the system’s <code class="docutils literal notranslate"><span class="pre">url_pattern</span></code> property in
place of its <code class="docutils literal notranslate"><span class="pre">%s</span></code> placeholder marker to get the final URL to use for the operation.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">method</span></code></p></td>
<td><p>String</p></td>
<td><p>A enumeration of “GET”, “POST”, “PUT”, “DELETE” and “PATCH” (note: case sensitive) that represents the HTTP operation
that the operation should execute on the <code class="docutils literal notranslate"><span class="pre">url</span></code> specified.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">headers</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>An optional object that contain key-value mappings for the HTTP request header. Entries in this dictionary
will override any default <code class="docutils literal notranslate"><span class="pre">headers</span></code> property defined on the system (see previous section).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">params</span></code></p></td>
<td><p>Objects</p></td>
<td><p>An optional object that contain key-value mappings for any HTTP parameters.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload-type</span></code></p></td>
<td><p>String</p></td>
<td><p>A enumeration of “json”, “json-transit” and “form”, that denotes how to treat the <code class="docutils literal notranslate"><span class="pre">payload</span></code> property of the
entity (see the <a class="reference internal" href="#rest-expected-rest-entity-shape"><span class="std std-ref">expected entity shape</span></a> section of the <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a> for details). If you
specify “json”, the payload contents will serialized to JSON (without transit encoding). If you specify “json-transit”
you will get a transit-encoded JSON document. If “form” is used, the contents will be used to construct a
HTML FORM for the request. In this case, if the property contains a list, the request will use a multi-part form.
If <code class="docutils literal notranslate"><span class="pre">payload-type</span></code> is omitted, the contents of the <code class="docutils literal notranslate"><span class="pre">payload</span></code> property will be assumed to be a string.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">properties</span></code></p></td>
<td><p>Object</p></td>
<td><p>The properties mapping used as default values for the emitted entitites. Note that if both are present the
properties in the emitted entity takes precendence. Also note that this property can be defined in the
<a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a>, <a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> and <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>
configuration as well. The configuration in pipes will take precendence if both are defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload</span></code></p></td>
<td><p>Object, string or array</p></td>
<td><p>The value to use as payload for the operation. Note that if both are present the
properties in the processed entity takes precendence. Also note that this property can be defined
in the <a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a>, <a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> and <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>
configuration as well. The configuration in pipes will take precendence if both are defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">response_property</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the property to put the response in when emitting entities. Note that this property can be defined
in the <a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a> and <a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> configuration as well.
The configuration in pipes will take precendence if both are defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">payload_property</span></code></p></td>
<td><p>String</p></td>
<td><p>The JSON response sub-property to use as the source of the emitted entities. Note that this property can be
defined in the <a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a> and <a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> configuration as
well. It will be ignored by the <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>. The configuration in pipes will take precendence
if both are defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">next_page_link</span></code></p></td>
<td><p>String</p></td>
<td><p>The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the source
or transform response properties and header values available to the templating context bound to the <code class="docutils literal notranslate"><span class="pre">body</span></code>
and <code class="docutils literal notranslate"><span class="pre">headers</span></code> variables respectively. It is used to extract the next URL to perform the operation on for
pagination support. This property will be ignored by the <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the entities
properties available to the templating context. It can be used to add <code class="docutils literal notranslate"><span class="pre">_id</span></code> properties to the emitted
entities if missing from the source system. Note that this property can be defined in the
<a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a> configuration and <a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> as well. It will be
ignored by the <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>. The configuration in pipes will take precendence if both are defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">updated_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>The property supports the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> template (<a class="reference external" href="https://palletsprojects.com/p/jinja/">https://palletsprojects.com/p/jinja/</a>) syntax with the entities
properties available to the templating context. It can be used to add <code class="docutils literal notranslate"><span class="pre">_updated</span></code> properties to the emitted
entities if missing from the source system (for continuation support). For REST sources, this is only relevant if
<code class="docutils literal notranslate"><span class="pre">since_support</span></code> as been set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the source. See the <code class="docutils literal notranslate"><span class="pre">since_property_name</span></code> and <code class="docutils literal notranslate"><span class="pre">since_property_location</span></code>
configuration properties as well. Note that this property can be defined in the
<a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a> and <a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> configuration as well. It will be
ignored by the <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>. The configuration in pipes will take precendence if both are defined.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">since_property_name</span></code></p></td>
<td><p>String</p></td>
<td><p>The name of the property to relay continuation information. This is only relevant if <code class="docutils literal notranslate"><span class="pre">since_support</span></code> as been
set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the source. See <code class="docutils literal notranslate"><span class="pre">since_property_location</span></code> and <code class="docutils literal notranslate"><span class="pre">updated_property</span></code> as well. Note that this
property can be defined in the <a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a> configuration as well. It will be ignored by the
<a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> and <a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>. The configuration in pipes will take
precendence if both are defined.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;since&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">since_property_location</span></code></p></td>
<td><p>String</p></td>
<td><p>A enumeration of “query” and “header”. The location property to relay continuation information.
This is only relevant if <code class="docutils literal notranslate"><span class="pre">since_support</span></code> as been set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. See <code class="docutils literal notranslate"><span class="pre">since_property_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">updated_property</span></code> as well. Note that this property can be defined in the <a class="reference internal" href="#rest-source"><span class="std std-ref">REST source</span></a>
configuration as well. It will be ignored by the <a class="reference internal" href="#rest-transform"><span class="std std-ref">REST transform</span></a> and
<a class="reference internal" href="#rest-sink"><span class="std std-ref">REST sink</span></a>. The configuration in pipes will take precendence if both are defined.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;query&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If set and the REST service returns a HTTP 429 error code, the request will be retried the number of times
indicated. The time between retries can be adjusted by setting <code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code>.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rate_limiting_delay</span></code></p></td>
<td><p>Integer</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">rate_limiting_retries</span></code> is set on either the transform or on the REST system, and a retry is triggered
the time to wait before retrying can be set by this value. If specified on both the toplevel system and in the,
the operation definition, the operation value takes precedence.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rest-system-example">
<span id="id245"></span><h4>Example configuration<a class="headerlink" href="#rest-system-example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-rest-service&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Our REST service&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;http://our.domain.com/api/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:rest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;get-men&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;men/{{ properties.collection_name }}/men&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;get-man&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;men/{{ properties.collection_name }}/{{ _id }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;get-woman&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;women/{{ properties.collection_name }}/{{ _id }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;GET&quot;</span>
        <span class="p">},</span>
       <span class="s2">&quot;delete-man&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;men/{{ properties.collection_name }}/{{ _id }}&quot;</span><span class="p">,</span>
           <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;DELETE&quot;</span>
       <span class="p">},</span>
       <span class="s2">&quot;delete-woman&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;women/{{ properties.collection_name }}/{{ _id }}&quot;</span><span class="p">,</span>
           <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;DELETE&quot;</span>
       <span class="p">},</span>
       <span class="s2">&quot;update-man&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;men/{{ properties.collection_name }}/&quot;</span><span class="p">,</span>
           <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
           <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;Content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/xml&quot;</span>
           <span class="p">}</span>
       <span class="p">},</span>
       <span class="s2">&quot;update-woman&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;women/{{ properties.collection_name }}/&quot;</span><span class="p">,</span>
           <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
           <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="s2">&quot;Content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span>
           <span class="p">},</span>
           <span class="s2">&quot;payload-type&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span>
       <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="microservice-system">
<span id="id246"></span><h3>Microservice system<a class="headerlink" href="#microservice-system" title="Permalink to this headline">¶</a></h3>
<p>The microservice system is similar to the <a class="reference internal" href="#url-system"><span class="std std-ref">URL system</span></a>, except that it also spins up the microservice that it defines. This system can be used with the <a class="reference internal" href="#json-source"><span class="std std-ref">JSON source</span></a>, the <a class="reference internal" href="#http-transform"><span class="std std-ref">HTTP transform</span></a> and the <a class="reference internal" href="#json-sink"><span class="std std-ref">JSON push sink</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">docker</span></code> property lets one specify a Docker container that should be spun up. Note that the microservice system does not have the <code class="docutils literal notranslate"><span class="pre">base_url</span></code> property. The reason is that it is able to figure out this itself.</p>
<p>The microservice system supports private repositories.</p>
<p>A microservice must communicate with the outside world using either the <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> protocol (the default) or the <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> protocol. Set the <code class="docutils literal notranslate"><span class="pre">use_https</span></code> property to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code>.</p>
<p>The system provides session handling, connection pooling and authentication services to sources, transforms and sinks which need to communicate with the microservice.</p>
<div class="section" id="id247">
<h4>Prototype<a class="headerlink" href="#id247" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;id-of-microservice&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of microservice&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:microservice&quot;</span><span class="p">,</span>
    <span class="s2">&quot;docker&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;some-repo/some-image:some-tag&quot;</span><span class="p">,</span>
        <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="mi">128</span><span class="p">,</span>
        <span class="s2">&quot;cpu_quota&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
        <span class="s2">&quot;cpu_period&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s2">&quot;cpuset_cpus&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;SOME-VARIABLE&quot;</span><span class="p">:</span> <span class="s2">&quot;SOME-VALUE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;OTHER-VARIABLE&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;hosts&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;myhost1.mydomain.io&quot;</span><span class="p">:</span> <span class="s2">&quot;157.240.20.34&quot;</span><span class="p">,</span>
            <span class="s2">&quot;myhost2.mydomain.io&quot;</span><span class="p">:</span> <span class="s2">&quot;157.240.20.35&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;skip_pull&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;pull_image_cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0 0 * * *&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;use_https&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;verify_ssl&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;authentication&quot;</span><span class="p">:</span> <span class="s2">&quot;basic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;connect_timeout&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s2">&quot;read_timeout&quot;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span>
    <span class="s2">&quot;eager_load&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that due to Docker naming conventions, the <code class="docutils literal notranslate"><span class="pre">_id</span></code> of the microservice must start with a ASCII letter or number
character and the only non-letter or number characters allowed in the rest of the string are “_” and “-“.</p>
<p>The microservice <code class="docutils literal notranslate"><span class="pre">_id</span></code> is exposed as domain names in the local network and is thus subject to domain name rules:
the maximal size of an id is 63 characters and the minimal size is 2 characters.</p>
<p>It should also contain only lower-case letters to avoid DNS lookup errors when used via by HTTP requests,
for example in a URL system or via its proxy API.</p>
</div>
<div class="section" id="id248">
<h4>Properties<a class="headerlink" href="#id248" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 11%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Req</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docker.image</span></code></p></td>
<td><p>String</p></td>
<td><p>The fully qualified name of a Docker image, e.g. <code class="docutils literal notranslate"><span class="pre">sesam/file-share-service:latest</span></code> or <code class="docutils literal notranslate"><span class="pre">quay.io/someuser/someimage:1.2.3</span></code>.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">docker.port</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The port on which to talk to the microservice. This should be one of the ports that the Docker container exposes.</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docker.environment</span></code></p></td>
<td><p>Dict&lt;String,String|Object&gt;</p></td>
<td><p>The environment variables that should be passed to the microservice’s Docker container. Note that string
literals are passed along to the docker container as-is, while other types of values are serialized to a string
in JSON format.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">docker.username</span></code></p></td>
<td><p>String</p></td>
<td><p>If the Docker images is located in a private repository, then the username must be specified here.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docker.password</span></code></p></td>
<td><p>String</p></td>
<td><p>If the Docker images is located in a private repository, then the password must be specified here.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">docker.memory</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The number of MB of RAM to allocate for the microservice.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">128</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docker.cpu_quota</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The percentage of CPU resources the container is allowed to consume. <em>Use with extreme care</em> as you can easily
starve other processes on the server for resources if you set this value incorrectly or suboptimally. See
<a class="reference external" href="https://docs.docker.com/engine/reference/run/#cpu-period-constraint">the Docker documentation</a> for details).
Note that the value is divided by 1000 with respects to the range in the Docker documentation. Also note that
the value represents the <em>sum</em> of CPU resources used across <em>all cores</em>. If the container is allowed to use more
than one CPU (by default it can use all of them) the number can exceed 100. I.e. for a 4 core CPU, 400 means
use all resources on all CPU cores.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">25</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">docker.cpu_period</span></code></p></td>
<td><p>Integer</p></td>
<td><p>The percentage of CPU time the OS scheduler is allowed use (see <a class="reference external" href="https://docs.docker.com/engine/reference/run/#cpu-period-constraint">the Docker documentation</a> for details).
Note that the value is divided by 1000 with respects to the range in the Docker documentation. You should not
normally change the default value.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">100</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docker.cpuset_cpus</span></code></p></td>
<td><p>String</p></td>
<td><p>A string expression representing the CPU cores the container is allowed to use, see <code class="docutils literal notranslate"><span class="pre">docker.cpu_quota</span></code>.
The default (<code class="docutils literal notranslate"><span class="pre">null</span></code> value) means the container can use all cores. A value of <code class="docutils literal notranslate"><span class="pre">&quot;0,4&quot;</span></code> means use core 0 and
4. A value of <code class="docutils literal notranslate"><span class="pre">&quot;0-4&quot;</span></code> means use cores 0 through 4. A value of <code class="docutils literal notranslate"><span class="pre">&quot;0,6-8&quot;</span></code> means use core 0 and 6 through 8.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd" id="microservices-system-docker-hosts"><td><p><code class="docutils literal notranslate"><span class="pre">docker.hosts</span></code></p></td>
<td><p>Dict&lt;String,String&gt;</p></td>
<td><p>A mapping between domain names/hostnames and IP adresses. These custom hostnames will be resolvable inside the microservice container.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{}</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docker.skip_pull</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to true then the system will will never try to pull a new version of the docker image. If this is
set to false (the default), the system will attempt to pull a new version of the docker image every time
the microservice docker container is restarted (for instance when a new config has been specified).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">docker.pull_image_cron_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>A cron expression that indicates when the system will attempt to pull a new version of the docker image.
If a newer version of the docker image is pulled, the microservice docker container will restart.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">use_https</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>If set to true then the system will use the <code class="docutils literal notranslate"><span class="pre">https</span></code> protocol to communicate with the microservice.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">verify_ssl</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Indicate to the client if it should attempt to verify the SSL certificate when communicating with the
microservice over SSL/TLS.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></td>
<td><p>String</p></td>
<td><p>The username to use when authenticating with the microservice. Note that you also have to specify
authentication protocol in <code class="docutils literal notranslate"><span class="pre">authentication</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> for this property to have any effect.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>String</p></td>
<td><p>The password to use if <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">authentication</span></code> is set. It is mandatory if <code class="docutils literal notranslate"><span class="pre">username</span></code> is provided.</p></td>
<td></td>
<td><p>Yes*</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">authentication</span></code></p></td>
<td><p>String</p></td>
<td><p>What kind of authentication protocol to use. Note that authentication is opt-in only and the default is no
authentication. No authentication set means means any <code class="docutils literal notranslate"><span class="pre">username</span></code> or <code class="docutils literal notranslate"><span class="pre">password</span></code> set will be ignored.
Allowed values is either “basic” or “digest”.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">connect_timeout</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of seconds to wait for connecting to the microservice before timing out.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">60</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">read_timeout</span></code></p></td>
<td><p>Integer</p></td>
<td><p>Number of seconds to wait for the microservice to respond to a request before timing out.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1800</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">eager_load</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>When set to false, Sesam can hold off starting up the microservice if it isn’t connected to any pipes. Set to true to force the microservice to start up regardless. Overrides setting in <a class="reference internal" href="#service-metadata-global-defaults-eager-load-microservices"><span class="std std-ref">service metadata</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="microservice-apis">
<h4>Microservice APIs<a class="headerlink" href="#microservice-apis" title="Permalink to this headline">¶</a></h4>
<p>The Microservice system exposes several API endpoints that can be used to access or gather information about the running
service:</p>
<ul class="simple">
<li><p><a class="reference external" href="./api.html#get--systems-system_id-logs">Logs endpoint</a> - exposes the service’s logs</p></li>
<li><p><a class="reference external" href="./api.html#get--systems-system_id-status">Status endpoint</a> - runtime information about the provisioned service</p></li>
<li><p><a class="reference external" href="./api.html#post--systems-system_id-reload">Reload endpoint</a> - pull new docker image and reload the microservice</p></li>
<li><p><a class="reference external" href="./api.html#get--systems-system_id-proxy--path-relative_path-">Proxy endpoint</a> - proxy for the microservice URL through the node API</p></li>
</ul>
</div>
<div class="section" id="id250">
<h4>Example configuration<a class="headerlink" href="#id250" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;our-http-server&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My microservice&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;system:microservice&quot;</span><span class="p">,</span>
    <span class="s2">&quot;docker&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;myrepo/myimage:1.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">4444</span><span class="p">,</span>
        <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="p">{</span>
           <span class="s2">&quot;USE_PORT&quot;</span><span class="p">:</span> <span class="s2">&quot;4444&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="pumps">
<span id="pump-section"></span><h2>Pumps<a class="headerlink" href="#pumps" title="Permalink to this headline">¶</a></h2>
<p>Pumps are responsible for “pumping” data through the <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> by reading <a class="reference internal" href="entitymodel.html"><span class="doc">entities</span></a>
from a <a class="reference internal" href="#source-section"><span class="std std-ref">source</span></a> and writing them into a <a class="reference internal" href="#sink-section"><span class="std std-ref">sink</span></a>. The pump is also responsible
for retrying failed writes of entities and logging its activity. It can also write ultimately failed entities to a “dead letter”
dataset for manual inspection. Pumps log their <a class="reference internal" href="pump-execution.html"><span class="doc">execution history</span></a> in a internal dataset with
the id “system:pump_execution:&lt;pipe_id&gt;”. See the chapter on <a class="reference internal" href="pump-execution.html"><span class="doc">the pump execution dataset</span></a> for more
details about the contents of this dataset.</p>
<div class="section" id="id251">
<h3>Prototype<a class="headerlink" href="#id251" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a comment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;schedule_interval&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s2">&quot;cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;* * * * *&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rescan_run_count&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;rescan_cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;* * * * *&quot;</span><span class="p">,</span>
    <span class="s2">&quot;partial_rescan_run_count&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;partial_rescan_delta&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="s2">&quot;run_at_startup&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;max_read_retries&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;read_retry_delay&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;write_retry_delay&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;max_retries_per_entity&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;max_consecutive_write_errors&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_write_errors_in_retry_dataset&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;fallback_to_single_entities_on_batch_fail&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;dead_letter_dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;some-dataset-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;track_dead_letters&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;scheduled&quot;</span><span class="p">,</span>
    <span class="s2">&quot;log_events_noop_runs&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;log_events_noop_runs_changes_only&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;notification_granularity&quot;</span><span class="p">:</span> <span class="mi">99999999999</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id252">
<h3>Properties<a class="headerlink" href="#id252" title="Permalink to this headline">¶</a></h3>
<p>Note: A pump configuration needs to have either a <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code> <em>or</em> a
<code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> property to govern when the pump should be run. They are mutually exclusive with the
<code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> taking precedence if both are present. If neither property is set, the <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code>
will be set to a default value. For pipes with a <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> <em>and</em> a
<a class="reference internal" href="#dataset-source"><span class="std std-ref">dataset source</span></a> the default will be 30 seconds +/- 1.5 seconds. For all other pipes, the default
will be 900 seconds +/- 45 seconds. It is good practice to always set the <code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> property
on pipes that reads from or writes to external systems.</p>
<p>If you are unfamiliar with <a class="reference external" href="https://en.wikipedia.org/wiki/Cron">cron expressions</a>, you can read more of how
they are formatted in the <a class="reference internal" href="cron-expressions.html"><span class="doc">Cron Expressions</span></a> document.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 66%" />
<col style="width: 11%" />
<col style="width: 1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody id="pump-param-schedule-interval">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable comment on the pump (optional).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code></p></td>
<td><p>Number</p></td>
<td><p>The number of seconds between runs. It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> property.</p></td>
<td><p>(see the note above)</p></td>
<td></td>
</tr>
<tr class="row-even" id="pump-param-cron-expression"><td><p><code class="docutils literal notranslate"><span class="pre">cron_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>A cron expression that indicates when the pump should run.
It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd" id="pump-rescan-run-count"><td><p><code class="docutils literal notranslate"><span class="pre">rescan_run_count</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>How many times the pump should run before scheduling a complete rescan of the source of the pipe that the pump
is part of. It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">rescan_cron_expression</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even" id="pump-rescan-cron-expression"><td><p><code class="docutils literal notranslate"><span class="pre">rescan_cron_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>A cron expression that indicates when the pump should schedule a full rescan of the source of the pipe the pump
is part of. It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">rescan_run_count</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partial_rescan_run_count</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>How many times the pump should run before scheduling a partial rescan of the
source of the pipe that the pump is part of. Any complete rescans will take
precedence if they both apply. If this property is specified then the
<code class="docutils literal notranslate"><span class="pre">partial_rescan_delta</span></code> must also be specified.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partial_rescan_delta</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>This specifies the delta to perform a partial rescan of.</p>
<p>If the since value is an integer the value is substracted.</p>
<p>Example: If the since value is <code class="docutils literal notranslate"><span class="pre">12637</span></code> and the delta value is <code class="docutils literal notranslate"><span class="pre">100</span></code>, then
the since value will be shifted to <code class="docutils literal notranslate"><span class="pre">12537</span></code>.</p>
<p>If the since value is a timestamp then the value in seconds is substracted.</p>
<p>Example: If the since value is
<code class="docutils literal notranslate"><span class="pre">&quot;~t2018-04-27T15:46:40Z&quot;</span></code> and the delta value is 3600, then the
since value will be shifted one hour back to <code class="docutils literal notranslate"><span class="pre">&quot;~t2018-04-27T14:46:40Z&quot;</span></code>.</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">run_at_startup</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that indicates if the pump should run when Sesam starts up, in addition to the normal schedule
specified by the <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code> or <code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> properties.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">use_dead_letter_dataset</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Deprecated. Use the <code class="docutils literal notranslate"><span class="pre">dead_letter_dataset</span></code> property instead. This is a flag used to indicate whether to write
any entities that fail retries to a special “dead letter” dataset. This can only happen if
<code class="docutils literal notranslate"><span class="pre">max_write_errors_in_retry_dataset</span></code> is non-zero and <code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> for
the particular entity has been exceeded. Note that unspecified dead letter datasets for a pipe has the special
id pattern <code class="docutils literal notranslate"><span class="pre">system:dead-letter:pipe-id</span></code>. Only users with the authorization to see the pipe configuration can
access this dataset.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dead_letter_dataset</span></code></p></td>
<td><p>String</p></td>
<td><p>This is string that indicates which dataset to write any entities that fail retries if
<code class="docutils literal notranslate"><span class="pre">max_write_errors_in_retry_dataset</span></code> is non-zero and <code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> for the particular entity has
been exceeded. Only users with the authorization to see the pipe configuration will have access to this dataset.
The dataset indicated must be unique per pipe.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">track_dead_letters</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that indicates if the pump should delete any previously “dead letter” entities if a later version of it
is successfully written to the sink. It is only active if the <code class="docutils literal notranslate"><span class="pre">use_dead_letter_dataset</span></code> property is set and
retries are active. Note that enabling this option wil incur a performance cost because all successfully
written entities must be looked up in the execution log to determine if it has been previously marked as “dead”.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_read_retries</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many times it should retry when failing to read a entity from a source.
The default (0) means that it should not retry but log an error immediately when encountering read errors.
See also the <code class="docutils literal notranslate"><span class="pre">read_retry_delay</span></code> property.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">read_retry_delay</span></code></p></td>
<td><p>Number</p></td>
<td><p>How many seconds to wait before retrying after a read error (i.e. only if <code class="docutils literal notranslate"><span class="pre">max_read_retries</span></code> is non-zero).
The default value is 0 which will retry immediately. If the reason for the read error is non-transient,
the number of retries set by <code class="docutils literal notranslate"><span class="pre">max_read_retries</span></code> will be exhausted quickly - in this case, set this property to
match the expected interval.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">write_retry_delay</span></code></p></td>
<td><p>Number</p></td>
<td><p>How many seconds to wait before retrying after a write error (i.e. only if <code class="docutils literal notranslate"><span class="pre">max_consecutive_write_errors</span></code> is
larger than 1).
The default value is 0 which will retry immediately. If the reason for the write error is non-transient,
the number of retries set by <code class="docutils literal notranslate"><span class="pre">max_consecutive_write_errors</span></code> will be exhausted quickly - in this case, set this
property to match the expected interval.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many times it should retry a failing entity when writing to a sink before
giving up on it, which in case it can optionally write it to the dataset referenced in <code class="docutils literal notranslate"><span class="pre">dead_letter_dataset</span></code>
(if specified).</p></td>
<td><p>5</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_consecutive_write_errors</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many consecutive write errors it tolerates before terminating the
current run. The default (1) means it will terminate after the first write error it encounters.
See also the <code class="docutils literal notranslate"><span class="pre">write_retry_delay</span></code> property.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_write_errors_in_retry_dataset</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many write errors it accepts in its execution history dataset. If the number of
retryable and not “dead” failed entities in the dataset exceeds this number, the pump will refuse to
write any more failed entities to the execution dataset and terminate, even if the <code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> or
<code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> is not reached at that point. This purpose of this property is to limit the size of the
pump execution dataset in the case where a target system is unreachable (or misconfigured). The default value (0) effectively
disables retries for write errors.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fallback_to_single_entities_on_batch_fail</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that controls if the pipes should attempt to process a single entity at a time if a batch
write operation fails. This can be useful to turn off if the cost of processing a single entity at a time
is prohibitively high. This single-entity-at-a-time fallback is on by default (<code class="docutils literal notranslate"><span class="pre">true</span></code>).</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></td>
<td><p>String</p></td>
<td><p>The mode of operation. Valid options are “<code class="docutils literal notranslate"><span class="pre">scheduled</span></code>” (the default), “<code class="docutils literal notranslate"><span class="pre">manual</span></code>” and
“<code class="docutils literal notranslate"><span class="pre">off</span></code>”.</p>
<p>Pumps in <code class="docutils literal notranslate"><span class="pre">scheduled</span></code> mode will follow the configured schedule and the scheduler can be
enabled and disabled at runtime.</p>
<p>Pumps in <code class="docutils literal notranslate"><span class="pre">manual</span></code> mode will not be scheduled and can only be operated manually through
the Service API.</p>
<p>Pumps in <code class="docutils literal notranslate"><span class="pre">off</span></code> mode cannot be started at all.</p>
</td>
<td><p>“scheduled”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">log_events_noop_runs</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that controls if a “noop” (“no-operation”) pipe run should be logged in the pipe execution log or not. The default
value <code class="docutils literal notranslate"><span class="pre">false</span></code> means that runs that results in no processed or changed entities (the semantic depends on the type of sink)
will never be logged. See also the <code class="docutils literal notranslate"><span class="pre">log_events_noop_runs_changes_only</span></code> property which controls if the source or
the sink decides if a run is considered a “noop” or not. Note that any errors or retries will always imply logging
to the execution dataset.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">log_events_noop_runs_changes_only</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that controls what kind of metric is used to determine if a pipe run was a “noop” (“no-operation”) run or not.
The default setting <code class="docutils literal notranslate"><span class="pre">true</span></code> means that a run is considered a “noop” run if the sink reported that no entities
was changed, even if the source produced entities. If it is set to <code class="docutils literal notranslate"><span class="pre">false</span></code> then all runs which yielded no
new entities from the source is considered a “noop” run. Note that any errors or retries will always imply logging
to the execution dataset.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">notification_granularity</span></code></p></td>
<td><p>int</p></td>
<td><p>This property lets the pipe “override” the <code class="docutils literal notranslate"><span class="pre">log_events_noop_runs</span></code> property and force the pipe to log a run
at regular intervals, even if it was a “noop” run. The value is in seconds. The default value
is <code class="docutils literal notranslate"><span class="pre">999999999999999</span></code> and means “never”. A value of 900 means always log a pipe run if the last logged
“completed” event is older than 15 minutes). Note that any errors or retries will always imply logging to the
execution dataset.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id253">
<h3>Example configuration<a class="headerlink" href="#id253" title="Permalink to this headline">¶</a></h3>
<p>The outermost object would be your <a class="reference internal" href="#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<p>A scheduled pump running every 30 seconds, no retries or dead letter dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;schedule_interval&quot;</span><span class="p">:</span> <span class="mi">30</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A cron pump running every day at midnight with max 5 retries, maximum 100 retries in the execution log and a dead letter
dataset. Also max ten consecutive write failures allowed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0 0 * * *&quot;</span><span class="p">,</span>
       <span class="s2">&quot;max_retries_per_entity&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
       <span class="s2">&quot;max_consecutive_write_errors&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
       <span class="s2">&quot;max_write_errors_in_retry_dataset&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
       <span class="s2">&quot;dead_letter_dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;mypipe-dead-letters&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A scheduled pump running every 30 seconds but do a full rescan of the source every full hour. No retries or dead letter
datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;schedule_interval&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
       <span class="s2">&quot;rescan_cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0 * * * *&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A scheduled pump running every 5 minutes from 14:00 and ending at 14:55, AND fire every 5 minutes starting at
18:00 and ending at 18:55, every day. No retries or dead letter datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0/5 14,18 * * ?&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rescans">
<span id="pipe-rescans"></span><h3>Rescans<a class="headerlink" href="#rescans" title="Permalink to this headline">¶</a></h3>
<p>Definition of terms:</p>
<dl>
<dt>Incremental run:</dt><dd><p>This is what a pump does when it is started when the stored “last_seen” value is set to a non-empty value,
i.e. the pipe will only process source-entities that has appeared after the previous run of the pipe. This is
the most common way to run a pipe.</p>
</dd>
<dt>Background rescan:</dt><dd><p>This is what a pump does when it is started by the <a class="reference internal" href="#pump-rescan-cron-expression"><span class="std std-ref">rescan_cron_expression</span></a> or
<a class="reference internal" href="#pump-rescan-run-count"><span class="std std-ref">rescan_run_count</span></a> config-properties (or if it is manually started by the
“start-rescan” pump-operation) and <a class="reference internal" href="#pipe-settings-enable-background-rescan"><span class="std std-ref">enable_background_rescan</span></a> is set
to <code class="docutils literal notranslate"><span class="pre">true</span></code>. It will process all the source-entities, and do deletion tracking when finished.</p>
<p>Only pipes with a <a class="reference internal" href="#dataset-sink"><span class="std std-ref">dataset sink</span></a> support background rescans. This is because a rescan run
needs a way to check that it isn’t overwriting newer entities from an incremental run, and only the dataset sink
has the required functionality.</p>
<p>The rescan functionality is not enabled by default. To enable it, either set the pipe’s
<a class="reference internal" href="#pipe-settings-enable-background-rescan"><span class="std std-ref">enable_background_rescan</span></a> setting to <code class="docutils literal notranslate"><span class="pre">true</span></code>
to enable rescans on that specific pipe, or set the service metadata property
<a class="reference internal" href="#service-metadata-global-defaults-enable-background-rescan"><span class="std std-ref">global_defaults.enable_background_rescan</span></a>
to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable rescans on all pipes.</p>
</dd>
<dt>Reset/Full run:</dt><dd><p>This is what a pump does when the user has explicitly reset the pipe. It will process all the source-entities,
and do deletion tracking when finished.</p>
</dd>
</dl>
<p>The use-case for rescans is that the user wants new entities to flow through the pipe as quickly as possible,
but the user also wants to reprocess <em>all</em> the source entities. The latter can be very time-consuming, and sometimes
it is not an option to simply reset the pipe to reprocess everything, since that would prevent any new entities from
flowing through the pipe until all the old entities have been processed.</p>
<p>Example: The pipe reads from a sql database-table that has an “last_modified_time”-column, but no “deleted” column;
new and modified rows can be selected with a an appropriate sql-statement, but there is no way to query the sql
database for deleted rows. In this case a rescan can be used to detect deleted rows, while incremental runs can
be used to process new rows at the same time.</p>
<p>There are two different “flavors” of rescans:</p>
<ol class="arabic">
<li><p>The entities produced by the incremental runs are known to be correct. This is the case if the user has just
changed the DTL of a pipe.</p>
<p>If one or more incremental run has been started while a rescan was in progress, the rescan will stop processing
entities when it reaches the “last_seen” offset used by the first incremental run.</p>
<p>If no incremental run has been started, the rescan will proceed past the “last_seen” offset and start to update
the stored “last_seen” value.  It is not possible to start an incremental run if a rescan is running and it has
already passed the “last_seen” offset.</p>
<p>The rescan will not overwrite any entities that have been written by an incremental run.
At the end of the rescan, the recan will do deletion-tracking, but will not delete any entities that were output
by the incremental run(s).</p>
<p>Caveats of doing rescan+incremental runs:</p>
<ul class="simple">
<li><p>The order of the resulting entities can be different that it would be in a normal “reset”-run.</p></li>
<li><p>Since the rescan can’t overwrite entities that has been output by the incremental run, the pipe may not output
all the versions of an entity that it would in a normal run. This can happen for instance if the pipe has a
<a class="reference internal" href="#dataset-source"><span class="std std-ref">dataset source</span></a> with the <code class="docutils literal notranslate"><span class="pre">include_previous_versions</span></code> property set to true; once the
incremental run has output entity “A”, any older versions of “A” that is produces by the rescan will be ignored.</p></li>
</ul>
</li>
<li><p>The entities produced by the incremental run may not be correct in all cases. This is the case if the pipe has
a “merge”-source, and the user has changed the configuration of the merge-source.</p>
<p>In this case the incremental run will use the old version of the merge-source, which may produce erronous results.
The entities from the incremental run will not be put into the sink’s seen-tracker. The incremental run will not
overwrite any entities that have been produced by the rescan run.</p>
<p>Once the rescan finishes, any incremental run in progress will be stopped. The rescan will then process any entities
that have appeared since the start of the rescan. Once that is done, the rescan will do deletion-tracking. This will
delete any erronous entities that was emitted by the incremental run.</p>
<p>Caveats of doing rescan+incremental runs:</p>
<ul class="simple">
<li><p>The order of the resulting entities can be different that it would be in a normal “reset”-run.</p></li>
<li><p>The output can temporarily contain erronous entities (produced by the incremental runs).
Such entities will deleted once the rescan has finished.</p></li>
</ul>
</li>
</ol>
<p>Only one incremental run can be active at once, but once an incremental run has finished a new incremental run can be
started. A rescan run can also be started while an incremental run is in progress.</p>
<p>The incremental runs will not do retries, since the rescan will reprocess any previously failed entities.
The incremental runs will do dependency tracking.</p>
</div>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="gdpr-changelog.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Changelog</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="api.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Service API</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 Sesam.io AS.<br>
</p>
    </div>
    
  </div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZDKEJY06V9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZDKEJY06V9');
</script>
<!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="https://js.hs-scripts.com/19709964.js"></script>
<!-- End of HubSpot Embed Code -->

  </body>
</html>