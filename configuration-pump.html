
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pumps &#8212; Sesam Documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Service API" href="api.html" />
    <link rel="prev" title="Microservice system" href="configuration-systems-microservice.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="index.html">
  <img src="_static/sesamlogo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-whatis.html">
  What is Sesam
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index-developer.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-learn.html">
  Learn
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="community.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="legal.html">
  Legal
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://support.sesam.io">
  Support
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://portal.sesam.io">
  Login
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="quick-reference.html">
   Quick Reference
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="best-practices.html">
   Project kickstart
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pre-planning.html">
     Planning a project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="setup-environment.html">
     Setting up an environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-dataflow.html">
     Creating a dataflow
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="developer-guide.html">
   Building blocks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="product-features.html">
   Features
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DTLReferenceGuide.html">
   Data Transformation Language (DTL)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="patterns.html">
   Design patterns
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-synchronization.html">
   Data synchronization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="idempotency.html">
     Non-idempotency
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cron-expressions.html">
     Cron Expressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rdf-support.html">
     RDF support
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="json-pull.html">
     JSON Pull Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="json-push.html">
     JSON Push Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="extension-points.html">
     Developer Extension Points
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="source-datatype-mapping.html">
     Source datatype mapping
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-datamodelling.html">
   Data modelling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="entitymodel.html">
     Entity Data Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-modelling.html">
     Data modelling
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-dataplatforms.html">
   Data platforms
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="azure.html">
     Sesam in Microsoft Azure
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-operations.html">
   Operations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="security.html">
     Security
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="notifications.html">
     Notifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pump-execution.html">
     Pump Execution Dataset
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="project-workflow.html">
     Configuration Management
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="version-control-system.html">
       Using Sesam with a version control system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="testing-locally.html">
       Testing a Sesam configuration locally
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="continuous-integration.html">
       Continuous integration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="automatic-deployment.html">
       Automatic deployment
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="self-hosted.html">
     Self-hosted service
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="low-level-debugging.html">
     Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="behind-the-scenes.html">
     Behind the scenes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="tools.html">
   Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="management-studio.html">
     Management Studio
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-client.html">
     Sesam Client
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="gdpr-platform.html">
     GDPR platform
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-configuration.html">
       Platform configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-types-purposes-configuration.html">
       Datatypes and purposes configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-access-portal.html">
       The GDPR data access portal
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-developer-docs.html">
       Developer documentation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-getting-started.html">
       Getting started
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-changelog.html">
       Changelog
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="configuration.html">
   Service Configuration
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="configuration-general.html">
     General
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configuration-variables.html">
     Environment variables and secrets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configuration-metadata.html">
     Service metadata
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configuration-pipes.html">
     Pipes
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="configuration-sources.html">
     Sources
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-dataset.html">
       Dataset source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-merge.html">
       Merge source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-union-datasets.html">
       Union datasets source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-merge-datasets.html">
       Merge datasets source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-diff-datasets.html">
       Diff datasets source (experimental)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-embedded.html">
       Embedded source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-sql.html">
       SQL source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-conditional.html">
       Conditional source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-csv.html">
       CSV source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-rdf.html">
       RDF source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-sdshare.html">
       SDShare source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-ldap.html">
       LDAP source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-json.html">
       JSON source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-empty.html">
       Empty source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-http.html">
       HTTP endpoint source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-sparql.html">
       SPARQL source
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sources-rest.html">
       REST source (experimental)
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="configuration-transforms.html">
     Transforms
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-dtl.html">
       DTL transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-json-schema-validation.html">
       JSON Schema validation transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-conditional.html">
       Conditional transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-http.html">
       HTTP transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-emit-children.html">
       Emit children transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-xml.html">
       XML transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-rdf.html">
       RDF transform
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-transforms-rest.html">
       REST transform
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="configuration-sinks.html">
     Sinks
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-conditional.html">
       Conditional sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-dataset.html">
       Dataset sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-databrowser.html">
       Sesam Databrowser sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-json.html">
       JSON push sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-sdshare.html">
       SDShare push sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-sms.html">
       SMS message sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-solr.html">
       Solr sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-elasticsearch.html">
       Elasticsearch sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-sparql.html">
       SPARQL sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-sql.html">
       SQL sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-email.html">
       Email Message sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-null.html">
       Null sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-http.html">
       HTTP endpoint sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-csv.html">
       CSV endpoint sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-xml.html">
       XML endpoint sink
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-sinks-rest.html">
       REST sink
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="configuration-systems.html">
     Systems
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-sql.html">
       SQL systems
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-oracle.html">
       Oracle system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-oracle-tns.html">
       Oracle TNS system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-mssql-legacy.html">
       Legacy Microsoft SQL Server system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-mssql.html">
       Microsoft SQL Server system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-mysql.html">
       MySQL system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-postgresql.html">
       PostgreSQL system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-ldap.html">
       LDAP system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-smtp.html">
       SMTP system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-solr.html">
       Solr system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-elasticsearch.html">
       Elasticsearch system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-twilio.html">
       Twilio system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-url.html">
       URL system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-rest.html">
       REST system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration-systems-microservice.html">
       Microservice system
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Pumps
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="api.html">
   Service API
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="deprecations.html">
   Deprecated features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="databrowser.html">
     Databrowser
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
    <label for="toctree-checkbox-15">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-guide.html">
       Databrowser Guide
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-auth.html">
       Authentication and authorization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-api.html">
       Configuration file API
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="changelog.html">
   Changelog
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prototype">
   Prototype
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#properties">
   Properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-configuration">
   Example configuration
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rescans">
   Rescans
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="pumps">
<span id="pump-section"></span><h1>Pumps<a class="headerlink" href="#pumps" title="Permalink to this headline">¶</a></h1>
<p>Pumps are responsible for “pumping” data through the <a class="reference internal" href="configuration-pipes.html#pipe-section"><span class="std std-ref">pipe</span></a> by reading <a class="reference internal" href="entitymodel.html"><span class="doc">entities</span></a>
from a <a class="reference internal" href="configuration-sources.html#source-section"><span class="std std-ref">source</span></a> and writing them into a <a class="reference internal" href="configuration-sinks.html#sink-section"><span class="std std-ref">sink</span></a>. The pump is also responsible
for retrying failed writes of entities and logging its activity. It can also write ultimately failed entities to a “dead letter”
dataset for manual inspection. Pumps log their <a class="reference internal" href="pump-execution.html"><span class="doc">execution history</span></a> in a internal dataset with
the id “system:pump_execution:&lt;pipe_id&gt;”. See the chapter on <a class="reference internal" href="pump-execution.html"><span class="doc">the pump execution dataset</span></a> for more
details about the contents of this dataset.</p>
<div class="section" id="prototype">
<h2>Prototype<a class="headerlink" href="#prototype" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a comment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;schedule_interval&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s2">&quot;cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;* * * * *&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rescan_run_count&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;rescan_cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;* * * * *&quot;</span><span class="p">,</span>
    <span class="s2">&quot;partial_rescan_run_count&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;partial_rescan_delta&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="s2">&quot;run_at_startup&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;max_read_retries&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;read_retry_delay&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;write_retry_delay&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;max_retries_per_entity&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;max_consecutive_write_errors&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_write_errors_in_retry_dataset&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;fallback_to_single_entities_on_batch_fail&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;dead_letter_dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;some-dataset-id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;track_dead_letters&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;scheduled&quot;</span><span class="p">,</span>
    <span class="s2">&quot;log_events_noop_runs&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;log_events_noop_runs_changes_only&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;notification_granularity&quot;</span><span class="p">:</span> <span class="mi">99999999999</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="properties">
<h2>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<p>Note: A pump configuration needs to have either a <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code> <em>or</em> a
<code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> property to govern when the pump should be run. They are mutually exclusive with the
<code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> taking precedence if both are present. If neither property is set, the <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code>
will be set to a default value. For pipes with a <a class="reference internal" href="configuration-sinks-dataset.html#dataset-sink"><span class="std std-ref">dataset sink</span></a> <em>and</em> a
<a class="reference internal" href="configuration-sources-dataset.html#dataset-source"><span class="std std-ref">dataset source</span></a> the default will be 30 seconds +/- 1.5 seconds. For all other pipes, the default
will be 900 seconds +/- 45 seconds. It is good practice to always set the <code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> property
on pipes that reads from or writes to external systems.</p>
<p>If you are unfamiliar with <a class="reference external" href="https://en.wikipedia.org/wiki/Cron">cron expressions</a>, you can read more of how
they are formatted in the <a class="reference internal" href="cron-expressions.html"><span class="doc">Cron Expressions</span></a> document.</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 66%" />
<col style="width: 11%" />
<col style="width: 1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody id="pump-param-schedule-interval">
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>String or list of strings</p></td>
<td><p>A human readable comment on the pump (optional).</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code></p></td>
<td><p>Number</p></td>
<td><p>The number of seconds between runs. It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> property.</p></td>
<td><p>(see the note above)</p></td>
<td></td>
</tr>
<tr class="row-even" id="pump-param-cron-expression"><td><p><code class="docutils literal notranslate"><span class="pre">cron_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>A cron expression that indicates when the pump should run.
It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd" id="pump-rescan-run-count"><td><p><code class="docutils literal notranslate"><span class="pre">rescan_run_count</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>How many times the pump should run before scheduling a complete rescan of the source of the pipe that the pump
is part of. It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">rescan_cron_expression</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even" id="pump-rescan-cron-expression"><td><p><code class="docutils literal notranslate"><span class="pre">rescan_cron_expression</span></code></p></td>
<td><p>String</p></td>
<td><p>A cron expression that indicates when the pump should schedule a full rescan of the source of the pipe the pump
is part of. It is mutually exclusive with the <code class="docutils literal notranslate"><span class="pre">rescan_run_count</span></code> property.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">partial_rescan_run_count</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>How many times the pump should run before scheduling a partial rescan of the
source of the pipe that the pump is part of. Any complete rescans will take
precedence if they both apply. If this property is specified then the
<code class="docutils literal notranslate"><span class="pre">partial_rescan_delta</span></code> must also be specified.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partial_rescan_delta</span></code></p></td>
<td><p>Integer(&gt;=1)</p></td>
<td><p>This specifies the delta to perform a partial rescan of.</p>
<p>If the since value is an integer the value is substracted.</p>
<p>Example: If the since value is <code class="docutils literal notranslate"><span class="pre">12637</span></code> and the delta value is <code class="docutils literal notranslate"><span class="pre">100</span></code>, then
the since value will be shifted to <code class="docutils literal notranslate"><span class="pre">12537</span></code>.</p>
<p>If the since value is a timestamp then the value in seconds is substracted.</p>
<p>Example: If the since value is
<code class="docutils literal notranslate"><span class="pre">&quot;~t2018-04-27T15:46:40Z&quot;</span></code> and the delta value is 3600, then the
since value will be shifted one hour back to <code class="docutils literal notranslate"><span class="pre">&quot;~t2018-04-27T14:46:40Z&quot;</span></code>.</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">run_at_startup</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that indicates if the pump should run when Sesam starts up, in addition to the normal schedule
specified by the <code class="docutils literal notranslate"><span class="pre">schedule_interval</span></code> or <code class="docutils literal notranslate"><span class="pre">cron_expression</span></code> properties.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">use_dead_letter_dataset</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>Deprecated. Use the <code class="docutils literal notranslate"><span class="pre">dead_letter_dataset</span></code> property instead. This is a flag used to indicate whether to write
any entities that fail retries to a special “dead letter” dataset. This can only happen if
<code class="docutils literal notranslate"><span class="pre">max_write_errors_in_retry_dataset</span></code> is non-zero and <code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> for
the particular entity has been exceeded. Note that unspecified dead letter datasets for a pipe has the special
id pattern <code class="docutils literal notranslate"><span class="pre">system:dead-letter:pipe-id</span></code>. Only users with the authorization to see the pipe configuration can
access this dataset.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dead_letter_dataset</span></code></p></td>
<td><p>String</p></td>
<td><p>This is string that indicates which dataset to write any entities that fail retries if
<code class="docutils literal notranslate"><span class="pre">max_write_errors_in_retry_dataset</span></code> is non-zero and <code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> for the particular entity has
been exceeded. Only users with the authorization to see the pipe configuration will have access to this dataset.
The dataset indicated must be unique per pipe.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">track_dead_letters</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that indicates if the pump should delete any previously “dead letter” entities if a later version of it
is successfully written to the sink. It is only active if the <code class="docutils literal notranslate"><span class="pre">use_dead_letter_dataset</span></code> property is set and
retries are active. Note that enabling this option wil incur a performance cost because all successfully
written entities must be looked up in the execution log to determine if it has been previously marked as “dead”.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_read_retries</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many times it should retry when failing to read a entity from a source.
The default (0) means that it should not retry but log an error immediately when encountering read errors.
See also the <code class="docutils literal notranslate"><span class="pre">read_retry_delay</span></code> property.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">read_retry_delay</span></code></p></td>
<td><p>Number</p></td>
<td><p>How many seconds to wait before retrying after a read error (i.e. only if <code class="docutils literal notranslate"><span class="pre">max_read_retries</span></code> is non-zero).
The default value is 0 which will retry immediately. If the reason for the read error is non-transient,
the number of retries set by <code class="docutils literal notranslate"><span class="pre">max_read_retries</span></code> will be exhausted quickly - in this case, set this property to
match the expected interval.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">write_retry_delay</span></code></p></td>
<td><p>Number</p></td>
<td><p>How many seconds to wait before retrying after a write error (i.e. only if <code class="docutils literal notranslate"><span class="pre">max_consecutive_write_errors</span></code> is
larger than 1).
The default value is 0 which will retry immediately. If the reason for the write error is non-transient,
the number of retries set by <code class="docutils literal notranslate"><span class="pre">max_consecutive_write_errors</span></code> will be exhausted quickly - in this case, set this
property to match the expected interval.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many times it should retry a failing entity when writing to a sink before
giving up on it, which in case it can optionally write it to the dataset referenced in <code class="docutils literal notranslate"><span class="pre">dead_letter_dataset</span></code>
(if specified).</p></td>
<td><p>5</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max_consecutive_write_errors</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many consecutive write errors it tolerates before terminating the
current run. The default (1) means it will terminate after the first write error it encounters.
See also the <code class="docutils literal notranslate"><span class="pre">write_retry_delay</span></code> property.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_write_errors_in_retry_dataset</span></code></p></td>
<td><p>Integer</p></td>
<td><p>A counter that indicates to the pump how many write errors it accepts in its execution history dataset. If the number of
retryable and not “dead” failed entities in the dataset exceeds this number, the pump will refuse to
write any more failed entities to the execution dataset and terminate, even if the <code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> or
<code class="docutils literal notranslate"><span class="pre">max_retries_per_entity</span></code> is not reached at that point. This purpose of this property is to limit the size of the
pump execution dataset in the case where a target system is unreachable (or misconfigured). The default value (0) effectively
disables retries for write errors.</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fallback_to_single_entities_on_batch_fail</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that controls if the pipes should attempt to process a single entity at a time if a batch
write operation fails. This can be useful to turn off if the cost of processing a single entity at a time
is prohibitively high. This single-entity-at-a-time fallback is on by default (<code class="docutils literal notranslate"><span class="pre">true</span></code>).</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></td>
<td><p>String</p></td>
<td><p>The mode of operation. Valid options are “<code class="docutils literal notranslate"><span class="pre">scheduled</span></code>” (the default), “<code class="docutils literal notranslate"><span class="pre">manual</span></code>” and
“<code class="docutils literal notranslate"><span class="pre">off</span></code>”.</p>
<p>Pumps in <code class="docutils literal notranslate"><span class="pre">scheduled</span></code> mode will follow the configured schedule and the scheduler can be
enabled and disabled at runtime.</p>
<p>Pumps in <code class="docutils literal notranslate"><span class="pre">manual</span></code> mode will not be scheduled and can only be operated manually through
the Service API.</p>
<p>Pumps in <code class="docutils literal notranslate"><span class="pre">off</span></code> mode cannot be started at all.</p>
</td>
<td><p>“scheduled”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">log_events_noop_runs</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that controls if a “noop” (“no-operation”) pipe run should be logged in the pipe execution log or not. The default
value <code class="docutils literal notranslate"><span class="pre">false</span></code> means that runs that results in no processed or changed entities (the semantic depends on the type of sink)
will never be logged. See also the <code class="docutils literal notranslate"><span class="pre">log_events_noop_runs_changes_only</span></code> property which controls if the source or
the sink decides if a run is considered a “noop” or not. Note that any errors or retries will always imply logging
to the execution dataset.</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">log_events_noop_runs_changes_only</span></code></p></td>
<td><p>Boolean</p></td>
<td><p>A flag that controls what kind of metric is used to determine if a pipe run was a “noop” (“no-operation”) run or not.
The default setting <code class="docutils literal notranslate"><span class="pre">true</span></code> means that a run is considered a “noop” run if the sink reported that no entities
was changed, even if the source produced entities. If it is set to <code class="docutils literal notranslate"><span class="pre">false</span></code> then all runs which yielded no
new entities from the source is considered a “noop” run. Note that any errors or retries will always imply logging
to the execution dataset.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">notification_granularity</span></code></p></td>
<td><p>int</p></td>
<td><p>This property lets the pipe “override” the <code class="docutils literal notranslate"><span class="pre">log_events_noop_runs</span></code> property and force the pipe to log a run
at regular intervals, even if it was a “noop” run. The value is in seconds. The default value
is <code class="docutils literal notranslate"><span class="pre">999999999999999</span></code> and means “never”. A value of 900 means always log a pipe run if the last logged
“completed” event is older than 15 minutes). Note that any errors or retries will always imply logging to the
execution dataset.</p></td>
<td><p>true</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-configuration">
<h2>Example configuration<a class="headerlink" href="#example-configuration" title="Permalink to this headline">¶</a></h2>
<p>The outermost object would be your <a class="reference internal" href="configuration-pipes.html#pipe-section"><span class="std std-ref">pipe</span></a> configuration, which is omitted here for brevity:</p>
<p>A scheduled pump running every 30 seconds, no retries or dead letter dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;schedule_interval&quot;</span><span class="p">:</span> <span class="mi">30</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A cron pump running every day at midnight with max 5 retries, maximum 100 retries in the execution log and a dead letter
dataset. Also max ten consecutive write failures allowed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0 0 * * *&quot;</span><span class="p">,</span>
       <span class="s2">&quot;max_retries_per_entity&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
       <span class="s2">&quot;max_consecutive_write_errors&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
       <span class="s2">&quot;max_write_errors_in_retry_dataset&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
       <span class="s2">&quot;dead_letter_dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;mypipe-dead-letters&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A scheduled pump running every 30 seconds but do a full rescan of the source every full hour. No retries or dead letter
datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;schedule_interval&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
       <span class="s2">&quot;rescan_cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0 * * * *&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A scheduled pump running every 5 minutes from 14:00 and ending at 14:55, AND fire every 5 minutes starting at
18:00 and ending at 18:55, every day. No retries or dead letter datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;pump&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;cron_expression&quot;</span><span class="p">:</span> <span class="s2">&quot;0/5 14,18 * * ?&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rescans">
<span id="pipe-rescans"></span><h2>Rescans<a class="headerlink" href="#rescans" title="Permalink to this headline">¶</a></h2>
<p>Definition of terms:</p>
<dl>
<dt>Incremental run:</dt><dd><p>This is what a pump does when it is started when the stored “last_seen” value is set to a non-empty value,
i.e. the pipe will only process source-entities that has appeared after the previous run of the pipe. This is
the most common way to run a pipe.</p>
</dd>
<dt>Background rescan:</dt><dd><p>This is what a pump does when it is started by the <a class="reference internal" href="#pump-rescan-cron-expression"><span class="std std-ref">rescan_cron_expression</span></a> or
<a class="reference internal" href="#pump-rescan-run-count"><span class="std std-ref">rescan_run_count</span></a> config-properties (or if it is manually started by the
“start-rescan” pump-operation) and <a class="reference internal" href="configuration-pipes.html#pipe-settings-enable-background-rescan"><span class="std std-ref">enable_background_rescan</span></a> is set
to <code class="docutils literal notranslate"><span class="pre">true</span></code>. It will process all the source-entities, and do deletion tracking when finished.</p>
<p>Only pipes with a <a class="reference internal" href="configuration-sinks-dataset.html#dataset-sink"><span class="std std-ref">dataset sink</span></a> support background rescans. This is because a rescan run
needs a way to check that it isn’t overwriting newer entities from an incremental run, and only the dataset sink
has the required functionality.</p>
<p>The rescan functionality is not enabled by default. To enable it, either set the pipe’s
<a class="reference internal" href="configuration-pipes.html#pipe-settings-enable-background-rescan"><span class="std std-ref">enable_background_rescan</span></a> setting to <code class="docutils literal notranslate"><span class="pre">true</span></code>
to enable rescans on that specific pipe, or set the service metadata property
<a class="reference internal" href="configuration-metadata.html#service-metadata-global-defaults-enable-background-rescan"><span class="std std-ref">global_defaults.enable_background_rescan</span></a>
to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable rescans on all pipes.</p>
</dd>
<dt>Reset/Full run:</dt><dd><p>This is what a pump does when the user has explicitly reset the pipe. It will process all the source-entities,
and do deletion tracking when finished.</p>
</dd>
</dl>
<p>The use-case for rescans is that the user wants new entities to flow through the pipe as quickly as possible,
but the user also wants to reprocess <em>all</em> the source entities. The latter can be very time-consuming, and sometimes
it is not an option to simply reset the pipe to reprocess everything, since that would prevent any new entities from
flowing through the pipe until all the old entities have been processed.</p>
<p>Example: The pipe reads from a sql database-table that has an “last_modified_time”-column, but no “deleted” column;
new and modified rows can be selected with a an appropriate sql-statement, but there is no way to query the sql
database for deleted rows. In this case a rescan can be used to detect deleted rows, while incremental runs can
be used to process new rows at the same time.</p>
<p>There are two different “flavors” of rescans:</p>
<ol class="arabic">
<li><p>The entities produced by the incremental runs are known to be correct. This is the case if the user has just
changed the DTL of a pipe.</p>
<p>If one or more incremental run has been started while a rescan was in progress, the rescan will stop processing
entities when it reaches the “last_seen” offset used by the first incremental run.</p>
<p>If no incremental run has been started, the rescan will proceed past the “last_seen” offset and start to update
the stored “last_seen” value.  It is not possible to start an incremental run if a rescan is running and it has
already passed the “last_seen” offset.</p>
<p>The rescan will not overwrite any entities that have been written by an incremental run.
At the end of the rescan, the recan will do deletion-tracking, but will not delete any entities that were output
by the incremental run(s).</p>
<p>Caveats of doing rescan+incremental runs:</p>
<ul class="simple">
<li><p>The order of the resulting entities can be different that it would be in a normal “reset”-run.</p></li>
<li><p>Since the rescan can’t overwrite entities that has been output by the incremental run, the pipe may not output
all the versions of an entity that it would in a normal run. This can happen for instance if the pipe has a
<a class="reference internal" href="configuration-sources-dataset.html#dataset-source"><span class="std std-ref">dataset source</span></a> with the <code class="docutils literal notranslate"><span class="pre">include_previous_versions</span></code> property set to true; once the
incremental run has output entity “A”, any older versions of “A” that is produces by the rescan will be ignored.</p></li>
</ul>
</li>
<li><p>The entities produced by the incremental run may not be correct in all cases. This is the case if the pipe has
a “merge”-source, and the user has changed the configuration of the merge-source.</p>
<p>In this case the incremental run will use the old version of the merge-source, which may produce erronous results.
The entities from the incremental run will not be put into the sink’s seen-tracker. The incremental run will not
overwrite any entities that have been produced by the rescan run.</p>
<p>Once the rescan finishes, any incremental run in progress will be stopped. The rescan will then process any entities
that have appeared since the start of the rescan. Once that is done, the rescan will do deletion-tracking. This will
delete any erronous entities that was emitted by the incremental run.</p>
<p>Caveats of doing rescan+incremental runs:</p>
<ul class="simple">
<li><p>The order of the resulting entities can be different that it would be in a normal “reset”-run.</p></li>
<li><p>The output can temporarily contain erronous entities (produced by the incremental runs).
Such entities will deleted once the rescan has finished.</p></li>
</ul>
</li>
</ol>
<p>Only one incremental run can be active at once, but once an incremental run has finished a new incremental run can be
started. A rescan run can also be started while an incremental run is in progress.</p>
<p>The incremental runs will not do retries, since the rescan will reprocess any previously failed entities.
The incremental runs will do dependency tracking.</p>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="configuration-systems-microservice.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Microservice system</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="api.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Service API</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 Sesam.io AS.<br>
</p>
    </div>
    
  </div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZDKEJY06V9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZDKEJY06V9');
</script>
<!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="https://js.hs-scripts.com/19709964.js"></script>
<!-- End of HubSpot Embed Code -->

  </body>
</html>