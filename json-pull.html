
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON Pull Protocol &#8212; Sesam Documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="JSON Push Protocol" href="json-push.html" />
    <link rel="prev" title="Working with RDF" href="rdf-support.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="index.html">
  <img src="_static/sesamlogo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-whatis.html">
  What is Sesam
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index-developer.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index-learn.html">
  Learn
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="community.html">
  Community
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="legal.html">
  Legal
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://support.sesam.io">
  Support
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference external nav-link" href="https://portal.sesam.io">
  Login
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="quick-reference.html">
   Quick Reference
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="best-practices.html">
   Project kickstart
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pre-planning.html">
     Planning a project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="setup-environment.html">
     Setting up an environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-dataflow.html">
     Creating a dataflow
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="developer-guide.html">
   Building blocks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="product-features.html">
   Features
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DTLReferenceGuide.html">
   Data Transformation Language (DTL)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="patterns.html">
   Design patterns
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index-synchronization.html">
   Data synchronization
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="idempotency.html">
     Non-idempotency
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cron-expressions.html">
     Cron Expressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rdf-support.html">
     RDF support
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     JSON Pull Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="json-push.html">
     JSON Push Protocol
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="extension-points.html">
     Developer Extension Points
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="source-datatype-mapping.html">
     Source datatype mapping
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-datamodelling.html">
   Data modelling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="entitymodel.html">
     Entity Data Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-modelling.html">
     Data modelling
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-dataplatforms.html">
   Data platforms
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="azure.html">
     Sesam in Microsoft Azure
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index-operations.html">
   Operations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="security.html">
     Security
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="notifications.html">
     Notifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pump-execution.html">
     Pump Execution Dataset
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="project-workflow.html">
     Configuration Management
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="version-control-system.html">
       Using Sesam with a version control system
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="testing-locally.html">
       Testing a Sesam configuration locally
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="continuous-integration.html">
       Continuous integration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="automatic-deployment.html">
       Automatic deployment
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="self-hosted.html">
     Self-hosted service
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="low-level-debugging.html">
     Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="behind-the-scenes.html">
     Behind the scenes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="tools.html">
   Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="management-studio.html">
     Management Studio
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sesam-client.html">
     Sesam Client
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="gdpr-platform.html">
     GDPR platform
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-configuration.html">
       Platform configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-types-purposes-configuration.html">
       Datatypes and purposes configuration
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-data-access-portal.html">
       The GDPR data access portal
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-platform-developer-docs.html">
       Developer documentation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-getting-started.html">
       Getting started
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="gdpr-changelog.html">
       Changelog
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="configuration.html">
   Service Configuration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="api.html">
   Service API
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="deprecations.html">
   Deprecated features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="databrowser.html">
     Databrowser
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-guide.html">
       Databrowser Guide
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-auth.html">
       Authentication and authorization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="databrowser-api.html">
       Configuration file API
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="changelog.html">
   Changelog
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requests">
   Requests
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#response-headers">
   Response headers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-published-endpoint">
   Example: published endpoint
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-dataset-subset">
   Example: dataset subset
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="json-pull-protocol">
<h1>JSON Pull Protocol<a class="headerlink" href="#json-pull-protocol" title="Permalink to this headline">¶</a></h1>
<p>The JSON Pull protocol is an HTTP-based protocol that uses GET
requests to retrieve streams of <a class="reference internal" href="entitymodel.html"><span class="doc">entities</span></a>. It
supports splitting up the data across multiple requests.</p>
<p>The protocol is supported by the <a class="reference internal" href="configuration.html#http-endpoint-sink"><span class="std std-ref">http_endpoint</span></a> sink and the <a class="reference internal" href="configuration.html#json-source"><span class="std std-ref">json</span></a>
source. This protocol can be used by microservices and other clients
to retrieve entities.</p>
<div class="section" id="requests">
<h2>Requests<a class="headerlink" href="#requests" title="Permalink to this headline">¶</a></h2>
<p>The following HTTP request parameters are supported:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">since</span></code></p></td>
<td><p>A token that tells the endpoint
after what offset in the stream to start streaming entities.</p>
<p>This token references the <code class="docutils literal notranslate"><span class="pre">_updated</span></code> property in entities.</p>
<p><code class="docutils literal notranslate"><span class="pre">since</span></code> is typically used to continue from the point where
the previous request ended. In order to do this the value of
the <code class="docutils literal notranslate"><span class="pre">_updated</span></code> property in the last entity in the previous
request can used.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">since</span></code> request parameter is not given it means that
entities from the beginning should be returned.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">limit</span></code></p></td>
<td><p>An integer. Tells the server to cap the response to this many
entities. By using limit one can split the entities stream
across multiple requests.</p>
<p>The default is to have no limit, which means that all entities
will be returned. Note that an endpoint may implement a
different default.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">subset</span></code></p></td>
<td><p>If specified then the specified JSON encoded subset expression
will be used to retrieve a subset of entities. If the
subset does not exist, then 404 is returned. This is an optional
feature and the endpoint may not support subsets at all. In that
case it may ignore the request parameter entirely.</p></td>
</tr>
</tbody>
</table>
<p>The HTTP body is JSON data which will always be in the form of a
JSON array even if it is a single entity. The
serialisation of entities as JSON is described in more detail
<a class="reference internal" href="entitymodel.html"><span class="doc">here</span></a>.</p>
</div>
<div class="section" id="response-headers">
<h2>Response headers<a class="headerlink" href="#response-headers" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-given table">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Header</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X-Dataset-Populated</span></code></p></td>
<td><p>This header contains the dataset’s populated flag. It is <code class="docutils literal notranslate"><span class="pre">true</span></code> if the dataset is populated and <code class="docutils literal notranslate"><span class="pre">false</span></code> if it is not. If the header is missing then the populated flag should be considered to be unknown.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X-Dataset-Max-Updated</span></code></p></td>
<td><p>This is the highest committed offset in the dataset. If you ask for all the entities then the last entity you receive should have this offset in its <code class="docutils literal notranslate"><span class="pre">_updated</span></code> property. The value is JSON encoded.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X-Dataset-Filtered</span></code></p></td>
<td><p>This will be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if the source entity stream is filtered. In general you aren’t guaranteed to see the entity at the <code class="docutils literal notranslate"><span class="pre">X-Dataset-Max-Updated</span></code> offset in this case. One example of where you’ll see this is if you have a <a class="reference internal" href="configuration.html#http-endpoint-sink"><span class="std std-ref">publisher pipe</span></a> that has a transform.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X-Dataset-Generation</span></code></p></td>
<td><p>When a dataset is created it is assigned a UUID. If the dataset is deleted and then recreated it will get a new generation UUID.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X-Dataset-Completeness</span></code></p></td>
<td><p>If the dataset has a <a class="reference internal" href="configuration.html#completeness"><span class="std std-ref">completeness</span></a> set then this header will contain the completeness value. The value is an integer representing the number of microseconds since epoch (January 1st 1970 UTC).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X-Dataset-Restore-Uuid</span></code></p></td>
<td><p>When a dataset is restored [from a backup] then it is assigned a UUID.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X-Dataset-Restore-Offset</span></code></p></td>
<td><p>This the highest committed offset in the dataset at the point when it was last restored. The value is JSON encoded.</p></td>
</tr>
</tbody>
</table>
<p>The <a class="reference internal" href="configuration.html#automatic-reprocessing"><span class="std std-ref">automatic reprocessing</span></a> feature makes use of several of these headers to know when to rewind or reset a pipe.</p>
</div>
<div class="section" id="example-published-endpoint">
<span id="json-pull-examples"></span><h2>Example: published endpoint<a class="headerlink" href="#example-published-endpoint" title="Permalink to this headline">¶</a></h2>
<p>In this example we’ll use two pipes. The first loads letters into the
<code class="docutils literal notranslate"><span class="pre">letters</span></code> dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;letters&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;embedded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;E&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;F&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;G&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;H&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;I&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;J&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;K&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;L&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;N&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;O&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;P&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Q&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;R&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;S&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;T&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;U&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;V&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;W&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Y&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Z&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The second one publishes the dataset as an <a class="reference internal" href="configuration.html#http-endpoint-sink"><span class="std std-ref">HTTP endpoint</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;published-letters&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;letters&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http_endpoint&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once the <code class="docutils literal notranslate"><span class="pre">letters</span></code> pipes has been run then the <code class="docutils literal notranslate"><span class="pre">letters</span></code> dataset
has been populated. It should contain 26 entities - one for each
letter.</p>
<p>To use the <code class="docutils literal notranslate"><span class="pre">curl</span></code> command to communicate with Sesam we need a JWT
token for authorization. We’ll add the JWT authorization header to an
environment variable to make this easier:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">AUTH_HEADER</span><span class="o">=</span><span class="s2">&quot;Authorization: bearer YOUR-JWT-TOKEN&quot;</span>
</pre></div>
</div>
<p>Now we can use the <a class="reference external" href="./api.html#get--publishers-pipe_id-entities">published endpoint</a>,
<code class="docutils literal notranslate"><span class="pre">/api/publishers/published-letters/entities</span></code>, which supports the
JSON Pull protocol, to retrieve the entities.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -s -H &quot;$AUTH_HEADER&quot; &#39;http://localhost:9042/api/publishers/published-letters/entities&#39; | jq .
[
  {
    &quot;_id&quot;: &quot;A&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 0,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417034,
    &quot;_hash&quot;: &quot;16347804dece906038080f1ce18fc581&quot;
  },
  {
    &quot;_id&quot;: &quot;B&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 1,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417078,
    &quot;_hash&quot;: &quot;49316b0ce64d07e4cf58ff8caede27c3&quot;
  },
  {
    &quot;_id&quot;: &quot;C&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 2,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417108,
    &quot;_hash&quot;: &quot;964675e8251bbc72f66e6b97fe91482f&quot;
  },
  ...snip...
  {
    &quot;_id&quot;: &quot;X&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 23,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417768,
    &quot;_hash&quot;: &quot;268c63c34e22c7a63053e8aad251b3aa&quot;
  },
  {
    &quot;_id&quot;: &quot;Y&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 24,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417793,
    &quot;_hash&quot;: &quot;986e0f38daace41b0bd4a122ed540967&quot;
  },
  {
    &quot;_id&quot;: &quot;Z&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 25,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417817,
    &quot;_hash&quot;: &quot;05118526797098ea97f0b63ae562e174&quot;
  }
]
</pre></div>
</div>
<p>Because we did not specify any request parameters, all entities in the
dataset was returned.</p>
<p>We can also ask for entities that arrived after as specific point by
using the <code class="docutils literal notranslate"><span class="pre">since</span></code> request parameter. This will return only entities
that have a value in their <code class="docutils literal notranslate"><span class="pre">&quot;_updated&quot;</span></code> property that are ordered after
the one given in the <code class="docutils literal notranslate"><span class="pre">since</span></code> request parameter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -s -H &quot;$AUTH_HEADER&quot; &#39;http://localhost:9042/api/publishers/published-letters/entities?since=21&#39; | jq .
[
  {
    &quot;_id&quot;: &quot;W&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 22,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417743,
    &quot;_hash&quot;: &quot;fb732242a8014e1409cb20a9888ca91e&quot;
  },
  {
    &quot;_id&quot;: &quot;X&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 23,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417768,
    &quot;_hash&quot;: &quot;268c63c34e22c7a63053e8aad251b3aa&quot;
  },
  {
    &quot;_id&quot;: &quot;Y&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 24,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417793,
    &quot;_hash&quot;: &quot;986e0f38daace41b0bd4a122ed540967&quot;
  },
  {
    &quot;_id&quot;: &quot;Z&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 25,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417817,
    &quot;_hash&quot;: &quot;05118526797098ea97f0b63ae562e174&quot;
  }
]
</pre></div>
</div>
<p>Asking for <code class="docutils literal notranslate"><span class="pre">since=21</span></code> returned the last four letters which had
sequence values 22, 23, 24 and 25.</p>
<p>Now, if we only want a certain number of letters in each request we
can use the <code class="docutils literal notranslate"><span class="pre">limit</span></code> request parameter to specify how many entities
we want.</p>
<p>Let’s ask for 3 entities since 20.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -s -H &quot;$AUTH_HEADER&quot; &#39;http://localhost:9042/api/publishers/published-letters/entities?since=20&amp;limit=3&#39; | jq .
[
  {
    &quot;_id&quot;: &quot;V&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 21,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417716,
    &quot;_hash&quot;: &quot;3e51777d62023b889d1c0f5e31b5fdba&quot;
  },
  {
    &quot;_id&quot;: &quot;W&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 22,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417743,
    &quot;_hash&quot;: &quot;fb732242a8014e1409cb20a9888ca91e&quot;
  },
  {
    &quot;_id&quot;: &quot;X&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 23,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417768,
    &quot;_hash&quot;: &quot;268c63c34e22c7a63053e8aad251b3aa&quot;
  }
]
</pre></div>
</div>
<p>And then 3 entities since 23.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -s -H &quot;$AUTH_HEADER&quot; &#39;http://localhost:9042/api/publishers/published-letters/entities?since=23&amp;limit=3&#39; | jq .
[
  {
    &quot;_id&quot;: &quot;Y&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 24,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417793,
    &quot;_hash&quot;: &quot;986e0f38daace41b0bd4a122ed540967&quot;
  },
  {
    &quot;_id&quot;: &quot;Z&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 25,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1507790035417817,
    &quot;_hash&quot;: &quot;05118526797098ea97f0b63ae562e174&quot;
  }
]
</pre></div>
</div>
</div>
<div class="section" id="example-dataset-subset">
<h2>Example: dataset subset<a class="headerlink" href="#example-dataset-subset" title="Permalink to this headline">¶</a></h2>
<p>In this example we’ll use one pipe. It is almost the same as the one in the previous section, but this time we’ve identified the vowels and also declared an index on the <a class="reference internal" href="configuration.html#dataset-sink"><span class="std std-ref">dataset sink</span></a>. This index can be used to retrieve a subset from the <code class="docutils literal notranslate"><span class="pre">letters</span></code> dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;letters&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;embedded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;vowel&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;D&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;vowel&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;F&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;G&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;H&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;vowel&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;J&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;K&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;L&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;M&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;N&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="s2">&quot;vowel&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;P&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Q&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;R&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;S&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;T&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;vowel&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;V&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;W&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;vowel&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;Z&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;sink&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;indexes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;_S.vowel&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we can use the <a class="reference external" href="./api.html#get--datasets-dataset_id-entities">dataset endpoint</a>,
<code class="docutils literal notranslate"><span class="pre">/api/datasets/letters/entities</span></code>, which supports the
JSON Pull protocol, to retrieve the subset. The subset is expressed as an equality expression, <code class="docutils literal notranslate"><span class="pre">[&quot;eq&quot;,</span> <span class="pre">&quot;_S.vowel&quot;,</span> <span class="pre">true]</span></code>, with the index expression in the left side and the subset value on the right side. Note that all request parameters must be URL encoded, and in the case of the subset expression this makes it look garbled.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -s -H &quot;$AUTH_HEADER&quot; &#39;http://localhost:9042/api/datasets/letters/entities?subset=%5B%22eq%22%2C+%22_S.vowel%22%2C+true%5D&#39; | jq .
[
  {
    &quot;vowel&quot;: true,
    &quot;_id&quot;: &quot;A&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 0,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1566889765658992,
    &quot;_hash&quot;: &quot;bd43d289d45c8dccffda0aa05d9e39cf&quot;
  },
  {
    &quot;vowel&quot;: true,
    &quot;_id&quot;: &quot;E&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 4,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1566889765659581,
    &quot;_hash&quot;: &quot;36d1cfe98ee07d463c82d356cac55c35&quot;
  },
  {
    &quot;vowel&quot;: true,
    &quot;_id&quot;: &quot;I&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 8,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1566889765660099,
    &quot;_hash&quot;: &quot;0f46df8330b95f661d1165eba5a141ac&quot;
  },
  {
    &quot;vowel&quot;: true,
    &quot;_id&quot;: &quot;O&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 14,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1566889765660912,
    &quot;_hash&quot;: &quot;0a02eda8f99d6bf81f49e63a059f95fa&quot;
  },
  {
    &quot;vowel&quot;: true,
    &quot;_id&quot;: &quot;U&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 20,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1566889765661476,
    &quot;_hash&quot;: &quot;c50c560caac61b289a605a8f23e044ce&quot;
  },
  {
    &quot;vowel&quot;: true,
    &quot;_id&quot;: &quot;Y&quot;,
    &quot;_deleted&quot;: false,
    &quot;_updated&quot;: 24,
    &quot;_previous&quot;: null,
    &quot;_ts&quot;: 1566889765661751,
    &quot;_hash&quot;: &quot;82bb94970ffea2b08cc15de9d26dd4f6&quot;
  }
]
</pre></div>
</div>
<p>Note that subsets can also be exposed via a published endpoint, but then the <code class="docutils literal notranslate"><span class="pre">subset</span></code> property must be specified on the <a class="reference internal" href="configuration.html#dataset-source"><span class="std std-ref">dataset source</span></a>. In that case the <code class="docutils literal notranslate"><span class="pre">subset</span></code> request parameter is not neccessary as only this one specific subset is published.</p>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="rdf-support.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Working with RDF</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="json-push.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">JSON Push Protocol</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 Sesam.io AS.<br>
</p>
    </div>
    
  </div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZDKEJY06V9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZDKEJY06V9');
</script>
<!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="https://js.hs-scripts.com/19709964.js"></script>
<!-- End of HubSpot Embed Code -->

  </body>
</html>